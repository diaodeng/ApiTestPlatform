{"version":3,"file":"index.D5agEiln.js","sources":["../../../src/components/hrm/common/run/run-data-config.vue","../../../src/views/qtr/job/index.vue"],"sourcesContent":["<script setup>\r\n/*\r\n* 获取测试执行的数据id和类型\r\n* */\r\nimport {RunTypeEnum} from \"@/components/hrm/enum.js\";\r\nimport CaseTableQuery from \"@/components/hrm/util-data-table/case-table-query.vue\";\r\nimport ModuleTableQuery from \"@/components/hrm/util-data-table/module-table-query.vue\";\r\nimport ProjectTableQuery from \"@/components/hrm/util-data-table/project-table-query.vue\";\r\nimport SuiteTableQuery from \"@/components/qtr/util-data-table/suite-table-query.vue\";\r\n\r\nconst runType = defineModel(\"runType\", {default: RunTypeEnum.case});\r\nconst runIds = defineModel(\"runIds\", {default: []});\r\n// const runType = ref(RunTypeEnum.case);\r\nconst dialogVisible = ref(false);\r\nconst caseDataDialog = ref(false);\r\n\r\nconst dataTableRef = ref(null);\r\nconst tipsContent = computed(()=>{\r\n  return runIds.value ? runIds.value.join(\",\"): \"\";\r\n});\r\n\r\nconst dialogTitle = computed(()=>{\r\n  if(runType.value === RunTypeEnum.case){\r\n    return \"配置用例数据\";\r\n  }else if (runType.value === RunTypeEnum.module){\r\n    return \"配置模块数据\";\r\n  }else if(runType.value === RunTypeEnum.project){\r\n    return \"配置项目数据\";\r\n  }else if(runType.value === RunTypeEnum.suite){\r\n    return \"配置套件数据\";\r\n  }\r\n  return \"\"\r\n});\r\n\r\nfunction changeType() {\r\n  runIds.value = [];\r\n  // if (runIds.value && runIds.value.length > 0){\r\n  //   dialogVisible.value = true;\r\n  // }\r\n}\r\n\r\nfunction selectChangeHandle(selected) {\r\n  runIds.value = selected.map(item => item.suiteId);\r\n}\r\n\r\nfunction dataChange() {\r\n  runIds.value = dataTableRef.value.getSelectedIds();\r\n  caseDataDialog.value = false;\r\n}\r\n\r\n</script>\r\n\r\n<template>\r\n  <el-dialog\r\n      v-model=\"dialogVisible\"\r\n      title=\"数据类型变更提醒\"\r\n      width=\"500\"\r\n  >\r\n    <span>只能选择一种数据类型，修改数据类型将删除原有数据，确定修改？</span>\r\n    <template #footer>\r\n      <div class=\"dialog-footer\">\r\n        <el-button @click=\"dialogVisible = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"dialogVisible = false\">\r\n          确定\r\n        </el-button>\r\n      </div>\r\n    </template>\r\n  </el-dialog>\r\n  <el-radio-group v-model=\"runType\" @change=\"changeType\">\r\n    <el-radio :value=\"RunTypeEnum.case\">用例</el-radio>\r\n    <el-radio :value=\"RunTypeEnum.module\">模块</el-radio>\r\n    <el-radio :value=\"RunTypeEnum.project\">项目</el-radio>\r\n    <el-radio :value=\"RunTypeEnum.suite\">套件</el-radio>\r\n  </el-radio-group>\r\n  <el-tooltip\r\n      class=\"box-item\"\r\n      effect=\"dark\"\r\n      :content=\"tipsContent\"\r\n      placement=\"top-start\"\r\n  >\r\n    <el-button style=\"margin-left: 10px\" round type=\"success\" @click=\"()=>{caseDataDialog=true}\">配置数据</el-button>\r\n  </el-tooltip>\r\n\r\n  <el-dialog v-model=\"caseDataDialog\"\r\n             :title=\"dialogTitle\"\r\n             width=\"90%\"\r\n             destroy-on-close>\r\n    <el-container style=\"display: flex;overflow-x: auto\">\r\n      <template v-if=\"runType === RunTypeEnum.case\">\r\n        <CaseTableQuery ref=\"dataTableRef\" :checked-ids=\"runIds\"></CaseTableQuery>\r\n      </template>\r\n      <template v-else-if=\"runType === RunTypeEnum.module\">\r\n        <ModuleTableQuery ref=\"dataTableRef\" :checked-ids=\"runIds\"></ModuleTableQuery>\r\n      </template>\r\n      <template v-else-if=\"runType === RunTypeEnum.project\">\r\n        <ProjectTableQuery ref=\"dataTableRef\" :checked-ids=\"runIds\"></ProjectTableQuery>\r\n      </template>\r\n      <template v-else-if=\"runType === RunTypeEnum.suite\">\r\n        <SuiteTableQuery ref=\"dataTableRef\" :checked-ids=\"runIds\"></SuiteTableQuery>\r\n      </template>\r\n    </el-container>\r\n    <template #footer>\r\n      <div class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"dataChange\">确定</el-button>\r\n      </div>\r\n    </template>\r\n    <el-footer>\r\n\r\n    </el-footer>\r\n  </el-dialog>\r\n\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n</style>","<template>\r\n  <div class=\"app-container\">\r\n    <el-form :model=\"queryParams\" ref=\"queryRef\" :inline=\"true\" v-show=\"showSearch\">\r\n      <el-form-item label=\"任务名称\" prop=\"jobName\">\r\n        <el-input\r\n            v-model=\"queryParams.jobName\"\r\n            placeholder=\"请输入任务名称\"\r\n            clearable\r\n            style=\"width: 200px\"\r\n            @keyup.enter=\"handleQuery\"\r\n        />\r\n      </el-form-item>\r\n      <el-form-item label=\"任务组名\" prop=\"jobGroup\">\r\n        <el-select v-model=\"queryParams.jobGroup\" placeholder=\"请选择任务组名\" clearable style=\"width: 200px\">\r\n          <el-option\r\n              v-for=\"dict in sys_job_group\"\r\n              :key=\"dict.value\"\r\n              :label=\"dict.label\"\r\n              :value=\"dict.value\"\r\n          />\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"任务状态\" prop=\"status\">\r\n        <el-select v-model=\"queryParams.status\" placeholder=\"请选择任务状态\" clearable style=\"width: 200px\">\r\n          <el-option\r\n              v-for=\"dict in sys_job_status\"\r\n              :key=\"dict.value\"\r\n              :label=\"dict.label\"\r\n              :value=\"dict.value\"\r\n          />\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" icon=\"Search\" @click=\"handleQuery\">搜索</el-button>\r\n        <el-button type=\"warning\" icon=\"Search\" @click=\"handleQueryScheduler\" title=\"显示scheduler加载的任务\"\r\n                   v-show=\"false\">搜索\r\n        </el-button>\r\n        <el-button icon=\"Refresh\" @click=\"resetQuery\">重置</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <el-row :gutter=\"10\" class=\"mb8\">\r\n      <el-col :span=\"1.5\">\r\n        <el-button\r\n            type=\"primary\"\r\n            plain\r\n            icon=\"Plus\"\r\n            @click=\"handleAdd\"\r\n            v-hasPermi=\"['qtr:job:add']\"\r\n        >新增\r\n        </el-button>\r\n      </el-col>\r\n      <el-col :span=\"1.5\">\r\n        <el-button\r\n            type=\"success\"\r\n            plain\r\n            icon=\"Edit\"\r\n            :disabled=\"single\"\r\n            @click=\"handleUpdate\"\r\n            v-hasPermi=\"['qtr:job:edit']\"\r\n        >修改\r\n        </el-button>\r\n      </el-col>\r\n      <el-col :span=\"1.5\">\r\n        <el-button\r\n            type=\"danger\"\r\n            plain\r\n            icon=\"Delete\"\r\n            :disabled=\"multiple\"\r\n            @click=\"handleDelete\"\r\n            v-hasPermi=\"['qtr:job:remove']\"\r\n        >删除\r\n        </el-button>\r\n      </el-col>\r\n      <el-col :span=\"1.5\">\r\n        <el-button\r\n            type=\"warning\"\r\n            plain\r\n            icon=\"Download\"\r\n            @click=\"handleExport\"\r\n            v-hasPermi=\"['qtr:job:export']\"\r\n        >导出\r\n        </el-button>\r\n      </el-col>\r\n      <el-col :span=\"1.5\">\r\n        <el-button\r\n            type=\"info\"\r\n            plain\r\n            icon=\"Operation\"\r\n            @click=\"handleJobLog\"\r\n            v-hasPermi=\"['qtr:job:query']\"\r\n        >日志\r\n        </el-button>\r\n      </el-col>\r\n      <right-toolbar v-model:showSearch=\"showSearch\" @queryTable=\"getList\"></right-toolbar>\r\n    </el-row>\r\n\r\n    <el-table v-loading=\"loading\" :data=\"jobList\" @selection-change=\"handleSelectionChange\">\r\n      <el-table-column type=\"selection\" width=\"55\" align=\"center\"/>\r\n      <el-table-column label=\"任务编号\" width=\"100\" align=\"center\" prop=\"jobId\"/>\r\n      <el-table-column label=\"任务名称\" align=\"center\" prop=\"jobName\" :show-overflow-tooltip=\"true\"/>\r\n      <el-table-column label=\"任务组名\" align=\"center\" prop=\"jobGroup\">\r\n        <template #default=\"scope\">\r\n          <dict-tag :options=\"sys_job_group\" :value=\"scope.row.jobGroup\"/>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"调用目标字符串\" align=\"center\" prop=\"invokeTarget\" :show-overflow-tooltip=\"true\"/>\r\n      <el-table-column label=\"cron执行表达式\" align=\"center\" prop=\"cronExpression\" :show-overflow-tooltip=\"true\"/>\r\n      <el-table-column prop=\"status\" label=\"执行状态\" align=\"center\" width=\"70\">\r\n        <template #default=\"scope\">\r\n          <dict-tag :options=\"job_run_status\" :value=\"scope.row.runStatus\"/>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"状态\" align=\"center\">\r\n        <template #default=\"scope\">\r\n          <el-switch\r\n              v-model=\"scope.row.status\"\r\n              active-value=\"0\"\r\n              inactive-value=\"1\"\r\n              @change=\"handleStatusChange(scope.row)\"\r\n          ></el-switch>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\" align=\"center\" width=\"200\" class-name=\"small-padding fixed-width\">\r\n        <template #default=\"scope\">\r\n\r\n          <el-tooltip content=\"停止进行中的任务\" placement=\"top\">\r\n            <el-button link type=\"danger\" icon=\"SwitchButton\" @click=\"stopJobHandler(scope.row)\"\r\n                       v-hasPermi=\"['qtr:job:edit']\" v-show=\"false\"></el-button>\r\n          </el-tooltip>\r\n          <el-tooltip content=\"修改\" placement=\"top\">\r\n            <el-button link type=\"primary\" icon=\"Edit\" @click=\"handleUpdate(scope.row)\"\r\n                       v-hasPermi=\"['qtr:job:edit']\"></el-button>\r\n          </el-tooltip>\r\n          <el-tooltip content=\"删除\" placement=\"top\">\r\n            <el-button link type=\"primary\" icon=\"Delete\" @click=\"handleDelete(scope.row)\"\r\n                       v-hasPermi=\"['qtr:job:remove']\"></el-button>\r\n          </el-tooltip>\r\n          <el-tooltip content=\"执行一次\" placement=\"top\">\r\n            <el-button link type=\"primary\" icon=\"CaretRight\" @click=\"handleRun(scope.row)\"\r\n                       v-hasPermi=\"['qtr:job:changeStatus']\"></el-button>\r\n          </el-tooltip>\r\n          <el-tooltip content=\"任务详细\" placement=\"top\">\r\n            <el-button link type=\"primary\" icon=\"View\" @click=\"handleView(scope.row)\"\r\n                       v-hasPermi=\"['qtr:job:query']\"></el-button>\r\n          </el-tooltip>\r\n          <el-tooltip content=\"调度日志\" placement=\"top\">\r\n            <el-button link type=\"primary\" icon=\"Operation\" @click=\"handleJobLog(scope.row)\"\r\n                       v-hasPermi=\"['qtr:job:query']\"></el-button>\r\n          </el-tooltip>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <pagination\r\n        v-show=\"total > 0\"\r\n        :total=\"total\"\r\n        v-model:page=\"queryParams.pageNum\"\r\n        v-model:limit=\"queryParams.pageSize\"\r\n        @pagination=\"getList\"\r\n    />\r\n\r\n    <!-- 添加或修改定时任务对话框 基础操作 -->\r\n    <el-dialog :title=\"title\" v-model=\"open\" width=\"820px\" append-to-body>\r\n      <el-form ref=\"jobRef\" :model=\"form\" :rules=\"rules\" label-width=\"120px\">\r\n        <el-row>\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"任务名称\" prop=\"jobName\">\r\n              <el-input v-model=\"form.jobName\" placeholder=\"请输入任务名称\"/>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"测试数据\" prop=\"testData\">\r\n              <RunDataConfig v-model:run-ids=\"runIds\" v-model:run-type=\"runType\"></RunDataConfig>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"24\">\r\n            <RunConfig label-width=\"120px\"\r\n                       v-model:config-data=\"runConfigDataRef\"\r\n                       @update=\"updateRunConfigData\"\r\n            ></RunConfig>\r\n          </el-col>\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"cron表达式\" prop=\"cronExpression\">\r\n              <el-input v-model=\"form.cronExpression\" placeholder=\"请输入cron执行表达式\">\r\n                <template #append>\r\n                  <el-button type=\"primary\" @click=\"handleShowCron\">\r\n                    生成表达式\r\n                    <i class=\"el-icon-time el-icon--right\"></i>\r\n                  </el-button>\r\n                </template>\r\n              </el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"24\" v-if=\"form.jobId !== undefined\">\r\n            <el-form-item label=\"状态\">\r\n              <el-radio-group v-model=\"form.status\">\r\n                <el-radio\r\n                    v-for=\"dict in sys_job_status\"\r\n                    :key=\"dict.value\"\r\n                    :value=\"dict.value\"\r\n                >{{ dict.label }}\r\n                </el-radio>\r\n              </el-radio-group>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"执行策略\" prop=\"misfirePolicy\">\r\n              <el-radio-group v-model=\"form.misfirePolicy\">\r\n                <el-radio-button value=\"1\">立即执行</el-radio-button>\r\n                <el-radio-button value=\"2\">执行一次</el-radio-button>\r\n                <el-radio-button value=\"3\">放弃执行</el-radio-button>\r\n              </el-radio-group>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"是否并发\" prop=\"concurrent\">\r\n              <el-radio-group v-model=\"form.concurrent\">\r\n                <el-radio-button value=\"0\">允许</el-radio-button>\r\n                <el-radio-button value=\"1\">禁止</el-radio-button>\r\n              </el-radio-group>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form>\r\n      <template #footer>\r\n        <div class=\"dialog-footer\">\r\n          <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\r\n          <el-button @click=\"cancel\">取 消</el-button>\r\n        </div>\r\n      </template>\r\n    </el-dialog>\r\n\r\n    <!-- 添加或修改定时任务对话框 高级操作 -->\r\n    <el-dialog :title=\"title\" v-model=\"openAdvanced\" width=\"820px\" append-to-body>\r\n      <el-form ref=\"jobRef\" :model=\"form\" :rules=\"rules\" label-width=\"120px\">\r\n        <el-row>\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"任务名称\" prop=\"jobName\">\r\n              <el-input v-model=\"form.jobName\" placeholder=\"请输入任务名称\"/>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"任务分组\" prop=\"jobGroup\">\r\n              <el-select v-model=\"form.jobGroup\" placeholder=\"请选择\">\r\n                <el-option\r\n                    v-for=\"dict in sys_job_group\"\r\n                    :key=\"dict.value\"\r\n                    :label=\"dict.label\"\r\n                    :value=\"dict.value\"\r\n                ></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"任务执行器\" prop=\"jobGroup\">\r\n              <el-select v-model=\"form.jobExecutor\" placeholder=\"请选择任务执行器\">\r\n                <el-option\r\n                    v-for=\"dict in sys_job_executor\"\r\n                    :key=\"dict.value\"\r\n                    :label=\"dict.label\"\r\n                    :value=\"dict.value\"\r\n                ></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"24\">\r\n            <el-form-item prop=\"invokeTarget\">\r\n              <template #label>\r\n                        <span>\r\n                           调用方法\r\n                           <el-tooltip placement=\"top\">\r\n                              <template #content>\r\n                                 <div>\r\n                                    Bean调用示例：ryTask.ryParams('ry')\r\n                                    <br/>Class类调用示例：com.ruoyi.quartz.task.RyTask.ryParams('ry')\r\n                                    <br/>参数说明：支持字符串，布尔类型，长整型，浮点型，整型\r\n                                 </div>\r\n                              </template>\r\n                              <el-icon><question-filled/></el-icon>\r\n                           </el-tooltip>\r\n                        </span>\r\n              </template>\r\n              <el-input v-model=\"form.invokeTarget\" placeholder=\"请输入调用目标字符串\"/>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"位置参数\" prop=\"jobArgs\">\r\n              <el-input v-model=\"form.jobArgs\" placeholder=\"请输入位置参数\"/>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"关键字参数\" prop=\"jobKwargs\">\r\n              <!--                  <el-input v-model=\"form.jobKwargs\" placeholder=\"请输入关键字参数\" />-->\r\n              <AceEditor v-model:content=\"form.jobKwargs\" lang=\"json\" themes=\"monokai\" height=\"300px\" width=\"670px\"\r\n                         placeholder=\"请输入关键字参数\"></AceEditor>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"cron表达式\" prop=\"cronExpression\">\r\n              <el-input v-model=\"form.cronExpression\" placeholder=\"请输入cron执行表达式\">\r\n                <template #append>\r\n                  <el-button type=\"primary\" @click=\"handleShowCron\">\r\n                    生成表达式\r\n                    <i class=\"el-icon-time el-icon--right\"></i>\r\n                  </el-button>\r\n                </template>\r\n              </el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"24\" v-if=\"form.jobId !== undefined\">\r\n            <el-form-item label=\"状态\">\r\n              <el-radio-group v-model=\"form.status\">\r\n                <el-radio\r\n                    v-for=\"dict in sys_job_status\"\r\n                    :key=\"dict.value\"\r\n                    :value=\"dict.value\"\r\n                >{{ dict.label }}\r\n                </el-radio>\r\n              </el-radio-group>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"执行策略\" prop=\"misfirePolicy\">\r\n              <el-radio-group v-model=\"form.misfirePolicy\">\r\n                <el-radio-button value=\"1\">立即执行</el-radio-button>\r\n                <el-radio-button value=\"2\">执行一次</el-radio-button>\r\n                <el-radio-button value=\"3\">放弃执行</el-radio-button>\r\n              </el-radio-group>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"是否并发\" prop=\"concurrent\">\r\n              <el-radio-group v-model=\"form.concurrent\">\r\n                <el-radio-button value=\"0\">允许</el-radio-button>\r\n                <el-radio-button value=\"1\">禁止</el-radio-button>\r\n              </el-radio-group>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form>\r\n      <template #footer>\r\n        <div class=\"dialog-footer\">\r\n          <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\r\n          <el-button @click=\"cancel\">取 消</el-button>\r\n        </div>\r\n      </template>\r\n    </el-dialog>\r\n\r\n    <el-dialog title=\"Cron表达式生成器\" v-model=\"openCron\" append-to-body destroy-on-close>\r\n      <crontab ref=\"crontabRef\" @hide=\"openCron=false\" @fill=\"crontabFill\" :expression=\"expression\"></crontab>\r\n    </el-dialog>\r\n\r\n    <!-- 任务日志详细 -->\r\n    <el-dialog title=\"任务详细\" v-model=\"openView\" width=\"700px\" append-to-body>\r\n      <el-form :model=\"form\" label-width=\"120px\">\r\n        <el-row>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"任务编号：\">{{ form.jobId }}</el-form-item>\r\n            <el-form-item label=\"任务名称：\">{{ form.jobName }}</el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"任务分组：\">{{ jobGroupFormat(form) }}</el-form-item>\r\n            <el-form-item label=\"创建时间：\">{{ parseTime(form.createTime) }}</el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"cron表达式：\">{{ form.cronExpression }}</el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"下次执行时间：\">{{ parseTime(form.nextValidTime) }}</el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"任务执行器：\">{{ jobExecutorFormat(form) }}</el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"调用目标方法：\">{{ form.invokeTarget }}</el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"位置参数：\">{{ form.jobArgs }}</el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"关键字参数：\">{{ form.jobKwargs }}</el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"任务状态：\">\r\n              <div v-if=\"form.status == 0\">正常</div>\r\n              <div v-else-if=\"form.status == 1\">暂停</div>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"是否并发：\">\r\n              <div v-if=\"form.concurrent == 0\">允许</div>\r\n              <div v-else-if=\"form.concurrent == 1\">禁止</div>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"12\">\r\n            <el-form-item label=\"执行策略：\">\r\n              <div v-if=\"form.misfirePolicy == '0'\">默认策略</div>\r\n              <div v-else-if=\"form.misfirePolicy == '1'\">立即执行</div>\r\n              <div v-else-if=\"form.misfirePolicy == '2'\">执行一次</div>\r\n              <div v-else-if=\"form.misfirePolicy == '3'\">放弃执行</div>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form>\r\n      <template #footer>\r\n        <div class=\"dialog-footer\">\r\n          <el-button @click=\"openView = false\">关 闭</el-button>\r\n        </div>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script setup name=\"QtrJob\">\r\nimport {ElMessage} from \"element-plus\";\r\nimport RunConfig from \"@/components/hrm/common/run/run-config.vue\";\r\nimport {\r\n  listJob,\r\n  getJob,\r\n  delJob,\r\n  addJob,\r\n  updateJob,\r\n  runJob,\r\n  changeJobStatus,\r\n  stopJob,\r\n  listSchdulerJob\r\n} from \"@/api/qtr/job.js\";\r\nimport Crontab from '@/components/Crontab/index.vue'\r\nimport AceEditor from \"@/components/hrm/common/ace-editor.vue\";\r\nimport RunDataConfig from \"@/components/hrm/common/run/run-data-config.vue\";\r\nimport {RunTypeEnum} from \"@/components/hrm/enum.js\";\r\nimport {initRunConfig} from \"@/components/hrm/data-template.js\";\r\n\r\nconst router = useRouter();\r\nconst {proxy} = getCurrentInstance();\r\nconst {\r\n  sys_job_group,\r\n  sys_job_status,\r\n  sys_job_executor\r\n} = proxy.useDict(\"sys_job_group\", \"sys_job_status\", \"sys_job_executor\");\r\nconst {job_run_status} = proxy.useDict(\"job_run_status\");\r\n\r\nconst jobList = ref([]);\r\nconst open = ref(false);\r\nconst openAdvanced = ref(false);  // 高级配置弹窗\r\nconst loading = ref(true);\r\nconst showSearch = ref(true);\r\nconst ids = ref([]);\r\nconst single = ref(true);\r\nconst multiple = ref(true);\r\nconst total = ref(0);\r\nconst title = ref(\"\");\r\nconst openView = ref(false);\r\nconst openCron = ref(false);\r\nconst expression = ref(\"\");\r\nconst runConfigDataRef = computed(() => {\r\n  return form.value.jobKwargs ? JSON.parse(form.value.jobKwargs) : JSON.parse(JSON.stringify(initRunConfig));\r\n});\r\nconst runType = computed({\r\n  get(){\r\n  return form.value.jobKwargs && JSON.parse(form.value.jobKwargs).runType ? JSON.parse(form.value.jobKwargs).runType : RunTypeEnum.case;\r\n  },\r\n  set(newValue){\r\n    let kw = JSON.parse(form.value.jobKwargs || '{}');\r\n    kw.runType = newValue;\r\n    form.value.jobKwargs = JSON.stringify(kw);\r\n  }\r\n});\r\nconst runIds = computed({\r\n  get(){\r\n    return form.value.jobKwargs && JSON.parse(form.value.jobKwargs).ids ? JSON.parse(form.value.jobKwargs).ids : [];\r\n  },\r\n  set(newValue){\r\n    let kw = JSON.parse(form.value.jobKwargs || '{}');\r\n    kw.ids = newValue;\r\n    form.value.jobKwargs = JSON.stringify(kw);\r\n  }\r\n});\r\n\r\n/*\r\n* 验证测试数据不能为空\r\n* */\r\nconst validateTestData = (rule, value, callback) => {\r\n  if (!runIds.value || runIds.value.length <= 0 || !runType.value){\r\n    callback(new Error('请选择测试数据'));\r\n  }\r\n  callback();\r\n}\r\n\r\nconst data = reactive({\r\n  form: {\r\n    jobGroup: 'sqlalchemy',\r\n    jobExecutor: 'default',\r\n    cronExpression: '0 0 0 1 1 ?',\r\n    jobArgs: \"\",\r\n    jobKwargs: \"\",\r\n    jobId: undefined,\r\n    jobName: undefined,\r\n    invokeTarget: \"module_task.scheduler_qtr.job_run_test\",\r\n    misfirePolicy: \"1\",\r\n    concurrent: \"1\",\r\n    status: \"0\"\r\n  },\r\n  queryParams: {\r\n    pageNum: 1,\r\n    pageSize: 10,\r\n    jobName: undefined,\r\n    jobGroup: undefined,\r\n    status: undefined,\r\n    jobExecutor: undefined,\r\n    cronExpression: undefined\r\n  },\r\n  rules: {\r\n    jobName: [{required: true, message: \"任务名称不能为空\", trigger: \"blur\"}],\r\n    testData: [{required: true, message: \"测试数据不能为空\", trigger: \"blur\", validator: validateTestData}],\r\n    invokeTarget: [{required: true, message: \"调用目标字符串不能为空\", trigger: \"blur\"}],\r\n    cronExpression: [{required: true, message: \"cron执行表达式不能为空\", trigger: \"change\"}]\r\n  }\r\n});\r\n\r\nconst {form, queryParams, rules} = toRefs(data);\r\n\r\nconst runConfigRules = ref({\r\n  env: [{required: true, message: \"运行环境不能为空\", trigger: 'blur'}],\r\n});\r\n\r\n\r\n\r\n\r\n/** 查询定时任务列表 */\r\nfunction getList() {\r\n  loading.value = true;\r\n  listJob(queryParams.value).then(response => {\r\n    jobList.value = response.rows;\r\n    total.value = response.total;\r\n    loading.value = false;\r\n  });\r\n}\r\n\r\nfunction handleQueryScheduler() {\r\n  loading.value = true;\r\n  listSchdulerJob(queryParams.value).then(response => {\r\n    console.log(response);\r\n  }).finally(() => {\r\n    loading.value = false;\r\n  });\r\n}\r\n\r\n/** 任务组名字典翻译 */\r\nfunction jobGroupFormat(row, column) {\r\n  return proxy.selectDictLabel(sys_job_group.value, row.jobGroup);\r\n}\r\n\r\n/** 任务执行器名字典翻译 */\r\nfunction jobExecutorFormat(row, column) {\r\n  return proxy.selectDictLabel(sys_job_executor.value, row.jobExecutor);\r\n}\r\n\r\n/** 取消按钮 */\r\nfunction cancel() {\r\n  open.value = false;\r\n  reset();\r\n}\r\n\r\n/** 表单重置 */\r\nfunction reset() {\r\n  form.value = {\r\n    jobId: undefined,\r\n    jobName: undefined,\r\n    jobGroup: \"sqlalchemy\",\r\n    jobExecutor: \"default\",\r\n    invokeTarget: 'module_task.scheduler_qtr.job_run_test',\r\n    cronExpression: '0 0 0 1 1 ?',\r\n    misfirePolicy: \"2\",\r\n    concurrent: \"1\",\r\n    status: \"0\",\r\n    jobArgs: \"\",\r\n    jobKwargs: \"\",\r\n  };\r\n  proxy.resetForm(\"jobRef\");\r\n}\r\n\r\n/** 搜索按钮操作 */\r\nfunction handleQuery() {\r\n  queryParams.value.pageNum = 1;\r\n  getList();\r\n}\r\n\r\n/** 重置按钮操作 */\r\nfunction resetQuery() {\r\n  proxy.resetForm(\"queryRef\");\r\n  handleQuery();\r\n}\r\n\r\n// 多选框选中数据\r\nfunction handleSelectionChange(selection) {\r\n  ids.value = selection.map(item => item.jobId);\r\n  single.value = selection.length != 1;\r\n  multiple.value = !selection.length;\r\n}\r\n\r\n// 更多操作触发\r\nfunction handleCommand(command, row) {\r\n  switch (command) {\r\n    case \"handleRun\":\r\n      handleRun(row);\r\n      break;\r\n    case \"handleView\":\r\n      handleView(row);\r\n      break;\r\n    case \"handleJobLog\":\r\n      handleJobLog(row);\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n}\r\n\r\n// 任务状态修改\r\nfunction handleStatusChange(row) {\r\n  let text = row.status === \"0\" ? \"启用\" : \"停用\";\r\n  proxy.$modal.confirm('确认要\"' + text + '\"\"' + row.jobName + '\"任务吗?').then(function () {\r\n    return changeJobStatus(row.jobId, row.status);\r\n  }).then(() => {\r\n    proxy.$modal.msgSuccess(text + \"成功\");\r\n  }).catch(function () {\r\n    row.status = row.status === \"0\" ? \"1\" : \"0\";\r\n  });\r\n}\r\n\r\n/* 立即执行一次 */\r\nfunction handleRun(row) {\r\n  proxy.$modal.confirm('确认要立即执行一次\"' + row.jobName + '\"任务吗?').then(function () {\r\n    return runJob(row.jobId, row.jobGroup);\r\n  }).then(() => {\r\n    proxy.$modal.msgSuccess(\"执行成功\");\r\n  })\r\n      .catch(() => {\r\n      });\r\n}\r\n\r\n/** 任务详细信息 */\r\nfunction handleView(row) {\r\n  getJob(row.jobId).then(response => {\r\n    form.value = response.data;\r\n    openView.value = true;\r\n  });\r\n}\r\n\r\n/** cron表达式按钮操作 */\r\nfunction handleShowCron() {\r\n  expression.value = form.value.cronExpression;\r\n  openCron.value = true;\r\n}\r\n\r\n/** 确定后回传值 */\r\nfunction crontabFill(value) {\r\n  form.value.cronExpression = value;\r\n}\r\n\r\n/** 任务日志列表查询 */\r\nfunction handleJobLog(row) {\r\n  const jobId = row.jobId || 0;\r\n  router.push('/qtr/qtr-job-log/index/' + jobId)\r\n}\r\n\r\n/** 新增按钮操作 */\r\nfunction handleAdd() {\r\n  reset();\r\n  open.value = true;\r\n  title.value = \"添加任务\";\r\n}\r\n\r\n/** 修改按钮操作 */\r\nfunction handleUpdate(row) {\r\n  reset();\r\n  const jobId = row.jobId || ids.value;\r\n  getJob(jobId).then(response => {\r\n    form.value = response.data;\r\n    open.value = true;\r\n    title.value = \"修改任务\";\r\n  });\r\n}\r\n\r\n/** 提交按钮 */\r\nfunction submitForm() {\r\n  proxy.$refs[\"jobRef\"].validate(valid => {\r\n    if (valid) {\r\n      if (form.value.jobId != undefined) {\r\n        updateJob(form.value).then(response => {\r\n          proxy.$modal.msgSuccess(\"修改成功\");\r\n          open.value = false;\r\n          getList();\r\n        });\r\n      } else {\r\n        addJob(form.value).then(response => {\r\n          proxy.$modal.msgSuccess(\"新增成功\");\r\n          open.value = false;\r\n          getList();\r\n        });\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\n/*\r\n* 停止进行中的任务\r\n* */\r\nfunction stopJobHandler(row) {\r\n  stopJob({\"jobId\": row.jobId}).then(response => {\r\n    ElMessage.success(\"完成停止\");\r\n  }).catch(error => {\r\n    console.log(error);\r\n    ElMessage.error(\"停止异常\");\r\n  })\r\n}\r\n\r\n/** 删除按钮操作 */\r\nfunction handleDelete(row) {\r\n  const jobIds = row.jobId || ids.value;\r\n  proxy.$modal.confirm('是否确认删除定时任务编号为\"' + jobIds + '\"的数据项?').then(function () {\r\n    return delJob(jobIds);\r\n  }).then(() => {\r\n    getList();\r\n    proxy.$modal.msgSuccess(\"删除成功\");\r\n  }).catch(() => {\r\n  });\r\n}\r\n\r\n/** 导出按钮操作 */\r\nfunction handleExport() {\r\n  proxy.download(\"qtr/job/export\", {\r\n    ...queryParams.value,\r\n  }, `job_${new Date().getTime()}.xlsx`);\r\n}\r\n\r\nfunction updateRunConfigData(configData) {\r\n  form.value.jobKwargs = configData ? JSON.stringify(configData) : \"\"\r\n}\r\n\r\ngetList();\r\n</script>\r\n"],"names":["runType","_useModel","__props","runIds","dialogVisible","ref","caseDataDialog","dataTableRef","tipsContent","computed","dialogTitle","RunTypeEnum","changeType","dataChange","router","useRouter","proxy","getCurrentInstance","sys_job_group","sys_job_status","sys_job_executor","job_run_status","jobList","open","openAdvanced","loading","showSearch","ids","single","multiple","total","title","openView","openCron","expression","runConfigDataRef","form","initRunConfig","newValue","kw","data","reactive","rule","value","callback","queryParams","rules","toRefs","getList","listJob","response","handleQueryScheduler","listSchdulerJob","jobGroupFormat","row","column","jobExecutorFormat","cancel","reset","handleQuery","resetQuery","handleSelectionChange","selection","item","handleStatusChange","text","changeJobStatus","handleRun","runJob","handleView","getJob","handleShowCron","crontabFill","handleJobLog","jobId","handleAdd","handleUpdate","submitForm","valid","updateJob","addJob","stopJobHandler","stopJob","ElMessage","error","handleDelete","jobIds","delJob","handleExport","updateRunConfigData","configData"],"mappings":"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"}
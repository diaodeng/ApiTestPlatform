{"version":3,"mappings":"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","names":["icons","modules","__vitePreload","path","p","iconName","ref","iconList","emit","__emit","filterIcons","item","selectedIcon","name","reset","__expose","proxy","getCurrentInstance","sys_show_hide","sys_normal_disable","menuList","open","loading","showSearch","title","menuOptions","isExpandAll","refreshTable","iconSelectRef","data","reactive","queryParams","form","rules","toRefs","getList","listMenu","response","getTreeselect","menu","cancel","showSelectIcon","selected","handleQuery","resetQuery","handleAdd","row","toggleExpandAll","nextTick","handleUpdate","getMenu","submitForm","valid","updateMenu","addMenu","handleDelete","delMenu"],"ignoreList":[],"sources":["../../../src/components/IconSelect/requireIcons.js","../../../src/components/IconSelect/index.vue","../../../src/views/system/menu/index.vue"],"sourcesContent":["let icons = []\r\nconst modules = import.meta.glob('./../../assets/icons/svg/*.svg');\r\nfor (const path in modules) {\r\n  const p = path.split('assets/icons/svg/')[1].split('.svg')[0];\r\n  icons.push(p);\r\n}\r\n\r\nexport default icons","<template>\r\n  <div class=\"icon-body\">\r\n    <el-input\r\n      v-model=\"iconName\"\r\n      class=\"icon-search\"\r\n      clearable\r\n      placeholder=\"请输入图标名称\"\r\n      @clear=\"filterIcons\"\r\n      @input=\"filterIcons\"\r\n    >\r\n      <template #suffix><i class=\"el-icon-search el-input__icon\" /></template>\r\n    </el-input>\r\n    <div class=\"icon-list\">\r\n      <div class=\"list-container\">\r\n        <div v-for=\"(item, index) in iconList\" class=\"icon-item-wrapper\" :key=\"index\" @click=\"selectedIcon(item)\">\r\n          <div :class=\"['icon-item', { active: activeIcon === item }]\">\r\n            <svg-icon :icon-class=\"item\" class-name=\"icon\" style=\"height: 25px;width: 16px;\"/>\r\n            <span>{{ item }}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport icons from './requireIcons'\r\n\r\nconst props = defineProps({\r\n  activeIcon: {\r\n    type: String\r\n  }\r\n});\r\n\r\nconst iconName = ref('');\r\nconst iconList = ref(icons);\r\nconst emit = defineEmits(['selected']);\r\n\r\nfunction filterIcons() {\r\n  iconList.value = icons\r\n  if (iconName.value) {\r\n    iconList.value = icons.filter(item => item.indexOf(iconName.value) !== -1)\r\n  }\r\n}\r\n\r\nfunction selectedIcon(name) {\r\n  emit('selected', name)\r\n  document.body.click()\r\n}\r\n\r\nfunction reset() {\r\n  iconName.value = ''\r\n  iconList.value = icons\r\n}\r\n\r\ndefineExpose({\r\n  reset\r\n})\r\n</script>\r\n\r\n<style lang='scss' scoped>\r\n   .icon-body {\r\n    width: 100%;\r\n    padding: 10px;\r\n    .icon-search {\r\n      position: relative;\r\n      margin-bottom: 5px;\r\n    }\r\n    .icon-list {\r\n      height: 200px;\r\n      overflow: auto;\r\n      .list-container {\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        .icon-item-wrapper {\r\n          width: calc(100% / 3);\r\n          height: 25px;\r\n          line-height: 25px;\r\n          cursor: pointer;\r\n          display: flex;\r\n          .icon-item {\r\n            display: flex;\r\n            max-width: 100%;\r\n            height: 100%;\r\n            padding: 0 5px;\r\n            &:hover {\r\n              background: #ececec;\r\n              border-radius: 5px;\r\n            }\r\n            .icon {\r\n              flex-shrink: 0;\r\n            }\r\n            span {\r\n              display: inline-block;\r\n              vertical-align: -0.15em;\r\n              fill: currentColor;\r\n              padding-left: 2px;\r\n              overflow: hidden;\r\n              text-overflow: ellipsis;\r\n              white-space: nowrap;\r\n            }\r\n          }\r\n          .icon-item.active {\r\n            background: #ececec;\r\n            border-radius: 5px;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>","<template>\r\n   <div class=\"app-container\">\r\n      <el-form :model=\"queryParams\" ref=\"queryRef\" :inline=\"true\" v-show=\"showSearch\">\r\n         <el-form-item label=\"菜单名称\" prop=\"menuName\">\r\n            <el-input\r\n               v-model=\"queryParams.menuName\"\r\n               placeholder=\"请输入菜单名称\"\r\n               clearable\r\n               style=\"width: 200px\"\r\n               @keyup.enter=\"handleQuery\"\r\n            />\r\n         </el-form-item>\r\n         <el-form-item label=\"状态\" prop=\"status\">\r\n            <el-select v-model=\"queryParams.status\" placeholder=\"菜单状态\" clearable style=\"width: 200px\">\r\n               <el-option\r\n                  v-for=\"dict in sys_normal_disable\"\r\n                  :key=\"dict.value\"\r\n                  :label=\"dict.label\"\r\n                  :value=\"dict.value\"\r\n               />\r\n            </el-select>\r\n         </el-form-item>\r\n         <el-form-item>\r\n            <el-button type=\"primary\" icon=\"Search\" @click=\"handleQuery\">搜索</el-button>\r\n            <el-button icon=\"Refresh\" @click=\"resetQuery\">重置</el-button>\r\n         </el-form-item>\r\n      </el-form>\r\n\r\n      <el-row :gutter=\"10\" class=\"mb8\">\r\n         <el-col :span=\"1.5\">\r\n            <el-button\r\n               type=\"primary\"\r\n               plain\r\n               icon=\"Plus\"\r\n               @click=\"handleAdd\"\r\n               v-hasPermi=\"['system:menu:add']\"\r\n            >新增</el-button>\r\n         </el-col>\r\n         <el-col :span=\"1.5\">\r\n            <el-button \r\n               type=\"info\"\r\n               plain\r\n               icon=\"Sort\"\r\n               @click=\"toggleExpandAll\"\r\n            >展开/折叠</el-button>\r\n         </el-col>\r\n         <right-toolbar v-model:showSearch=\"showSearch\" @queryTable=\"getList\"></right-toolbar>\r\n      </el-row>\r\n\r\n      <el-table\r\n         v-if=\"refreshTable\"\r\n         v-loading=\"loading\"\r\n         :data=\"menuList\"\r\n         row-key=\"menuId\"\r\n         :default-expand-all=\"isExpandAll\"\r\n         :tree-props=\"{ children: 'children', hasChildren: 'hasChildren' }\"\r\n      >\r\n         <el-table-column prop=\"menuName\" label=\"菜单名称\" :show-overflow-tooltip=\"true\" width=\"160\"></el-table-column>\r\n         <el-table-column prop=\"icon\" label=\"图标\" align=\"center\" width=\"100\">\r\n            <template #default=\"scope\">\r\n               <svg-icon :icon-class=\"scope.row.icon\" />\r\n            </template>\r\n         </el-table-column>\r\n         <el-table-column prop=\"orderNum\" label=\"排序\" width=\"60\"></el-table-column>\r\n         <el-table-column prop=\"perms\" label=\"权限标识\" :show-overflow-tooltip=\"true\"></el-table-column>\r\n         <el-table-column prop=\"component\" label=\"组件路径\" :show-overflow-tooltip=\"true\"></el-table-column>\r\n         <el-table-column prop=\"status\" label=\"状态\" width=\"80\">\r\n            <template #default=\"scope\">\r\n               <dict-tag :options=\"sys_normal_disable\" :value=\"scope.row.status\" />\r\n            </template>\r\n         </el-table-column>\r\n         <el-table-column label=\"创建时间\" align=\"center\" width=\"160\" prop=\"createTime\">\r\n            <template #default=\"scope\">\r\n               <span>{{ parseTime(scope.row.createTime) }}</span>\r\n            </template>\r\n         </el-table-column>\r\n         <el-table-column label=\"操作\" align=\"center\" width=\"210\" class-name=\"small-padding fixed-width\">\r\n            <template #default=\"scope\">\r\n               <el-button link type=\"primary\" icon=\"Edit\" @click=\"handleUpdate(scope.row)\" v-hasPermi=\"['system:menu:edit']\">修改</el-button>\r\n               <el-button link type=\"primary\" icon=\"Plus\" @click=\"handleAdd(scope.row)\" v-hasPermi=\"['system:menu:add']\">新增</el-button>\r\n               <el-button link type=\"primary\" icon=\"Delete\" @click=\"handleDelete(scope.row)\" v-hasPermi=\"['system:menu:remove']\">删除</el-button>\r\n            </template>\r\n         </el-table-column>\r\n      </el-table>\r\n\r\n      <!-- 添加或修改菜单对话框 -->\r\n      <el-dialog :title=\"title\" v-model=\"open\" width=\"680px\" append-to-body>\r\n         <el-form ref=\"menuRef\" :model=\"form\" :rules=\"rules\" label-width=\"100px\">\r\n            <el-row>\r\n               <el-col :span=\"24\">\r\n                  <el-form-item label=\"上级菜单\">\r\n                     <el-tree-select\r\n                        v-model=\"form.parentId\"\r\n                        :data=\"menuOptions\"\r\n                        :props=\"{ value: 'menuId', label: 'menuName', children: 'children' }\"\r\n                        value-key=\"menuId\"\r\n                        placeholder=\"选择上级菜单\"\r\n                        check-strictly\r\n                     />\r\n                  </el-form-item>\r\n               </el-col>\r\n               <el-col :span=\"24\">\r\n                  <el-form-item label=\"菜单类型\" prop=\"menuType\">\r\n                     <el-radio-group v-model=\"form.menuType\">\r\n                        <el-radio label=\"M\">目录</el-radio>\r\n                        <el-radio label=\"C\">菜单</el-radio>\r\n                        <el-radio label=\"F\">按钮</el-radio>\r\n                     </el-radio-group>\r\n                  </el-form-item>\r\n               </el-col>\r\n               <el-col :span=\"24\" v-if=\"form.menuType != 'F'\">\r\n                  <el-form-item label=\"菜单图标\" prop=\"icon\">\r\n                     <el-popover\r\n                        placement=\"bottom-start\"\r\n                        :width=\"540\"\r\n                        trigger=\"click\"\r\n                     >\r\n                        <template #reference>\r\n                           <el-input v-model=\"form.icon\" placeholder=\"点击选择图标\" @blur=\"showSelectIcon\" readonly>\r\n                              <template #prefix>\r\n                                 <svg-icon\r\n                                    v-if=\"form.icon\"\r\n                                    :icon-class=\"form.icon\"\r\n                                    class=\"el-input__icon\"\r\n                                    style=\"height: 32px;width: 16px;\"\r\n                                 />\r\n                                 <el-icon v-else style=\"height: 32px;width: 16px;\"><search /></el-icon>\r\n                              </template>\r\n                           </el-input>\r\n                        </template>\r\n                        <icon-select ref=\"iconSelectRef\" @selected=\"selected\" :active-icon=\"form.icon\" />\r\n                     </el-popover>\r\n                  </el-form-item>\r\n               </el-col>\r\n               <el-col :span=\"12\">\r\n                  <el-form-item label=\"菜单名称\" prop=\"menuName\">\r\n                     <el-input v-model=\"form.menuName\" placeholder=\"请输入菜单名称\" />\r\n                  </el-form-item>\r\n               </el-col>\r\n               <el-col :span=\"12\">\r\n                  <el-form-item label=\"显示排序\" prop=\"orderNum\">\r\n                     <el-input-number v-model=\"form.orderNum\" controls-position=\"right\" :min=\"0\" />\r\n                  </el-form-item>\r\n               </el-col>\r\n               <el-col :span=\"12\" v-if=\"form.menuType != 'F'\">\r\n                  <el-form-item>\r\n                     <template #label>\r\n                        <span>\r\n                           <el-tooltip content=\"选择是外链则路由地址需要以`http(s)://`开头\" placement=\"top\">\r\n                              <el-icon><question-filled /></el-icon>\r\n                           </el-tooltip>是否外链\r\n                        </span>\r\n                     </template>\r\n                     <el-radio-group v-model=\"form.isFrame\">\r\n                        <el-radio :label=\"0\">是</el-radio>\r\n                        <el-radio :label=\"1\">否</el-radio>\r\n                     </el-radio-group>\r\n                  </el-form-item>\r\n               </el-col>\r\n               <el-col :span=\"12\" v-if=\"form.menuType != 'F'\">\r\n                  <el-form-item prop=\"path\">\r\n                     <template #label>\r\n                        <span>\r\n                           <el-tooltip content=\"访问的路由地址，如：`user`，如外网地址需内链访问则以`http(s)://`开头\" placement=\"top\">\r\n                              <el-icon><question-filled /></el-icon>\r\n                           </el-tooltip>\r\n                           路由地址\r\n                        </span>\r\n                     </template>\r\n                     <el-input v-model=\"form.path\" placeholder=\"请输入路由地址\" />\r\n                  </el-form-item>\r\n               </el-col>\r\n               <el-col :span=\"12\" v-if=\"form.menuType == 'C'\">\r\n                  <el-form-item prop=\"component\">\r\n                     <template #label>\r\n                        <span>\r\n                           <el-tooltip content=\"访问的组件路径，如：`system/user/index`，默认在`views`目录下\" placement=\"top\">\r\n                              <el-icon><question-filled /></el-icon>\r\n                           </el-tooltip>\r\n                           组件路径\r\n                        </span>\r\n                     </template>\r\n                     <el-input v-model=\"form.component\" placeholder=\"请输入组件路径\" />\r\n                  </el-form-item>\r\n               </el-col>\r\n               <el-col :span=\"12\" v-if=\"form.menuType != 'M'\">\r\n                  <el-form-item>\r\n                     <el-input v-model=\"form.perms\" placeholder=\"请输入权限标识\" maxlength=\"100\" />\r\n                     <template #label>\r\n                        <span>\r\n                           <el-tooltip content=\"控制器中定义的权限字符，如：@PreAuthorize(`@ss.hasPermi('system:user:list')`)\" placement=\"top\">\r\n                              <el-icon><question-filled /></el-icon>\r\n                           </el-tooltip>\r\n                           权限字符\r\n                        </span>\r\n                     </template>\r\n                  </el-form-item>\r\n               </el-col>\r\n               <el-col :span=\"12\" v-if=\"form.menuType == 'C'\">\r\n                  <el-form-item>\r\n                     <el-input v-model=\"form.query\" placeholder=\"请输入路由参数\" maxlength=\"255\" />\r\n                     <template #label>\r\n                        <span>\r\n                           <el-tooltip content='访问路由的默认传递参数，如：`{\"id\": 1, \"name\": \"ry\"}`' placement=\"top\">\r\n                              <el-icon><question-filled /></el-icon>\r\n                           </el-tooltip>\r\n                           路由参数\r\n                        </span>\r\n                     </template>\r\n                  </el-form-item>\r\n               </el-col>\r\n               <el-col :span=\"12\" v-if=\"form.menuType == 'C'\">\r\n                  <el-form-item>\r\n                     <template #label>\r\n                        <span>\r\n                           <el-tooltip content=\"选择是则会被`keep-alive`缓存，需要匹配组件的`name`和地址保持一致\" placement=\"top\">\r\n                              <el-icon><question-filled /></el-icon>\r\n                           </el-tooltip>\r\n                           是否缓存\r\n                        </span>\r\n                     </template>\r\n                     <el-radio-group v-model=\"form.isCache\">\r\n                        <el-radio :label=\"0\">缓存</el-radio>\r\n                        <el-radio :label=\"1\">不缓存</el-radio>\r\n                     </el-radio-group>\r\n                  </el-form-item>\r\n               </el-col>\r\n               <el-col :span=\"12\" v-if=\"form.menuType != 'F'\">\r\n                  <el-form-item>\r\n                     <template #label>\r\n                        <span>\r\n                           <el-tooltip content=\"选择隐藏则路由将不会出现在侧边栏，但仍然可以访问\" placement=\"top\">\r\n                              <el-icon><question-filled /></el-icon>\r\n                           </el-tooltip>\r\n                           显示状态\r\n                        </span>\r\n                     </template>\r\n                     <el-radio-group v-model=\"form.visible\">\r\n                        <el-radio\r\n                           v-for=\"dict in sys_show_hide\"\r\n                           :key=\"dict.value\"\r\n                           :label=\"dict.value\"\r\n                        >{{ dict.label }}</el-radio>\r\n                     </el-radio-group>\r\n                  </el-form-item>\r\n               </el-col>\r\n               <el-col :span=\"12\">\r\n                  <el-form-item>\r\n                     <template #label>\r\n                        <span>\r\n                           <el-tooltip content=\"选择停用则路由将不会出现在侧边栏，也不能被访问\" placement=\"top\">\r\n                              <el-icon><question-filled /></el-icon>\r\n                           </el-tooltip>\r\n                           菜单状态\r\n                        </span>\r\n                     </template>\r\n                     <el-radio-group v-model=\"form.status\">\r\n                        <el-radio\r\n                           v-for=\"dict in sys_normal_disable\"\r\n                           :key=\"dict.value\"\r\n                           :label=\"dict.value\"\r\n                        >{{ dict.label }}</el-radio>\r\n                     </el-radio-group>\r\n                  </el-form-item>\r\n               </el-col>\r\n            </el-row>\r\n         </el-form>\r\n         <template #footer>\r\n            <div class=\"dialog-footer\">\r\n               <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\r\n               <el-button @click=\"cancel\">取 消</el-button>\r\n            </div>\r\n         </template>\r\n      </el-dialog>\r\n   </div>\r\n</template>\r\n\r\n<script setup name=\"Menu\">\r\nimport { addMenu, delMenu, getMenu, listMenu, updateMenu } from \"@/api/system/menu\";\r\nimport SvgIcon from \"@/components/SvgIcon\";\r\nimport IconSelect from \"@/components/IconSelect\";\r\n\r\nconst { proxy } = getCurrentInstance();\r\nconst { sys_show_hide, sys_normal_disable } = proxy.useDict(\"sys_show_hide\", \"sys_normal_disable\");\r\n\r\nconst menuList = ref([]);\r\nconst open = ref(false);\r\nconst loading = ref(true);\r\nconst showSearch = ref(true);\r\nconst title = ref(\"\");\r\nconst menuOptions = ref([]);\r\nconst isExpandAll = ref(false);\r\nconst refreshTable = ref(true);\r\nconst iconSelectRef = ref(null);\r\n\r\nconst data = reactive({\r\n  form: {},\r\n  queryParams: {\r\n    menuName: undefined,\r\n    visible: undefined\r\n  },\r\n  rules: {\r\n    menuName: [{ required: true, message: \"菜单名称不能为空\", trigger: \"blur\" }],\r\n    orderNum: [{ required: true, message: \"菜单顺序不能为空\", trigger: \"blur\" }],\r\n    path: [{ required: true, message: \"路由地址不能为空\", trigger: \"blur\" }]\r\n  },\r\n});\r\n\r\nconst { queryParams, form, rules } = toRefs(data);\r\n\r\n/** 查询菜单列表 */\r\nfunction getList() {\r\n  loading.value = true;\r\n  listMenu(queryParams.value).then(response => {\r\n    menuList.value = proxy.handleTree(response.data, \"menuId\");\r\n    loading.value = false;\r\n  });\r\n}\r\n/** 查询菜单下拉树结构 */\r\nfunction getTreeselect() {\r\n  menuOptions.value = [];\r\n  listMenu().then(response => {\r\n    const menu = { menuId: 0, menuName: \"主类目\", children: [] };\r\n    menu.children = proxy.handleTree(response.data, \"menuId\");\r\n    menuOptions.value.push(menu);\r\n  });\r\n}\r\n/** 取消按钮 */\r\nfunction cancel() {\r\n  open.value = false;\r\n  reset();\r\n}\r\n/** 表单重置 */\r\nfunction reset() {\r\n  form.value = {\r\n    menuId: undefined,\r\n    parentId: 0,\r\n    menuName: undefined,\r\n    icon: undefined,\r\n    menuType: \"M\",\r\n    orderNum: undefined,\r\n    isFrame: 1,\r\n    isCache: 0,\r\n    visible: \"0\",\r\n    status: \"0\"\r\n  };\r\n  proxy.resetForm(\"menuRef\");\r\n}\r\n/** 展示下拉图标 */\r\nfunction showSelectIcon() {\r\n  iconSelectRef.value.reset();\r\n}\r\n/** 选择图标 */\r\nfunction selected(name) {\r\n  form.value.icon = name;\r\n}\r\n/** 搜索按钮操作 */\r\nfunction handleQuery() {\r\n  getList();\r\n}\r\n/** 重置按钮操作 */\r\nfunction resetQuery() {\r\n  proxy.resetForm(\"queryRef\");\r\n  handleQuery();\r\n}\r\n/** 新增按钮操作 */\r\nfunction handleAdd(row) {\r\n  reset();\r\n  getTreeselect();\r\n  if (row != null && row.menuId) {\r\n    form.value.parentId = row.menuId;\r\n  } else {\r\n    form.value.parentId = 0;\r\n  }\r\n  open.value = true;\r\n  title.value = \"添加菜单\";\r\n}\r\n/** 展开/折叠操作 */\r\nfunction toggleExpandAll() {\r\n  refreshTable.value = false;\r\n  isExpandAll.value = !isExpandAll.value;\r\n  nextTick(() => {\r\n    refreshTable.value = true;\r\n  });\r\n}\r\n/** 修改按钮操作 */\r\nasync function handleUpdate(row) {\r\n  reset();\r\n  await getTreeselect();\r\n  getMenu(row.menuId).then(response => {\r\n    form.value = response.data;\r\n    open.value = true;\r\n    title.value = \"修改菜单\";\r\n  });\r\n}\r\n/** 提交按钮 */\r\nfunction submitForm() {\r\n  proxy.$refs[\"menuRef\"].validate(valid => {\r\n    if (valid) {\r\n      if (form.value.menuId != undefined) {\r\n        updateMenu(form.value).then(response => {\r\n          proxy.$modal.msgSuccess(\"修改成功\");\r\n          open.value = false;\r\n          getList();\r\n        });\r\n      } else {\r\n        addMenu(form.value).then(response => {\r\n          proxy.$modal.msgSuccess(\"新增成功\");\r\n          open.value = false;\r\n          getList();\r\n        });\r\n      }\r\n    }\r\n  });\r\n}\r\n/** 删除按钮操作 */\r\nfunction handleDelete(row) {\r\n  proxy.$modal.confirm('是否确认删除名称为\"' + row.menuName + '\"的数据项?').then(function() {\r\n    return delMenu(row.menuId);\r\n  }).then(() => {\r\n    getList();\r\n    proxy.$modal.msgSuccess(\"删除成功\");\r\n  }).catch(() => {});\r\n}\r\n\r\ngetList();\r\n</script>\r\n"],"file":"static/js/index.DX66xD1I.js"}
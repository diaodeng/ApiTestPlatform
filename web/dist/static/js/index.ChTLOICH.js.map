{"version":3,"file":"index.ChTLOICH.js","sources":["../../../src/views/system/dict/index.vue"],"sourcesContent":["<template>\r\n   <div class=\"app-container\">\r\n      <el-form :model=\"queryParams\" ref=\"queryRef\" :inline=\"true\" v-show=\"showSearch\" label-width=\"68px\">\r\n         <el-form-item label=\"字典名称\" prop=\"dictName\">\r\n            <el-input\r\n               v-model=\"queryParams.dictName\"\r\n               placeholder=\"请输入字典名称\"\r\n               clearable\r\n               style=\"width: 240px\"\r\n               @keyup.enter=\"handleQuery\"\r\n            />\r\n         </el-form-item>\r\n         <el-form-item label=\"字典类型\" prop=\"dictType\">\r\n            <el-input\r\n               v-model=\"queryParams.dictType\"\r\n               placeholder=\"请输入字典类型\"\r\n               clearable\r\n               style=\"width: 240px\"\r\n               @keyup.enter=\"handleQuery\"\r\n            />\r\n         </el-form-item>\r\n         <el-form-item label=\"状态\" prop=\"status\">\r\n            <el-select\r\n               v-model=\"queryParams.status\"\r\n               placeholder=\"字典状态\"\r\n               clearable\r\n               style=\"width: 240px\"\r\n            >\r\n               <el-option\r\n                  v-for=\"dict in sys_normal_disable\"\r\n                  :key=\"dict.value\"\r\n                  :label=\"dict.label\"\r\n                  :value=\"dict.value\"\r\n               />\r\n            </el-select>\r\n         </el-form-item>\r\n         <el-form-item label=\"创建时间\" style=\"width: 308px\">\r\n            <el-date-picker\r\n               v-model=\"dateRange\"\r\n               value-format=\"YYYY-MM-DD\"\r\n               type=\"daterange\"\r\n               range-separator=\"-\"\r\n               start-placeholder=\"开始日期\"\r\n               end-placeholder=\"结束日期\"\r\n            ></el-date-picker>\r\n         </el-form-item>\r\n         <el-form-item>\r\n            <el-button type=\"primary\" icon=\"Search\" @click=\"handleQuery\">搜索</el-button>\r\n            <el-button icon=\"Refresh\" @click=\"resetQuery\">重置</el-button>\r\n         </el-form-item>\r\n      </el-form>\r\n\r\n      <el-row :gutter=\"10\" class=\"mb8\">\r\n         <el-col :span=\"1.5\">\r\n            <el-button\r\n               type=\"primary\"\r\n               plain\r\n               icon=\"Plus\"\r\n               @click=\"handleAdd\"\r\n               v-hasPermi=\"['system:dict:add']\"\r\n            >新增</el-button>\r\n         </el-col>\r\n         <el-col :span=\"1.5\">\r\n            <el-button\r\n               type=\"success\"\r\n               plain\r\n               icon=\"Edit\"\r\n               :disabled=\"single\"\r\n               @click=\"handleUpdate\"\r\n               v-hasPermi=\"['system:dict:edit']\"\r\n            >修改</el-button>\r\n         </el-col>\r\n         <el-col :span=\"1.5\">\r\n            <el-button\r\n               type=\"danger\"\r\n               plain\r\n               icon=\"Delete\"\r\n               :disabled=\"multiple\"\r\n               @click=\"handleDelete\"\r\n               v-hasPermi=\"['system:dict:remove']\"\r\n            >删除</el-button>\r\n         </el-col>\r\n         <el-col :span=\"1.5\">\r\n            <el-button\r\n               type=\"warning\"\r\n               plain\r\n               icon=\"Download\"\r\n               @click=\"handleExport\"\r\n               v-hasPermi=\"['system:dict:export']\"\r\n            >导出</el-button>\r\n         </el-col>\r\n         <el-col :span=\"1.5\">\r\n            <el-button\r\n               type=\"danger\"\r\n               plain\r\n               icon=\"Refresh\"\r\n               @click=\"handleRefreshCache\"\r\n               v-hasPermi=\"['system:dict:remove']\"\r\n            >刷新缓存</el-button>\r\n         </el-col>\r\n         <right-toolbar v-model:showSearch=\"showSearch\" @queryTable=\"getList\"></right-toolbar>\r\n      </el-row>\r\n\r\n      <el-table v-loading=\"loading\" :data=\"typeList\" @selection-change=\"handleSelectionChange\">\r\n         <el-table-column type=\"selection\" width=\"55\" align=\"center\" />\r\n         <el-table-column label=\"字典编号\" align=\"center\" prop=\"dictId\" />\r\n         <el-table-column label=\"字典名称\" align=\"center\" prop=\"dictName\" :show-overflow-tooltip=\"true\"/>\r\n         <el-table-column label=\"字典类型\" align=\"center\" :show-overflow-tooltip=\"true\">\r\n            <template #default=\"scope\">\r\n               <router-link :to=\"'/system/dict-data/index/' + scope.row.dictId\" class=\"link-type\">\r\n                  <span>{{ scope.row.dictType }}</span>\r\n               </router-link>\r\n            </template>\r\n         </el-table-column>\r\n         <el-table-column label=\"状态\" align=\"center\" prop=\"status\">\r\n            <template #default=\"scope\">\r\n               <dict-tag :options=\"sys_normal_disable\" :value=\"scope.row.status\" />\r\n            </template>\r\n         </el-table-column>\r\n         <el-table-column label=\"备注\" align=\"center\" prop=\"remark\" :show-overflow-tooltip=\"true\" />\r\n         <el-table-column label=\"创建时间\" align=\"center\" prop=\"createTime\" width=\"180\">\r\n            <template #default=\"scope\">\r\n               <span>{{ parseTime(scope.row.createTime) }}</span>\r\n            </template>\r\n         </el-table-column>\r\n         <el-table-column label=\"操作\" align=\"center\" width=\"160\" class-name=\"small-padding fixed-width\">\r\n            <template #default=\"scope\">\r\n               <el-button link type=\"primary\" icon=\"Edit\" @click=\"handleUpdate(scope.row)\" v-hasPermi=\"['system:dict:edit']\">修改</el-button>\r\n               <el-button link type=\"primary\" icon=\"Delete\" @click=\"handleDelete(scope.row)\" v-hasPermi=\"['system:dict:remove']\">删除</el-button>\r\n            </template>\r\n         </el-table-column>\r\n      </el-table>\r\n\r\n      <pagination\r\n         v-show=\"total > 0\"\r\n         :total=\"total\"\r\n         v-model:page=\"queryParams.pageNum\"\r\n         v-model:limit=\"queryParams.pageSize\"\r\n         @pagination=\"getList\"\r\n      />\r\n\r\n      <!-- 添加或修改参数配置对话框 -->\r\n      <el-dialog :title=\"title\" v-model=\"open\" width=\"500px\" append-to-body>\r\n         <el-form ref=\"dictRef\" :model=\"form\" :rules=\"rules\" label-width=\"80px\">\r\n            <el-form-item label=\"字典名称\" prop=\"dictName\">\r\n               <el-input v-model=\"form.dictName\" placeholder=\"请输入字典名称\" />\r\n            </el-form-item>\r\n            <el-form-item label=\"字典类型\" prop=\"dictType\">\r\n               <el-input v-model=\"form.dictType\" placeholder=\"请输入字典类型\" />\r\n            </el-form-item>\r\n            <el-form-item label=\"状态\" prop=\"status\">\r\n               <el-radio-group v-model=\"form.status\">\r\n                  <el-radio\r\n                     v-for=\"dict in sys_normal_disable\"\r\n                     :key=\"dict.value\"\r\n                     :label=\"dict.value\"\r\n                  >{{ dict.label }}</el-radio>\r\n               </el-radio-group>\r\n            </el-form-item>\r\n            <el-form-item label=\"备注\" prop=\"remark\">\r\n               <el-input v-model=\"form.remark\" type=\"textarea\" placeholder=\"请输入内容\"></el-input>\r\n            </el-form-item>\r\n         </el-form>\r\n         <template #footer>\r\n            <div class=\"dialog-footer\">\r\n               <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\r\n               <el-button @click=\"cancel\">取 消</el-button>\r\n            </div>\r\n         </template>\r\n      </el-dialog>\r\n   </div>\r\n</template>\r\n\r\n<script setup name=\"Dict\">\r\nimport useDictStore from '@/store/modules/dict'\r\nimport { listType, getType, delType, addType, updateType, refreshCache } from \"@/api/system/dict/type\";\r\n\r\nconst { proxy } = getCurrentInstance();\r\nconst { sys_normal_disable } = proxy.useDict(\"sys_normal_disable\");\r\n\r\nconst typeList = ref([]);\r\nconst open = ref(false);\r\nconst loading = ref(true);\r\nconst showSearch = ref(true);\r\nconst ids = ref([]);\r\nconst single = ref(true);\r\nconst multiple = ref(true);\r\nconst total = ref(0);\r\nconst title = ref(\"\");\r\nconst dateRange = ref([]);\r\n\r\nconst data = reactive({\r\n  form: {},\r\n  queryParams: {\r\n    pageNum: 1,\r\n    pageSize: 10,\r\n    dictName: undefined,\r\n    dictType: undefined,\r\n    status: undefined\r\n  },\r\n  rules: {\r\n    dictName: [{ required: true, message: \"字典名称不能为空\", trigger: \"blur\" }],\r\n    dictType: [{ required: true, message: \"字典类型不能为空\", trigger: \"blur\" }]\r\n  },\r\n});\r\n\r\nconst { queryParams, form, rules } = toRefs(data);\r\n\r\n/** 查询字典类型列表 */\r\nfunction getList() {\r\n  loading.value = true;\r\n  listType(proxy.addDateRange(queryParams.value, dateRange.value)).then(response => {\r\n    typeList.value = response.rows;\r\n    total.value = response.total;\r\n    loading.value = false;\r\n  });\r\n}\r\n/** 取消按钮 */\r\nfunction cancel() {\r\n  open.value = false;\r\n  reset();\r\n}\r\n/** 表单重置 */\r\nfunction reset() {\r\n  form.value = {\r\n    dictId: undefined,\r\n    dictName: undefined,\r\n    dictType: undefined,\r\n    status: \"0\",\r\n    remark: undefined\r\n  };\r\n  proxy.resetForm(\"dictRef\");\r\n}\r\n/** 搜索按钮操作 */\r\nfunction handleQuery() {\r\n  queryParams.value.pageNum = 1;\r\n  getList();\r\n}\r\n/** 重置按钮操作 */\r\nfunction resetQuery() {\r\n  dateRange.value = [];\r\n  proxy.resetForm(\"queryRef\");\r\n  handleQuery();\r\n}\r\n/** 新增按钮操作 */\r\nfunction handleAdd() {\r\n  reset();\r\n  open.value = true;\r\n  title.value = \"添加字典类型\";\r\n}\r\n/** 多选框选中数据 */\r\nfunction handleSelectionChange(selection) {\r\n  ids.value = selection.map(item => item.dictId);\r\n  single.value = selection.length != 1;\r\n  multiple.value = !selection.length;\r\n}\r\n/** 修改按钮操作 */\r\nfunction handleUpdate(row) {\r\n  reset();\r\n  const dictId = row.dictId || ids.value;\r\n  getType(dictId).then(response => {\r\n    form.value = response.data;\r\n    open.value = true;\r\n    title.value = \"修改字典类型\";\r\n  });\r\n}\r\n/** 提交按钮 */\r\nfunction submitForm() {\r\n  proxy.$refs[\"dictRef\"].validate(valid => {\r\n    if (valid) {\r\n      if (form.value.dictId != undefined) {\r\n        updateType(form.value).then(response => {\r\n          proxy.$modal.msgSuccess(\"修改成功\");\r\n          open.value = false;\r\n          getList();\r\n        });\r\n      } else {\r\n        addType(form.value).then(response => {\r\n          proxy.$modal.msgSuccess(\"新增成功\");\r\n          open.value = false;\r\n          getList();\r\n        });\r\n      }\r\n    }\r\n  });\r\n}\r\n/** 删除按钮操作 */\r\nfunction handleDelete(row) {\r\n  const dictIds = row.dictId || ids.value;\r\n  proxy.$modal.confirm('是否确认删除字典编号为\"' + dictIds + '\"的数据项？').then(function() {\r\n    return delType(dictIds);\r\n  }).then(() => {\r\n    getList();\r\n    proxy.$modal.msgSuccess(\"删除成功\");\r\n  }).catch(() => {});\r\n}\r\n/** 导出按钮操作 */\r\nfunction handleExport() {\r\n  proxy.download(\"system/dict/type/export\", {\r\n    ...queryParams.value\r\n  }, `dict_${new Date().getTime()}.xlsx`);\r\n}\r\n/** 刷新缓存按钮操作 */\r\nfunction handleRefreshCache() {\r\n  refreshCache().then(() => {\r\n    proxy.$modal.msgSuccess(\"刷新成功\");\r\n    useDictStore().cleanDict();\r\n  });\r\n}\r\n\r\ngetList();\r\n</script>\r\n"],"names":["proxy","getCurrentInstance","sys_normal_disable","typeList","ref","open","loading","showSearch","ids","single","multiple","total","title","dateRange","data","reactive","queryParams","form","rules","toRefs","getList","listType","response","cancel","reset","handleQuery","resetQuery","handleAdd","handleSelectionChange","selection","item","handleUpdate","row","dictId","getType","submitForm","valid","updateType","addType","handleDelete","dictIds","delType","handleExport","handleRefreshCache","refreshCache","useDictStore"],"mappings":"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"}
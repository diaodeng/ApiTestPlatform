import{av as w,A as g,r as o,d as T,H as k,o as N,m as B,f as u,i as M,e as d,p as y,h as f,I as x,aX as D,au as b}from"./index.N0ypA0wQ.js";import{_ as R}from"./run-config.CZpgWmf3.js";import{t as A}from"./run_detail.BRg85oWr.js";const E={class:"dialog-footer"},S={__name:"run_dialog",props:w({runType:Number,showDialog:{type:Boolean,default:!1}},{dialogVisible:{},dialogVisibleModifiers:{},runIds:{},runIdsModifiers:{}}),emits:["update:dialogVisible","update:runIds"],setup(r){const a=g(r,"dialogVisible"),c=g(r,"runIds");o([]),o([]);const v=r,i=o(!1),n=o(!0),t=o(!1),l=o({ids:c,runType:v.runType,env:null,reportName:null,isAsync:!1,repeatNum:1,concurrent:1,push:!1,forwardConfig:{forward:!1,agentId:void 0,forwardRuleIds:void 0},runBySort:!1});function C(s){try{if(t.value=!0,n.value=!1,l.value.ids=c,l.value.runType=v.runType,l.value.ids.length===0){b.error({message:"请选择要执行的数据",type:"error"}),n.value=!0,t.value=!1;return}i.value=!0,A(l.value).then(e=>{b.success({message:e.msg,type:"success"}),a.value=!1}).finally(()=>{i.value=!1,n.value=!0,t.value=!1})}catch(e){console.log(e)}finally{}}function p(){n.value=!0,a.value=!1}function V(s){n?(s(),a.value=!1):(s(!1),a.value=!0)}function _(s){l.value={...l.value,...s}}return(s,e)=>{const m=T("el-button"),h=k("loading");return N(),B(f(D),{modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=I=>a.value=I),title:"测试确认",width:"500","append-to-body":"",onClose:p,"before-close":V,"close-on-click-modal":!1,"close-on-press-escape":!1},{footer:u(()=>[M("div",E,[d(m,{onClick:p},{default:u(()=>e[1]||(e[1]=[y("取消")])),_:1}),d(m,{disabled:f(t),type:"primary",onClick:C},{default:u(()=>e[2]||(e[2]=[y(" 执行 ")])),_:1},8,["disabled"])])]),default:u(()=>[x(d(R,{onUpdate:_},null,512),[[h,f(i),void 0,{fullscreen:!0,lock:!0}]])]),_:1},8,["modelValue"])}}};export{S as _};
//# sourceMappingURL=run_dialog.DpBuEVxn.js.map

import{X as y,r,J as de,N as se,d as o,H as B,o as p,c as j,I as k,M as $,h as a,e as l,f as n,O as z,P as A,m as h,p as g,i as N,y as v,n as ie,K as pe,F as me,s as ce}from"./index.DgyczuKs.js";import{A as fe}from"./ace-editor.BsmS0mEK.js";import{l as ge}from"./project.Ta7DfENy.js";import{b as be}from"./data-template.CBoE4CJQ.js";import"./tools.DGA99u3Z.js";import"./ResizeObserver.es.B1PUzC5B.js";import"./enum.Cve1eJHF.js";function _e(s){return y({url:"/hrm/debugtalk/list",method:"get",params:s})}function ke(s){return y({url:"/hrm/debugtalk/"+s,method:"get"})}function he(s){return y({url:"/hrm/debugtalk",method:"post",data:s})}function ve(s){return y({url:"/hrm/debugtalk",method:"put",data:s})}const ye={class:"app-container"},we=me({name:"debugtalk"}),Ce=Object.assign(we,{setup(s){const{proxy:f}=ce(),{qtr_data_status:T}=f.useDict("qtr_data_status"),D=r([]),w=r(0),S=r([]);r([]);const m=r(!1),x=r(!0),E=r(!0),V=r(""),J=r(!0),L=r(!0);r(),r();const Q=de({queryParams:{debugtalkId:void 0,projectId:void 0,status:void 0,pageSize:10,pageNum:1},rules:{orderNum:[{required:!0,message:"显示排序不能为空",trigger:"blur"}]}}),i=r({debugtalk:JSON.parse(JSON.stringify(be))}),{queryParams:d,rules:G}=se(Q);function C(u){return u||"全局"}function b(){x.value=!0,_e(d.value).then(u=>{D.value=u.rows,w.value=u.total,x.value=!1})}function H(){m.value=!1,P()}function P(){i.value={debugtalkId:void 0,orderNum:0,debugtalk:void 0,status:"0"},f.resetForm("debugtalkRef")}function R(){b()}function K(){f.resetForm("queryRef"),R()}function M(u){P(),ke(u.debugtalkId).then(t=>{if(!t.data||Object.keys(t.data).length===0){alert("未查到对应数据！");return}i.value=t.data,m.value=!0,V.value="编辑DebugTalk"})}function X(){f.$refs.debugtalkRef.validate(u=>{u&&(i.value.debugtalkId!=null?ve(i.value).then(t=>{f.$modal.msgSuccess("修改成功"),m.value=!1,b()}):he(i.value).then(t=>{f.$modal.msgSuccess("新增成功"),m.value=!1,b()}))})}function W(){ge({isPage:!1}).then(u=>{S.value=u.data})}return W(),b(),(u,t)=>{const q=o("el-option"),O=o("el-select"),I=o("el-form-item"),_=o("el-button"),U=o("el-form"),c=o("el-table-column"),Y=o("el-text"),Z=o("dict-tag"),ee=o("el-table"),te=o("pagination"),le=o("el-button-group"),ae=o("el-header"),ne=o("el-main"),oe=o("el-container"),ue=o("el-dialog"),F=B("hasPermi"),re=B("loading");return p(),j("div",ye,[k(l(U,{model:a(d),ref:"queryRef",inline:!0},{default:n(()=>[l(I,{label:"所属项目",prop:"projectId"},{default:n(()=>[l(O,{modelValue:a(d).projectId,"onUpdate:modelValue":t[0]||(t[0]=e=>a(d).projectId=e),placeholder:"请选择",clearable:"",style:{width:"150px"}},{default:n(()=>[(p(!0),j(z,null,A(a(S),e=>(p(),h(q,{key:e.projectId,label:e.projectName,value:e.projectId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(I,{label:"状态",prop:"status"},{default:n(()=>[l(O,{modelValue:a(d).status,"onUpdate:modelValue":t[1]||(t[1]=e=>a(d).status=e),placeholder:"状态",clearable:"",style:{width:"100px"}},{default:n(()=>[(p(!0),j(z,null,A(a(T),e=>(p(),h(q,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(I,null,{default:n(()=>[l(_,{type:"primary",icon:"Search",onClick:R},{default:n(()=>t[6]||(t[6]=[g("搜索")])),_:1}),l(_,{type:"default",icon:"Refresh",onClick:K},{default:n(()=>t[7]||(t[7]=[g("重置")])),_:1})]),_:1})]),_:1},8,["model"]),[[$,a(E)]]),a(L)?k((p(),h(ee,{key:0,border:"",data:a(D),"row-key":"debugtalkId","default-expand-all":a(J),"max-height":"calc(100vh - 240px)"},{default:n(()=>[l(c,{prop:"debugtalkId",label:"ID",width:"150"}),l(c,{label:"项目ID",width:"150",prop:"projectId",align:"center"},{default:n(e=>[N("span",null,v(C(e.row.projectId)),1)]),_:1}),l(c,{label:"所属项目","min-width":"260",prop:"projectName",align:"left"},{default:n(e=>[l(Y,null,{default:n(()=>[g(v(C(e.row.projectName)),1)]),_:2},1024)]),_:1}),l(c,{align:"left",label:"DebugTalk","min-width":"115"},{default:n(e=>[k((p(),h(_,{link:"",type:"primary",onClick:xe=>M(e.row)},{default:n(()=>t[8]||(t[8]=[g("debugtalk.py ")])),_:2},1032,["onClick"])),[[F,["hrm:debugtalk:edit","hrm:debugtalk:detail"]]])]),_:1}),l(c,{prop:"status",label:"状态",align:"center",width:"70"},{default:n(e=>[l(Z,{options:a(T),value:e.row.status},null,8,["options","value"])]),_:1}),l(c,{label:"创建时间",align:"center",prop:"createTime","class-name":"small-padding fixed-width",width:"150"},{default:n(e=>[N("span",null,v(u.parseTime(e.row.createTime)),1)]),_:1}),l(c,{label:"更新时间",align:"center",prop:"updateTime","class-name":"small-padding fixed-width",width:"150"},{default:n(e=>[N("span",null,v(u.parseTime(e.row.updateTime)),1)]),_:1})]),_:1},8,["data","default-expand-all"])),[[re,a(x)]]):ie("",!0),k(l(te,{total:a(w),page:a(d).pageNum,"onUpdate:page":t[2]||(t[2]=e=>a(d).pageNum=e),limit:a(d).pageSize,"onUpdate:limit":t[3]||(t[3]=e=>a(d).pageSize=e),onPagination:b},null,8,["total","page","limit"]),[[$,a(w)>0]]),l(ue,{fullscreen:"",title:a(V),modelValue:a(m),"onUpdate:modelValue":t[5]||(t[5]=e=>pe(m)?m.value=e:null),"append-to-body":""},{default:n(()=>[l(U,{ref:"debugtalkRef",model:a(i),rules:a(G),"label-width":"100px",style:{height:"100%"}},{default:n(()=>[l(oe,{style:{height:"100%"}},{default:n(()=>[l(ae,{height:"20px",border:"2px",style:{"border-bottom-color":"#97a8be","text-align":"right"}},{default:n(()=>[l(le,null,{default:n(()=>[k((p(),h(_,{type:"primary",icon:"Save",onClick:X},{default:n(()=>t[9]||(t[9]=[g("保存 ")])),_:1})),[[F,["hrm:debugtalk:edit"]]]),l(_,{type:"primary",icon:"Cancel",onClick:H},{default:n(()=>t[10]||(t[10]=[g("取消")])),_:1})]),_:1})]),_:1}),l(ne,{style:{"max-height":"calc(100vh - 95px)"}},{default:n(()=>[l(fe,{content:a(i).debugtalk,"onUpdate:content":t[4]||(t[4]=e=>a(i).debugtalk=e),"can-set":!0,lang:"python",themes:"monokai"},null,8,["content"])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{Ce as default};

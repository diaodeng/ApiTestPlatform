{"version":3,"file":"userInfo.BBTJWDy8.js","sources":["../../../src/views/system/user/profile/userInfo.vue"],"sourcesContent":["<template>\r\n   <el-form ref=\"userRef\" :model=\"form\" :rules=\"rules\" label-width=\"80px\">\r\n      <el-form-item label=\"用户昵称\" prop=\"nickName\">\r\n         <el-input v-model=\"form.nickName\" maxlength=\"30\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"手机号码\" prop=\"phonenumber\">\r\n         <el-input v-model=\"form.phonenumber\" maxlength=\"11\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"邮箱\" prop=\"email\">\r\n         <el-input v-model=\"form.email\" maxlength=\"50\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"性别\">\r\n         <el-radio-group v-model=\"form.sex\">\r\n            <el-radio label=\"0\">男</el-radio>\r\n            <el-radio label=\"1\">女</el-radio>\r\n         </el-radio-group>\r\n      </el-form-item>\r\n      <el-form-item>\r\n      <el-button type=\"primary\" @click=\"submit\">保存</el-button>\r\n      <el-button type=\"danger\" @click=\"close\">关闭</el-button>\r\n      </el-form-item>\r\n   </el-form>\r\n</template>\r\n\r\n<script setup>\r\nimport { updateUserProfile } from \"@/api/system/user\";\r\n\r\nconst props = defineProps({\r\n  user: {\r\n    type: Object\r\n  }\r\n});\r\n\r\nconst { proxy } = getCurrentInstance();\r\n\r\nconst form = ref({});\r\nconst rules = ref({\r\n  nickName: [{ required: true, message: \"用户昵称不能为空\", trigger: \"blur\" }],\r\n  email: [{ required: true, message: \"邮箱地址不能为空\", trigger: \"blur\" }, { type: \"email\", message: \"请输入正确的邮箱地址\", trigger: [\"blur\", \"change\"] }],\r\n  phonenumber: [{ required: true, message: \"手机号码不能为空\", trigger: \"blur\" }, { pattern: /^1[3|4|5|6|7|8|9][0-9]\\d{8}$/, message: \"请输入正确的手机号码\", trigger: \"blur\" }],\r\n});\r\n\r\n/** 提交按钮 */\r\nfunction submit() {\r\n  proxy.$refs.userRef.validate(valid => {\r\n    if (valid) {\r\n      updateUserProfile(form.value).then(response => {\r\n        proxy.$modal.msgSuccess(\"修改成功\");\r\n        props.user.phonenumber = form.value.phonenumber;\r\n        props.user.email = form.value.email;\r\n      });\r\n    }\r\n  });\r\n};\r\n\r\n/** 关闭按钮 */\r\nfunction close() {\r\n  proxy.$tab.closePage();\r\n};\r\n\r\n// 回显当前登录用户信息\r\nwatch(() => props.user, user => {\r\n  if (user) {\r\n    form.value = { nickName: user.nickName, phonenumber: user.phonenumber, email: user.email, sex: user.sex };\r\n  }\r\n},{ immediate: true });\r\n</script>\r\n"],"names":["props","__props","proxy","getCurrentInstance","form","ref","rules","submit","valid","updateUserProfile","response","close","watch","user"],"mappings":"6MA2BA,MAAMA,EAAQC,EAMR,CAAE,MAAAC,CAAK,EAAKC,IAEZC,EAAOC,EAAI,CAAA,CAAE,EACbC,EAAQD,EAAI,CAChB,SAAU,CAAC,CAAE,SAAU,GAAM,QAAS,WAAY,QAAS,OAAQ,EACnE,MAAO,CAAC,CAAE,SAAU,GAAM,QAAS,WAAY,QAAS,MAAQ,EAAE,CAAE,KAAM,QAAS,QAAS,aAAc,QAAS,CAAC,OAAQ,QAAQ,EAAG,EACvI,YAAa,CAAC,CAAE,SAAU,GAAM,QAAS,WAAY,QAAS,MAAQ,EAAE,CAAE,QAAS,+BAAgC,QAAS,aAAc,QAAS,OAAQ,CAC7J,CAAC,EAGD,SAASE,GAAS,CAChBL,EAAM,MAAM,QAAQ,SAASM,GAAS,CAChCA,GACFC,EAAkBL,EAAK,KAAK,EAAE,KAAKM,GAAY,CAC7CR,EAAM,OAAO,WAAW,MAAM,EAC9BF,EAAM,KAAK,YAAcI,EAAK,MAAM,YACpCJ,EAAM,KAAK,MAAQI,EAAK,MAAM,KACtC,CAAO,CAEP,CAAG,CACH,CAGA,SAASO,GAAQ,CACfT,EAAM,KAAK,WACb,CAGA,OAAAU,EAAM,IAAMZ,EAAM,KAAMa,GAAQ,CAC1BA,IACFT,EAAK,MAAQ,CAAE,SAAUS,EAAK,SAAU,YAAaA,EAAK,YAAa,MAAOA,EAAK,MAAO,IAAKA,EAAK,KAExG,EAAE,CAAE,UAAW,EAAI,CAAE"}
import{F as ye,d as he,r as f,J as ke,N as we,e as o,H as Q,c as U,o as i,I as b,f as e,k as Ve,M as j,l as a,i as n,m as Ne,O as P,P as q,j as h,n as _,K as A,h as D,y as z,au as G,a7 as xe}from"./index.DLM0P_FN.js";import{l as Ce,g as Ue,c as De,d as Ee,u as Se,a as Ie}from"./env.DaAQ5naB.js";import{_ as $e}from"./table-variables.B-u5fhkB.js";import{_ as Re}from"./edit-label-text.BOMgfxCg.js";import"./tools.De_J0dJF.js";import"./enum.BYy-eByp.js";const Te={class:"app-container"},Pe={style:{"padding-bottom":"10px"}},qe={class:"dialog-footer"},ze=ye({name:"Env"}),Ge=Object.assign(ze,{setup(Fe){const{proxy:p}=he(),{sys_normal_disable:E}=p.useDict("sys_normal_disable"),{hrm_data_type:M}=p.useDict("hrm_data_type");xe("hrm_data_type",M);const F=f([]),c=f(!1),S=f(!0),V=f(!0),I=f(""),O=f(!0),H=f(!0),$=f(0),J=ke({queryParams:{pageNum:1,pageSize:10,envName:void 0,status:void 0},rules:{envName:[{required:!0,message:"环境名称不能为空",trigger:"blur"}],orderNum:[{required:!0,message:"显示排序不能为空",trigger:"blur"}],envUrl:[{required:!0,message:"环境地址不能为空",trigger:"blur"}]}}),{queryParams:s,rules:W}=we(J),u=f({envConfig:{variables:[{key:"default",value:[]}]},envName:"",envUrl:"",orderNum:0,simpleDesc:""});function X(){u.value.envConfig.variables.push({key:"default",desc:"",value:[]})}function Y(d){u.value.envConfig.variables.splice(d,1)}function y(){S.value=!0,Ce(s.value).then(d=>{F.value=d.rows,$.value=d.total,S.value=!1})}function Z(){c.value=!1,R()}function R(){u.value={envId:void 0,envName:void 0,orderNum:0,envUrl:void 0,simpleDesc:void 0,status:"0",envConfig:{variables:[{value:[],key:"default"}]}},p.resetForm("envRef")}function T(){y()}function ee(){p.resetForm("queryRef"),T()}function le(d){R(),c.value=!0,I.value="添加环境"}function te(d){R(),Ue(d.envId).then(l=>{u.value=l.data,c.value=!0,I.value=l.data.envId+"  >>  "+l.data.envName})}function ne(){p.$refs.envRef.validate(d=>{d&&(u.value.envId!=null?Se(u.value).then(l=>{p.$modal.msgSuccess("修改成功"),c.value=!1,y()}):Ie(u.value).then(l=>{p.$modal.msgSuccess("新增成功"),c.value=!1,y()}))})}function ae(d){p.$modal.confirm('是否确认删除名称为"'+d.envName+'"的数据项?').then(function(){return Ee(d.envId)}).then(()=>{y(),p.$modal.msgSuccess("删除成功")}).catch(()=>{})}function oe(d){De({envId:d.envId}).then(()=>{G.success("复制成功")}).catch(l=>{G.error("复制异常")})}return y(),(d,l)=>{const N=o("el-input"),m=o("el-form-item"),ue=o("el-option"),de=o("el-select"),se=o("el-checkbox"),r=o("el-button"),L=o("el-form"),v=o("el-col"),re=o("right-toolbar"),x=o("el-row"),g=o("el-table-column"),ie=o("dict-tag"),pe=o("el-table"),me=o("pagination"),fe=o("el-input-number"),_e=o("el-radio"),ce=o("el-radio-group"),B=o("el-text"),K=o("el-tooltip"),ve=o("el-affix"),ge=o("el-dialog"),k=Q("hasPermi"),be=Q("loading");return i(),U("div",Te,[b(e(L,{model:a(s),ref:"queryRef",inline:!0},{default:n(()=>[e(m,{label:"环境名称",prop:"envName"},{default:n(()=>[e(N,{modelValue:a(s).envName,"onUpdate:modelValue":l[0]||(l[0]=t=>a(s).envName=t),placeholder:"请输入环境名称",clearable:"",style:{width:"200px"},onKeyup:Ne(T,["enter"])},null,8,["modelValue"])]),_:1}),e(m,{label:"状态",prop:"status"},{default:n(()=>[e(de,{modelValue:a(s).status,"onUpdate:modelValue":l[1]||(l[1]=t=>a(s).status=t),placeholder:"环境状态",clearable:"",style:{width:"200px"}},{default:n(()=>[(i(!0),U(P,null,q(a(E),t=>(i(),h(ue,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(m,null,{default:n(()=>[e(se,null,{default:n(()=>l[11]||(l[11]=[_("仅自己的数据")])),_:1,__:[11]})]),_:1}),e(m,null,{default:n(()=>[e(r,{type:"primary",icon:"Search",onClick:T},{default:n(()=>l[12]||(l[12]=[_("搜索")])),_:1,__:[12]}),e(r,{icon:"Refresh",onClick:ee},{default:n(()=>l[13]||(l[13]=[_("重置")])),_:1,__:[13]})]),_:1})]),_:1},8,["model"]),[[j,a(V)]]),e(x,{gutter:10,class:"mb8"},{default:n(()=>[e(v,{span:1.5},{default:n(()=>[b((i(),h(r,{type:"primary",plain:"",icon:"Plus",onClick:le},{default:n(()=>l[14]||(l[14]=[_("新增 ")])),_:1,__:[14]})),[[k,["hrm:env:add"]]])]),_:1}),e(re,{showSearch:a(V),"onUpdate:showSearch":l[2]||(l[2]=t=>A(V)?V.value=t:null),onQueryTable:y},null,8,["showSearch"])]),_:1}),a(H)?b((i(),h(pe,{key:0,border:"",data:a(F),"row-key":"envId","default-expand-all":a(O),"table-layout":"fixed","max-height":"calc(100vh - 280px)"},{default:n(()=>[e(g,{prop:"envId",label:"ID",width:"160"}),e(g,{prop:"envName",label:"环境名称"}),e(g,{prop:"envUrl",label:"环境URL"}),e(g,{prop:"orderNum",label:"排序",width:"70"}),e(g,{prop:"status",label:"状态",width:"70"},{default:n(t=>[e(ie,{options:a(E),value:t.row.status},null,8,["options","value"])]),_:1}),e(g,{label:"创建时间",align:"center",prop:"createTime","class-name":"small-padding fixed-width",width:"150"},{default:n(t=>[D("span",null,z(d.parseTime(t.row.createTime)),1)]),_:1}),e(g,{label:"更新时间",align:"center",prop:"updateTime","class-name":"small-padding fixed-width",width:"150"},{default:n(t=>[D("span",null,z(d.parseTime(t.row.updateTime)),1)]),_:1}),e(g,{label:"操作",align:"center","class-name":"small-padding fixed-width",width:"110px",fixed:"right"},{default:n(t=>[b(e(r,{link:"",type:"primary",icon:"Edit",onClick:w=>te(t.row)},null,8,["onClick"]),[[k,["hrm:env:edit","hrm:env:detail"]]]),b(e(r,{link:"",type:"warning",icon:"CopyDocument",onClick:w=>oe(t.row)},null,8,["onClick"]),[[k,["hrm:env:copy"]]]),b(e(r,{link:"",type:"danger",icon:"Delete",onClick:w=>ae(t.row)},null,8,["onClick"]),[[k,["hrm:env:remove"]]])]),_:1})]),_:1},8,["data","default-expand-all"])),[[be,a(S)]]):Ve("",!0),b(e(me,{total:a($),page:a(s).pageNum,"onUpdate:page":l[3]||(l[3]=t=>a(s).pageNum=t),limit:a(s).pageSize,"onUpdate:limit":l[4]||(l[4]=t=>a(s).pageSize=t),onPagination:y},null,8,["total","page","limit"]),[[j,a($)>0]]),e(ge,{title:a(I),modelValue:a(c),"onUpdate:modelValue":l[10]||(l[10]=t=>A(c)?c.value=t:null),width:"70%","append-to-body":""},{footer:n(()=>[e(ve,{position:"bottom",offset:20},{default:n(()=>[D("div",qe,[b((i(),h(r,{type:"primary",onClick:ne},{default:n(()=>l[17]||(l[17]=[_("确 定")])),_:1,__:[17]})),[[k,["hrm:env:edit"]]]),e(r,{onClick:Z},{default:n(()=>l[18]||(l[18]=[_("取 消")])),_:1,__:[18]})])]),_:1})]),default:n(()=>[e(L,{ref:"envRef",model:a(u),rules:a(W),"label-width":"80px"},{default:n(()=>[e(x,null,{default:n(()=>[e(v,{span:12},{default:n(()=>[e(m,{label:"环境名称",prop:"envName"},{default:n(()=>[e(N,{modelValue:a(u).envName,"onUpdate:modelValue":l[5]||(l[5]=t=>a(u).envName=t),placeholder:"请输入环境名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(v,{span:12},{default:n(()=>[e(m,{label:"显示排序",prop:"orderNum"},{default:n(()=>[e(fe,{modelValue:a(u).orderNum,"onUpdate:modelValue":l[6]||(l[6]=t=>a(u).orderNum=t),"controls-position":"right",min:0},null,8,["modelValue"])]),_:1})]),_:1}),e(v,{span:12},{default:n(()=>[e(m,{label:"环境地址",prop:"envUrl"},{default:n(()=>[e(N,{modelValue:a(u).envUrl,"onUpdate:modelValue":l[7]||(l[7]=t=>a(u).envUrl=t),placeholder:"请输入URL地址",maxlength:"200"},null,8,["modelValue"])]),_:1})]),_:1}),e(v,{span:12},{default:n(()=>[e(m,{label:"环境描述",prop:"simpleDesc"},{default:n(()=>[e(N,{modelValue:a(u).simpleDesc,"onUpdate:modelValue":l[8]||(l[8]=t=>a(u).simpleDesc=t),placeholder:"请输入描述",maxlength:"400"},null,8,["modelValue"])]),_:1})]),_:1}),e(v,{span:12},{default:n(()=>[e(m,{label:"环境状态"},{default:n(()=>[e(ce,{modelValue:a(u).status,"onUpdate:modelValue":l[9]||(l[9]=t=>a(u).status=t)},{default:n(()=>[(i(!0),U(P,null,q(a(E),t=>(i(),h(_e,{key:t.value,value:t.value},{default:n(()=>[_(z(t.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(x,{style:{"padding-bottom":"20px"}},{default:n(()=>[e(v,null,{default:n(()=>[e(B,null,{default:n(()=>l[15]||(l[15]=[_("添加环境分组：")])),_:1,__:[15]}),e(K,{content:"添加环境变量分组",placement:"top-start"},{default:n(()=>[e(r,{size:"small",type:"success",icon:"Plus",onClick:X})]),_:1})]),_:1})]),_:1}),e(x,null,{default:n(()=>[(i(!0),U(P,null,q(a(u).envConfig.variables,(t,w)=>(i(),h(v,{key:w,style:{"padding-bottom":"20px"}},{default:n(()=>[D("div",Pe,[e(B,null,{default:n(()=>l[16]||(l[16]=[_("分组名称：")])),_:1,__:[16]}),e(Re,{content:t.key,"onUpdate:content":C=>t.key=C},null,8,["content","onUpdate:content"]),e(K,{content:"删除环境变量分组",placement:"top-start"},{default:n(()=>[e(r,{size:"small",type:"danger",icon:"Delete",onClick:C=>Y(w)},null,8,["onClick"])]),_:2},1024)]),e($e,{modelValue:t.value,"onUpdate:modelValue":C=>t.value=C},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024))),128))]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{Ge as default};
//# sourceMappingURL=index.DzMMzNio.js.map

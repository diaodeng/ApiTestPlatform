import{a as Se,l as qe,g as Pe,u as $e,c as Me,_ as Re,b as Ve,d as Oe,e as Qe,f as Le}from"./suite-table-query.rRUnmKkE.js";import{H as Ce,R as Ee,S as ze}from"./enum.Cve1eJHF.js";import{_ as Fe}from"./run_dialog.DpBuEVxn.js";import{r as n,A as ne,J as ve,N as be,d as o,H as ue,o as p,c as G,I as Q,M as de,h as t,e,f as l,l as pe,O as le,P as ae,m as k,p as C,K as oe,i as X,y as ee,n as je,F as ye,s as ge,E as Ie,av as ke,v as xe,a6 as De,a5 as Ke,_ as Be,au as Ne}from"./index.N0ypA0wQ.js";import{l as he}from"./project.DdvPERQ7.js";import{s as Te,l as Ae,g as He,d as Ge}from"./module.BtM26r-p.js";import{a as Je}from"./data-template.pUAxcsDo.js";import{l as We}from"./case.8QPGVk5D.js";import"./run-config.CZpgWmf3.js";import"./env-selector.Ck8UcPDe.js";import"./env.CsFNKyYM.js";import"./forward.BcwXDGVj.js";import"./agent.CW2QP-1A.js";import"./run_detail.BRg85oWr.js";import"./tools.fhJnEm5t.js";const Xe={class:"app-container"},Ye=ye({name:"project"}),Ze=Object.assign(Ye,{props:{suiteId:{},suiteIdModifiers:{}},emits:["update:suiteId"],setup(H,{expose:L}){const{proxy:h}=ge(),{qtr_data_status:U}=h.useDict("qtr_data_status"),q=n([]);n(!1);const D=n(!1),N=n(!0);n("");const j=n(!0),M=n(!0),w=n([]),P=ne(H,"suiteId"),R=n([]),f=ve({form:{},queryParams:{projectName:void 0,status:void 0,isPage:!1,suiteId:P,dataType:1},rules:{projectName:[{required:!0,message:"项目名称不能为空",trigger:"blur"}],orderNum:[{required:!0,message:"显示排序不能为空",trigger:"blur"}]}}),{queryParams:$,form:z,rules:J}=be(f);L({getList:Y});function Y(){D.value=!0,he($.value).then(x=>{q.value=x.data,D.value=!1})}function S(x){w.value=x.map(g=>g.projectId),R.value=w.value,multiple.value=!x.length}function E(){Y()}function b(){h.resetForm("queryRef"),E()}function _(x){if(x&&"projectId"in x&&x.projectId&&(R.value=[x.projectId]),!R.value||R.value.length===0){Ie.alert("请选择项目","提示！",{type:"warning"});return}const g={suiteId:P.value,dataIds:R.value,dataType:1};Se(g).then(te=>{h.$modal.msgSuccess("新增成功"),openProjectCaseDialog.value=!1})}return(x,g)=>{const te=o("el-input"),I=o("el-form-item"),s=o("el-option"),V=o("el-select"),F=o("el-button"),K=o("el-form"),W=o("el-col"),y=o("right-toolbar"),u=o("el-row"),a=o("el-table-column"),d=o("dict-tag"),O=o("el-table"),B=ue("loading");return p(),G("div",Xe,[Q(e(K,{model:t($),ref:"queryRef",inline:!0},{default:l(()=>[e(I,{label:"项目名称",prop:"projectName"},{default:l(()=>[e(te,{modelValue:t($).projectName,"onUpdate:modelValue":g[0]||(g[0]=c=>t($).projectName=c),placeholder:"请输入项目名称",clearable:"",style:{width:"200px"},onKeyup:pe(E,["enter"])},null,8,["modelValue"])]),_:1}),e(I,{label:"状态",prop:"status"},{default:l(()=>[e(V,{modelValue:t($).status,"onUpdate:modelValue":g[1]||(g[1]=c=>t($).status=c),placeholder:"项目状态",clearable:"",style:{width:"200px"}},{default:l(()=>[(p(!0),G(le,null,ae(t(U),c=>(p(),k(s,{key:c.value*1,label:c.label,value:c.value*1},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(I,null,{default:l(()=>[e(F,{type:"primary",icon:"Search",onClick:E},{default:l(()=>g[3]||(g[3]=[C("搜索")])),_:1}),e(F,{icon:"Refresh",onClick:b},{default:l(()=>g[4]||(g[4]=[C("重置")])),_:1})]),_:1})]),_:1},8,["model"]),[[de,t(N)]]),e(u,{gutter:10,class:"mb8"},{default:l(()=>[e(W,{span:1.5},{default:l(()=>[e(F,{type:"primary",onClick:_},{default:l(()=>g[5]||(g[5]=[C("保存")])),_:1})]),_:1}),e(y,{showSearch:t(N),"onUpdate:showSearch":g[2]||(g[2]=c=>oe(N)?N.value=c:null),onQueryTable:Y},null,8,["showSearch"])]),_:1}),t(M)?Q((p(),k(O,{key:0,border:"",data:t(q),style:{width:"100%"},height:"350","row-key":"projectId","default-expand-all":t(j),onSelectionChange:S},{default:l(()=>[e(a,{type:"selection",width:"55",align:"center"}),e(a,{prop:"projectId",label:"ID",width:"150"}),e(a,{prop:"projectName",align:"center",label:"项目名称",width:"200"}),e(a,{prop:"testUser",label:"测试负责人",align:"center",width:"120"}),e(a,{prop:"status",label:"状态",align:"center",width:"100"},{default:l(c=>[e(d,{options:t(U),value:c.row.status+""},null,8,["options","value"])]),_:1}),e(a,{label:"创建时间",align:"center",prop:"createTime","class-name":"small-padding fixed-width"},{default:l(c=>[X("span",null,ee(x.parseTime(c.row.createTime)),1)]),_:1}),e(a,{label:"更新时间",align:"center",prop:"updateTime","class-name":"small-padding fixed-width"},{default:l(c=>[X("span",null,ee(x.parseTime(c.row.updateTime)),1)]),_:1})]),_:1},8,["data","default-expand-all"])),[[B,t(D)]]):je("",!0)])}}}),et={class:"app-container"},tt={__name:"case-data",props:ke({dataType:{type:Number,default:Ce.case},formRules:{type:Object,default:{caseName:[{required:!0,message:"用例名称不能为空",trigger:"blur"}],projectId:[{required:!0,message:"所属项目不能为空",trigger:"blur"}],moduleId:[{required:!0,message:"所属模块不能为空",trigger:"blur"}]}}},{suiteId:{},suiteIdModifiers:{},openProjectCaseDialog:{},openProjectCaseDialogModifiers:{}}),emits:["update:suiteId","update:openProjectCaseDialog"],setup(H,{expose:L}){const{proxy:h}=ge();h.useDict("qtr_case_status");const{sys_normal_disable:U}=h.useDict("sys_normal_disable");h.useDict("sys_request_method");const{hrm_data_type:q}=h.useDict("hrm_data_type"),D=ne(H,"suiteId");L({getList:g});const N=H,j=xe(()=>N.dataType===Ce.case?"用例":"配置");De("hrm_data_type",q),De("sys_normal_disable",U);const M=ne(H,"openProjectCaseDialog"),w=n([]),P=n([]),R=n([]);n(!1);const f=n(!1),$=n(!0),z=n([]),J=n(!0),Y=n(!0),S=n(0);n("");const E=n(!0),b=n([]);n(!1);const _=Ke({pageNum:1,pageSize:10,type:N.dataType,caseId:void 0,suiteId:D,dataType:3,caseName:void 0,projectId:void 0,moduleId:void 0,status:void 0,onlySelf:E});n(Je);function x(y){return y||"全局"}function g(){f.value=!0,We(_.value).then(y=>{w.value=y.rows,S.value=y.total}).finally(()=>{f.value=!1})}function te(){he(null).then(y=>{P.value=y.data})}function I(){Te(_.value).then(y=>{R.value=y.data})}function s(){_.value.moduleId=void 0,I()}function V(){_.value.pageNum=1,g()}function F(){h.resetForm("queryRef"),V()}function K(y){z.value=y.map(u=>u.caseId),b.value=z.value,J.value=y.length!==1,Y.value=!y.length}function W(y){if(y&&"caseId"in y&&y.caseId&&(b.value=[y.caseId]),!b.value||b.value.length===0){Ie.alert("请选择用例","提示！",{type:"warning"});return}const u={suiteId:D.value,dataIds:b.value,dataType:3};Se(u).then(a=>{h.$modal.msgSuccess("新增成功"),M.value=!1})}return te(),(y,u)=>{const a=o("el-option"),d=o("el-select"),O=o("el-form-item"),B=o("el-input"),c=o("el-checkbox"),m=o("el-button"),Z=o("el-form"),me=o("el-col"),ce=o("right-toolbar"),fe=o("el-row"),T=o("el-table-column"),A=o("dict-tag"),se=o("el-table"),_e=o("pagination"),ie=ue("loading");return p(),G("div",et,[Q(e(Z,{model:t(_),ref:"queryRef",inline:!0},{default:l(()=>[e(O,{label:"所属项目",prop:"projectId"},{default:l(()=>[e(d,{modelValue:t(_).projectId,"onUpdate:modelValue":u[0]||(u[0]=r=>t(_).projectId=r),placeholder:"请选择",onChange:s,clearable:"",style:{width:"150px"}},{default:l(()=>[(p(!0),G(le,null,ae(t(P),r=>(p(),k(a,{key:r.projectId,label:r.projectName,value:r.projectId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(O,{label:"所属模块",prop:"moduleId"},{default:l(()=>[e(d,{modelValue:t(_).moduleId,"onUpdate:modelValue":u[1]||(u[1]=r=>t(_).moduleId=r),placeholder:"请选择",clearable:"",style:{width:"150px"}},{default:l(()=>[(p(!0),G(le,null,ae(t(R),r=>(p(),k(a,{key:r.moduleId,label:r.moduleName,value:r.moduleId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(O,{label:t(j)+"ID",prop:"caseId"},{default:l(()=>[e(B,{modelValue:t(_).caseId,"onUpdate:modelValue":u[2]||(u[2]=r=>t(_).caseId=r),placeholder:"请输入"+t(j)+"ID",clearable:"",style:{width:"200px"},onKeyup:pe(V,["enter"])},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(O,{label:t(j)+"名称",prop:"caseName"},{default:l(()=>[e(B,{modelValue:t(_).caseName,"onUpdate:modelValue":u[3]||(u[3]=r=>t(_).caseName=r),placeholder:"请输入"+t(j)+"名称",clearable:"",style:{width:"200px"},onKeyup:pe(V,["enter"])},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(O,{label:"状态",prop:"status"},{default:l(()=>[e(d,{modelValue:t(_).status,"onUpdate:modelValue":u[4]||(u[4]=r=>t(_).status=r),placeholder:t(j)+"状态",clearable:"",style:{width:"100px"}},{default:l(()=>[(p(!0),G(le,null,ae(t(U),r=>(p(),k(a,{key:r.value*1,label:r.label,value:r.value*1},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1}),e(O,null,{default:l(()=>[e(c,{modelValue:t(E),"onUpdate:modelValue":u[5]||(u[5]=r=>oe(E)?E.value=r:null),onChange:V},{default:l(()=>u[9]||(u[9]=[C("仅自己的数据")])),_:1},8,["modelValue"])]),_:1}),e(O,null,{default:l(()=>[e(m,{type:"primary",icon:"Search",onClick:V},{default:l(()=>u[10]||(u[10]=[C("搜索")])),_:1}),e(m,{type:"default",icon:"Refresh",onClick:F},{default:l(()=>u[11]||(u[11]=[C("重置")])),_:1})]),_:1})]),_:1},8,["model"]),[[de,t($)]]),e(fe,{gutter:10,class:"mb8"},{default:l(()=>[e(me,{span:1.5},{default:l(()=>[e(m,{type:"primary",onClick:W},{default:l(()=>u[12]||(u[12]=[C("保存")])),_:1})]),_:1}),e(ce,{showSearch:t($),"onUpdate:showSearch":u[6]||(u[6]=r=>oe($)?$.value=r:null),onQueryTable:g},null,8,["showSearch"])]),_:1}),Q((p(),k(se,{data:t(w),style:{width:"100%"},height:"350",onSelectionChange:K,border:"","table-layout":"fixed"},{default:l(()=>[e(T,{type:"selection",width:"55",align:"center"}),e(T,{label:t(j)+"ID",prop:"caseId",width:"150px"},null,8,["label"]),e(T,{label:t(j)+"名称",prop:"caseName",width:"auto"},null,8,["label"]),e(T,{label:"所属项目",prop:"projectName"},{default:l(r=>[X("span",null,ee(x(r.row.projectName)),1)]),_:1}),e(T,{label:"所属模块",prop:"moduleName"},{default:l(r=>[X("span",null,ee(x(r.row.moduleName)),1)]),_:1}),e(T,{label:"状态",align:"center",prop:"status",width:"70px"},{default:l(r=>[e(A,{options:t(U),value:r.row.status+""},null,8,["options","value"])]),_:1}),e(T,{label:"创建人",align:"center",prop:"createBy"}),e(T,{label:"创建时间",align:"center",prop:"createTime","class-name":"small-padding fixed-width",width:"150px"},{default:l(r=>[X("span",null,ee(y.parseTime(r.row.createTime)),1)]),_:1}),e(T,{label:"更新时间",align:"center",prop:"createTime","class-name":"small-padding fixed-width",width:"150px"},{default:l(r=>[X("span",null,ee(y.parseTime(r.row.updateTime)),1)]),_:1})]),_:1},8,["data"])),[[ie,t(f)]]),Q(e(_e,{total:t(S),page:t(_).pageNum,"onUpdate:page":u[7]||(u[7]=r=>t(_).pageNum=r),limit:t(_).pageSize,"onUpdate:limit":u[8]||(u[8]=r=>t(_).pageSize=r),onPagination:g},null,8,["total","page","limit"]),[[de,t(S)>0]])])}}},lt={class:"app-container"},at=ye({name:"Module"}),ot=Object.assign(at,{props:{suiteId:{},suiteIdModifiers:{}},emits:["update:suiteId"],setup(H,{expose:L}){const{proxy:h}=ge(),{qtr_data_status:U}=h.useDict("qtr_data_status"),q=n([]),D=n([]),N=n(!1),j=n(!1),M=n(!0),w=n([]),P=n(!0),R=n(!0),f=n(0),$=n("");n(!1),n([]);const z=ne(H,"suiteId"),J=n([]),Y=ve({form:{testUser:void 0},queryParams:{pageNum:1,pageSize:10,suiteId:z,dataType:2,projectId:void 0,moduleName:void 0,status:void 0},rules:{moduleName:[{required:!0,message:"模块名称不能为空",trigger:"blur"}],projectId:[{required:!0,message:"所属项目不能为空",trigger:"blur"}],testUser:[{required:!0,message:"测试负责人不能为空",trigger:"blur"}],sort:[{required:!0,message:"模块顺序不能为空",trigger:"blur"}]}}),{queryParams:S,form:E,rules:b}=be(Y);L({getList:_});function _(){j.value=!0,Ae(S.value).then(u=>{q.value=u.rows,f.value=u.total,j.value=!1})}function x(){he({isPage:!1}).then(u=>{D.value=u.data})}function g(u,a,d){return te(u.projectId)}function te(u){for(const a of D.value)if(u===a.projectId)return a.projectName}function I(){E.value={moduleId:void 0,projectId:void 0,moduleName:void 0,sort:0,status:"0",remark:void 0},h.resetForm("postRef")}function s(){S.value.pageNum=1,x(),_()}function V(){h.resetForm("queryRef"),s()}function F(u){w.value=u.map(a=>a.moduleId),J.value=w.value,P.value=u.length!=1,R.value=!u.length}function K(u){I();const a=u.moduleId||w.value;He(a).then(d=>{E.value=d.data,N.value=!0,$.value="修改模块"})}function W(u){const a=u.moduleId||w.value;h.$modal.confirm('是否确认删除模块编号为"'+a+'"的数据项？').then(function(){return Ge(a)}).then(()=>{_(),h.$modal.msgSuccess("删除成功")}).catch(()=>{})}function y(u){if(u&&"projectId"in u&&u.moduleId&&(J.value=[u.moduleId]),!J.value||J.value.length===0){Ie.alert("请选择模块","提示！",{type:"warning"});return}const a={suiteId:z.value,dataIds:J.value,dataType:2};Se(a).then(d=>{h.$modal.msgSuccess("新增成功"),openProjectCaseDialog.value=!1})}return x(),(u,a)=>{const d=o("el-option"),O=o("el-select"),B=o("el-form-item"),c=o("el-input"),m=o("el-button"),Z=o("el-form"),me=o("el-col"),ce=o("right-toolbar"),fe=o("el-row"),T=o("el-table-column"),A=o("dict-tag"),se=o("el-table"),_e=o("pagination"),ie=ue("hasPermi"),r=ue("loading");return p(),G("div",lt,[Q(e(Z,{model:t(S),ref:"queryRef",inline:!0},{default:l(()=>[e(B,{label:"项目",prop:"projectId"},{default:l(()=>[e(O,{modelValue:t(S).projectId,"onUpdate:modelValue":a[0]||(a[0]=v=>t(S).projectId=v),placeholder:"请选择",clearable:"",style:{width:"150px"}},{default:l(()=>[(p(!0),G(le,null,ae(t(D),v=>(p(),k(d,{key:v.projectId,label:v.projectName,value:v.projectId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(B,{label:"模块名称",prop:"moduleName"},{default:l(()=>[e(c,{modelValue:t(S).moduleName,"onUpdate:modelValue":a[1]||(a[1]=v=>t(S).moduleName=v),placeholder:"请输入模块名称",clearable:"",style:{width:"200px"},onKeyup:pe(s,["enter"])},null,8,["modelValue"])]),_:1}),e(B,{label:"状态",prop:"status"},{default:l(()=>[e(O,{modelValue:t(S).status,"onUpdate:modelValue":a[2]||(a[2]=v=>t(S).status=v),placeholder:"模块状态",clearable:"",style:{width:"200px"}},{default:l(()=>[(p(!0),G(le,null,ae(t(U),v=>(p(),k(d,{key:v.value*1,label:v.label,value:v.value*1},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(B,null,{default:l(()=>[e(m,{type:"primary",icon:"Search",onClick:s},{default:l(()=>a[6]||(a[6]=[C("搜索")])),_:1}),e(m,{icon:"Refresh",onClick:V},{default:l(()=>a[7]||(a[7]=[C("重置")])),_:1})]),_:1})]),_:1},8,["model"]),[[de,t(M)]]),e(fe,{gutter:10,class:"mb8"},{default:l(()=>[e(me,{span:1.5},{default:l(()=>[e(m,{type:"primary",onClick:y},{default:l(()=>a[8]||(a[8]=[C("保存")])),_:1})]),_:1}),e(ce,{showSearch:t(M),"onUpdate:showSearch":a[3]||(a[3]=v=>oe(M)?M.value=v:null),onQueryTable:_},null,8,["showSearch"])]),_:1}),Q((p(),k(se,{border:"",data:t(q),style:{width:"100%"},height:"350",onSelectionChange:F},{default:l(()=>[e(T,{type:"selection",width:"55",align:"center"}),e(T,{label:"模块ID",align:"center",prop:"moduleId"}),e(T,{label:"模块名称",align:"center",prop:"moduleName"}),e(T,{label:"所属项目",align:"center",formatter:g}),e(T,{label:"测试人员",align:"center",prop:"testUser"}),e(T,{label:"模块排序",align:"center",prop:"sort"}),e(T,{label:"状态",align:"center",prop:"status"},{default:l(v=>[e(A,{options:t(U),value:v.row.status+""},null,8,["options","value"])]),_:1}),e(T,{label:"创建时间",align:"center",prop:"createTime","class-name":"small-padding fixed-width"},{default:l(v=>[X("span",null,ee(u.parseTime(v.row.createTime)),1)]),_:1}),e(T,{label:"更新时间",align:"center",prop:"createTime","class-name":"small-padding fixed-width"},{default:l(v=>[X("span",null,ee(u.parseTime(v.row.updateTime)),1)]),_:1}),e(T,{label:"操作",width:"180",align:"center","class-name":"small-padding fixed-width"},{default:l(v=>[Q((p(),k(m,{link:"",type:"primary",icon:"Edit",onClick:we=>K(v.row)},{default:l(()=>a[9]||(a[9]=[C(" 修改 ")])),_:2},1032,["onClick"])),[[ie,["hrm:module:edit"]]]),Q((p(),k(m,{link:"",type:"primary",icon:"Delete",onClick:we=>W(v.row)},{default:l(()=>a[10]||(a[10]=[C("删除 ")])),_:2},1032,["onClick"])),[[ie,["hrm:module:remove"]]])]),_:1})]),_:1},8,["data"])),[[r,t(j)]]),Q(e(_e,{total:t(f),page:t(S).pageNum,"onUpdate:page":a[4]||(a[4]=v=>t(S).pageNum=v),limit:t(S).pageSize,"onUpdate:limit":a[5]||(a[5]=v=>t(S).pageSize=v),onPagination:_},null,8,["total","page","limit"]),[[de,t(f)>0]])])}}}),nt=ye({__name:"config-suite-data-dialog",props:{openConfigSuiteDataDialog:{},openConfigSuiteDataDialogModifiers:{},suiteId:{},suiteIdModifiers:{}},emits:ke(["close-dialog"],["update:openConfigSuiteDataDialog","update:suiteId"]),setup(H,{emit:L}){const h=ne(H,"openConfigSuiteDataDialog"),U=ne(H,"suiteId"),q=n("Case"),D=n(null),N=n(null),j=n(null),M=(w,P)=>{w.props.name==="Case"?D.value.getList():w.props.name==="Module"?N.value.getList():w.props.name==="Project"&&j.value.getList()};return(w,P)=>{const R=o("el-tab-pane"),f=o("el-tabs"),$=o("el-dialog");return p(),k($,{modelValue:h.value,"onUpdate:modelValue":P[1]||(P[1]=z=>h.value=z),width:"90%",title:"套件数据配置","append-to-body":"","destroy-on-close":"",draggable:"",overflow:"","close-on-click-modal":!1,onClosed:P[2]||(P[2]=z=>w.$emit("close-dialog"))},{default:l(()=>[e(f,{modelValue:q.value,"onUpdate:modelValue":P[0]||(P[0]=z=>q.value=z),class:"demo-tabs",onTabClick:M},{default:l(()=>[e(R,{label:"Case",name:"Case"},{default:l(()=>[e(tt,{suiteId:U.value,ref_key:"callCase",ref:D},null,8,["suiteId"])]),_:1}),e(R,{label:"Module",name:"Module"},{default:l(()=>[e(ot,{suiteId:U.value,ref_key:"callModule",ref:N},null,8,["suiteId"])]),_:1}),e(R,{label:"Project",name:"Project"},{default:l(()=>[e(Ze,{suiteId:U.value,ref_key:"callProject",ref:j},null,8,["suiteId"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])}}}),ut=Be(nt,[["__scopeId","data-v-505c434e"]]),dt={class:"app-container"},st=ye({name:"SuiteDetail"}),it=Object.assign(st,{props:{suiteId:{},suiteIdModifiers:{},openSuiteDetailDialog:{},openSuiteDetailDialogModifiers:{}},emits:["update:suiteId","update:openSuiteDetailDialog"],setup(H){const L=ne(H,"suiteId"),{proxy:h}=ge(),{qtr_case_status:U}=h.useDict("qtr_case_status"),{qtr_data_type:q}=h.useDict("qtr_data_type"),D=n(!0),N=n(!1),j=n(!1),M=n(!1),w=n(0),P=n(0),R=n([]);n([]);const f=n([]),$=n([]),z=n(!0),J=n(!0),Y=n([]),S=ve({form:{},queryParams:{dataName:void 0,projectId:void 0,suiteDetailId:void 0,suiteId:L,dataId:void 0,moduleId:void 0,pageNum:1,pageSize:10,status:void 0}}),E=ne(H,"openSuiteDetailDialog"),{queryParams:b,form:_}=be(S);function x(a){Y.value=a.map(d=>d.suiteDetailId)}function g(){K()}function te(){h.resetForm("queryRef_detail"),g()}function I(){P.value=L.value,N.value=!0}function s(){he(null).then(a=>{f.value=a.data})}function V(){Te(b.value).then(a=>{$.value=a.data})}function F(){b.value.moduleId=void 0,V()}function K(){j.value=!0,qe(b.value).then(a=>{R.value=a.rows,w.value=a.total}).finally(()=>{j.value=!1})}function W(){R.value=[]}function y(a){M.value=!0,Pe(a.suiteDetailId).then(d=>{if(!d.data||Object.keys(d.data).length===0){alert("未查到对应数据！");return}d.data.status=a.status,$e(d.data).then(O=>{h.$modal.msgSuccess("修改成功")})}).finally(()=>{M.value=!1})}function u(a){Me({suiteId:a.suiteId,orderNum:a.orderNum,dataId:a.dataId}).then(d=>{Ne.success(d.msg)}).catch(d=>{Ne.error("操作失败")})}return s(),K(),(a,d)=>{const O=o("el-option"),B=o("el-select"),c=o("el-form-item"),m=o("el-input"),Z=o("el-button"),me=o("el-form"),ce=o("el-col"),fe=o("right-toolbar"),T=o("el-row"),A=o("el-table-column"),se=o("dict-tag"),_e=o("el-switch"),ie=o("el-table"),r=o("pagination"),v=o("el-dialog"),we=ue("hasPermi"),Ue=ue("loading");return p(),k(v,{fullscreen:"",suiteId:L.value,modelValue:E.value,"onUpdate:modelValue":d[9]||(d[9]=i=>E.value=i),"append-to-body":"","destroy-on-close":"",onClose:W,onOpen:K},{default:l(()=>[X("div",dt,[Q(e(me,{model:t(b),ref:"queryRef_detail",inline:!0},{default:l(()=>[e(c,{label:"所属项目",prop:"projectId"},{default:l(()=>[e(B,{modelValue:t(b).projectId,"onUpdate:modelValue":d[0]||(d[0]=i=>t(b).projectId=i),placeholder:"请选择",onChange:F,clearable:"",style:{width:"150px"}},{default:l(()=>[(p(!0),G(le,null,ae(t(f),i=>(p(),k(O,{key:i.projectId,label:i.projectName,value:i.projectId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(c,{label:"所属模块",prop:"moduleId"},{default:l(()=>[e(B,{modelValue:t(b).moduleId,"onUpdate:modelValue":d[1]||(d[1]=i=>t(b).moduleId=i),placeholder:"请选择",clearable:"",style:{width:"150px"}},{default:l(()=>[(p(!0),G(le,null,ae(t($),i=>(p(),k(O,{key:i.moduleId,label:i.moduleName,value:i.moduleId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),d[12]||(d[12]=C(" 、 ")),e(c,{label:"数据ID",prop:"dataId"},{default:l(()=>[e(m,{modelValue:t(b).dataId,"onUpdate:modelValue":d[2]||(d[2]=i=>t(b).dataId=i),placeholder:"请输入数据ID",clearable:"",style:{width:"200px"},onKeyup:pe(g,["enter"])},null,8,["modelValue"])]),_:1}),e(c,{label:"数据名称",prop:"dataName"},{default:l(()=>[e(m,{modelValue:t(b).dataName,"onUpdate:modelValue":d[3]||(d[3]=i=>t(b).dataName=i),placeholder:"请输入数据名称",clearable:"",style:{width:"200px"},onKeyup:pe(g,["enter"])},null,8,["modelValue"])]),_:1}),e(c,{label:"数据状态",prop:"status"},{default:l(()=>[e(B,{modelValue:t(b).status,"onUpdate:modelValue":d[4]||(d[4]=i=>t(b).status=i),placeholder:"数据状态",clearable:"",style:{width:"200px"}},{default:l(()=>[(p(!0),G(le,null,ae(t(U),i=>(p(),k(O,{key:i.value*1,label:i.label,value:i.value*1},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(c,null,{default:l(()=>[e(Z,{type:"primary",icon:"Search",onClick:g},{default:l(()=>d[10]||(d[10]=[C("搜索")])),_:1}),e(Z,{type:"success",icon:"Refresh",onClick:te},{default:l(()=>d[11]||(d[11]=[C("重置")])),_:1})]),_:1})]),_:1},8,["model"]),[[de,t(D)]]),e(T,{gutter:10,class:"mb8"},{default:l(()=>[e(ce,{span:1.5},{default:l(()=>[e(Z,{type:"warning",icon:"Plus",onClick:I},{default:l(()=>d[13]||(d[13]=[C("选择数据")])),_:1})]),_:1}),e(fe,{showSearch:t(D),"onUpdate:showSearch":d[5]||(d[5]=i=>oe(D)?D.value=i:null),onQueryTable:K},null,8,["showSearch"])]),_:1})]),t(z)?Q((p(),k(ie,{key:0,border:"",data:t(R),"row-key":"suiteDetailId","default-expand-all":t(J),onSelectionChange:x},{default:l(()=>[e(A,{type:"selection",width:"55",align:"center"}),e(A,{prop:"suiteDetailId",label:"ID",width:"160",align:"center"}),e(A,{prop:"suiteId",label:"套件ID",width:"160",align:"center"}),e(A,{prop:"dataId",label:"数据ID",width:"160",align:"center"}),e(A,{prop:"dataType",label:"数据类型",width:"100",align:"center"},{default:l(i=>[e(se,{options:t(q),value:i.row.dataType+""},null,8,["options","value"])]),_:1}),e(A,{prop:"dataName",label:"数据名称"}),e(A,{prop:"orderNum",label:"排序",width:"80px"},{default:l(i=>[e(m,{modelValue:i.row.orderNum,"onUpdate:modelValue":re=>i.row.orderNum=re,onChange:re=>u(i.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(A,{prop:"dataStatus",label:"数据状态",width:"100",align:"center"},{default:l(i=>[e(se,{options:t(U),value:i.row.dataStatus+""},null,8,["options","value"])]),_:1}),e(A,{label:"创建时间",align:"center",prop:"createTime",width:"160","class-name":"small-padding fixed-width"},{default:l(i=>[X("span",null,ee(a.parseTime(i.row.createTime)),1)]),_:1}),e(A,{label:"更新时间",align:"center",prop:"updateTime",width:"160","class-name":"small-padding fixed-width"},{default:l(i=>[X("span",null,ee(a.parseTime(i.row.updateTime)),1)]),_:1}),e(A,{label:"操作",width:"170",align:"center","class-name":"small-padding fixed-width",fixed:"right"},{default:l(i=>[e(_e,{modelValue:i.row.status,"onUpdate:modelValue":re=>i.row.status=re,"active-value":2,"active-text":"启用","inactive-value":1,"inactive-text":"停用",onChange:re=>y(i.row),loading:t(M)},null,8,["modelValue","onUpdate:modelValue","onChange","loading"]),Q(e(Z,{link:"",type:"danger",icon:"Delete",onClick:re=>a.handleDelete(i.row),title:"删除"},null,8,["onClick"]),[[we,["qtr:suite:remove"]]])]),_:1})]),_:1},8,["data","default-expand-all"])),[[Ue,t(j)]]):je("",!0),Q(e(r,{total:t(w),page:t(b).pageNum,"onUpdate:page":d[6]||(d[6]=i=>t(b).pageNum=i),limit:t(b).pageSize,"onUpdate:limit":d[7]||(d[7]=i=>t(b).pageSize=i),onPagination:K},null,8,["total","page","limit"]),[[de,t(w)>0]]),e(ut,{"form-datas":t(_),suiteId:t(P),onCloseDialog:K,"open-config-suite-data-dialog":t(N),"onUpdate:openConfigSuiteDataDialog":d[8]||(d[8]=i=>oe(N)?N.value=i:null)},null,8,["form-datas","suiteId","open-config-suite-data-dialog"])]),_:1},8,["suiteId","modelValue"])}}}),rt={class:"app-container"},pt={class:"dialog-footer"},Nt={__name:"index",setup(H){const{proxy:L}=ge(),{qtr_data_status:h}=L.useDict("qtr_data_status"),U=n(null),q=n(!1),D=n(!1);n(!0),n(!0);const N=n(""),j=n(0);n(0);const M=n(!1),w=n([]),P=ve({form:{},queryParams:{pageNum:1,pageSize:10,suiteName:void 0,status:void 0},rules:{suiteName:[{required:!0,message:"套件名称不能为空",trigger:"blur"}],orderNum:[{required:!0,message:"显示排序不能为空",trigger:"blur"}]}}),{queryParams:R,form:f,rules:$}=be(P),z=xe(()=>N.value);function J(I){w.value=I.map(s=>s.suiteId)}function Y(){q.value=!1,S()}function S(){f.value={suiteId:void 0,suiteName:void 0,orderNum:0,simpleDesc:void 0,status:ze.normal.value},L.resetForm("suiteRef")}function E(I){S(),q.value=!0,N.value="添加套件"}function b(I){const s=I.suiteId;Ve(s).then(V=>{if(!V.data||Object.keys(V.data).length===0){alert("未查到对应数据！");return}f.value=V.data,D.value=!0,j.value=I.suiteId,N.value="配置套件【"+V.data.suiteName+"】"})}function _(I){S(),Ve(I.suiteId).then(s=>{if(!s.data||Object.keys(s.data).length===0){alert("未查到对应数据！");return}f.value=s.data,q.value=!0,N.value="修改套件"})}function x(){L.$refs.suiteRef.validate(I=>{I&&(f.value.suiteId!==void 0?Oe(f.value).then(s=>{L.$modal.msgSuccess("修改成功"),q.value=!1,U.value.handleQuery()}):Qe(f.value).then(s=>{L.$modal.msgSuccess("新增成功"),q.value=!1,U.value.handleQuery()}))})}function g(I){L.$modal.confirm('是否确认删除名称为"'+I.suiteName+'"的数据项?').then(function(){return Le(I.suiteId)}).then(()=>{U.value.handleQuery(),L.$modal.msgSuccess("删除成功")}).catch(()=>{})}function te(I){if(I&&"suiteId"in I&&I.suiteId&&(w.value=[I.suiteId]),!w.value||w.value.length===0){Ie.alert("请选择要运行的套件","提示！",{type:"warning"});return}M.value=!0}return(I,s)=>{const V=o("el-button"),F=o("el-col"),K=o("el-input"),W=o("el-form-item"),y=o("el-input-number"),u=o("el-radio"),a=o("el-radio-group"),d=o("el-row"),O=o("el-form"),B=o("el-dialog"),c=ue("hasPermi");return p(),G("div",rt,[e(Re,{onSelectChange:J,ref_key:"suiteQueryViewRef",ref:U},{"table-tool":l(()=>[e(F,{span:1.5},{default:l(()=>[Q((p(),k(V,{type:"primary",plain:"",icon:"Plus",onClick:E},{default:l(()=>s[7]||(s[7]=[C("新增 ")])),_:1})),[[c,["qtr:suite:add"]]]),Q((p(),k(V,{type:"warning",icon:"CaretRight",onClick:te,title:"运行"},{default:l(()=>s[8]||(s[8]=[C("执行 ")])),_:1})),[[c,["hrm:case:run"]]])]),_:1})]),tableOperate:l(({scope:m})=>[Q((p(),k(V,{link:"",type:"primary",icon:"Edit",onClick:Z=>_(m.row)},{default:l(()=>s[9]||(s[9]=[C(" 修改 ")])),_:2},1032,["onClick"])),[[c,["qtr:suite:edit"]]]),Q((p(),k(V,{link:"",type:"primary",icon:"Tools",onClick:Z=>b(m.row)},{default:l(()=>s[10]||(s[10]=[C(" 配置 ")])),_:2},1032,["onClick"])),[[c,["qtr:suite:edit"]]]),Q((p(),k(V,{link:"",type:"primary",icon:"Delete",onClick:Z=>g(m.row)},{default:l(()=>s[11]||(s[11]=[C(" 删除 ")])),_:2},1032,["onClick"])),[[c,["qtr:suite:remove"]]])]),_:1},512),e(B,{title:t(N),modelValue:t(q),"onUpdate:modelValue":s[4]||(s[4]=m=>oe(q)?q.value=m:null),"append-to-body":""},{footer:l(()=>[X("div",pt,[e(V,{type:"primary",onClick:x},{default:l(()=>s[12]||(s[12]=[C("确 定")])),_:1}),e(V,{onClick:Y},{default:l(()=>s[13]||(s[13]=[C("取 消")])),_:1})])]),default:l(()=>[e(O,{ref:"suiteRef",model:t(f),rules:t($),"label-width":"80px"},{default:l(()=>[e(d,null,{default:l(()=>[e(F,{span:12},{default:l(()=>[e(W,{label:"套件名称",prop:"suiteName"},{default:l(()=>[e(K,{modelValue:t(f).suiteName,"onUpdate:modelValue":s[0]||(s[0]=m=>t(f).suiteName=m),placeholder:"请输入套件名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(F,{span:12},{default:l(()=>[e(W,{label:"显示排序",prop:"orderNum"},{default:l(()=>[e(y,{modelValue:t(f).orderNum,"onUpdate:modelValue":s[1]||(s[1]=m=>t(f).orderNum=m),"controls-position":"right",min:0},null,8,["modelValue"])]),_:1})]),_:1}),e(F,{span:12},{default:l(()=>[e(W,{label:"套件描述",prop:"simpleDesc"},{default:l(()=>[e(K,{modelValue:t(f).simpleDesc,"onUpdate:modelValue":s[2]||(s[2]=m=>t(f).simpleDesc=m),placeholder:"请输入描述",maxlength:"400"},null,8,["modelValue"])]),_:1})]),_:1}),e(F,{span:12},{default:l(()=>[e(W,{label:"套件状态"},{default:l(()=>[e(a,{modelValue:t(f).status,"onUpdate:modelValue":s[3]||(s[3]=m=>t(f).status=m)},{default:l(()=>[(p(!0),G(le,null,ae(t(h),m=>(p(),k(u,{key:m.value*1,value:m.value*1},{default:l(()=>[C(ee(m.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"]),e(Fe,{"dialog-visible":t(M),"onUpdate:dialogVisible":s[5]||(s[5]=m=>oe(M)?M.value=m:null),"run-type":t(Ee).suite,"run-ids":t(w)},null,8,["dialog-visible","run-type","run-ids"]),e(it,{"form-datas":t(f),"open-suite-detail-dialog":t(D),"onUpdate:openSuiteDetailDialog":s[6]||(s[6]=m=>oe(D)?D.value=m:null),title:t(z),suiteId:t(j),"show-close":"","destroy-on-close":!0},null,8,["form-datas","open-suite-detail-dialog","title","suiteId"])])}}};export{Nt as default};
//# sourceMappingURL=index.B6vfM35D.js.map

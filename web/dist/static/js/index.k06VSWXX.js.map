{"version":3,"file":"index.k06VSWXX.js","sources":["../../../src/views/system/role/index.vue"],"sourcesContent":["<template>\r\n   <div class=\"app-container\">\r\n      <el-form :model=\"queryParams\" ref=\"queryRef\" v-show=\"showSearch\" :inline=\"true\" label-width=\"68px\">\r\n         <el-form-item label=\"角色名称\" prop=\"roleName\">\r\n            <el-input\r\n               v-model=\"queryParams.roleName\"\r\n               placeholder=\"请输入角色名称\"\r\n               clearable\r\n               style=\"width: 240px\"\r\n               @keyup.enter=\"handleQuery\"\r\n            />\r\n         </el-form-item>\r\n         <el-form-item label=\"权限字符\" prop=\"roleKey\">\r\n            <el-input\r\n               v-model=\"queryParams.roleKey\"\r\n               placeholder=\"请输入权限字符\"\r\n               clearable\r\n               style=\"width: 240px\"\r\n               @keyup.enter=\"handleQuery\"\r\n            />\r\n         </el-form-item>\r\n         <el-form-item label=\"状态\" prop=\"status\">\r\n            <el-select\r\n               v-model=\"queryParams.status\"\r\n               placeholder=\"角色状态\"\r\n               clearable\r\n               style=\"width: 240px\"\r\n            >\r\n               <el-option\r\n                  v-for=\"dict in sys_normal_disable\"\r\n                  :key=\"dict.value\"\r\n                  :label=\"dict.label\"\r\n                  :value=\"dict.value\"\r\n               />\r\n            </el-select>\r\n         </el-form-item>\r\n         <el-form-item label=\"创建时间\" style=\"width: 308px\">\r\n            <el-date-picker\r\n               v-model=\"dateRange\"\r\n               value-format=\"YYYY-MM-DD\"\r\n               type=\"daterange\"\r\n               range-separator=\"-\"\r\n               start-placeholder=\"开始日期\"\r\n               end-placeholder=\"结束日期\"\r\n            ></el-date-picker>\r\n         </el-form-item>\r\n         <el-form-item>\r\n            <el-button type=\"primary\" icon=\"Search\" @click=\"handleQuery\">搜索</el-button>\r\n            <el-button icon=\"Refresh\" @click=\"resetQuery\">重置</el-button>\r\n         </el-form-item>\r\n      </el-form>\r\n      <el-row :gutter=\"10\" class=\"mb8\">\r\n         <el-col :span=\"1.5\">\r\n            <el-button\r\n               type=\"primary\"\r\n               plain\r\n               icon=\"Plus\"\r\n               @click=\"handleAdd\"\r\n               v-hasPermi=\"['system:role:add']\"\r\n            >新增</el-button>\r\n         </el-col>\r\n         <el-col :span=\"1.5\">\r\n            <el-button\r\n               type=\"success\"\r\n               plain\r\n               icon=\"Edit\"\r\n               :disabled=\"single\"\r\n               @click=\"handleUpdate\"\r\n               v-hasPermi=\"['system:role:edit']\"\r\n            >修改</el-button>\r\n         </el-col>\r\n         <el-col :span=\"1.5\">\r\n            <el-button\r\n               type=\"danger\"\r\n               plain\r\n               icon=\"Delete\"\r\n               :disabled=\"multiple\"\r\n               @click=\"handleDelete\"\r\n               v-hasPermi=\"['system:role:remove']\"\r\n            >删除</el-button>\r\n         </el-col>\r\n         <el-col :span=\"1.5\">\r\n            <el-button\r\n               type=\"warning\"\r\n               plain\r\n               icon=\"Download\"\r\n               @click=\"handleExport\"\r\n               v-hasPermi=\"['system:role:export']\"\r\n            >导出</el-button>\r\n         </el-col>\r\n         <right-toolbar v-model:showSearch=\"showSearch\" @queryTable=\"getList\"></right-toolbar>\r\n      </el-row>\r\n\r\n      <!-- 表格数据 -->\r\n      <el-table v-loading=\"loading\" :data=\"roleList\" @selection-change=\"handleSelectionChange\">\r\n         <el-table-column type=\"selection\" width=\"55\" align=\"center\" />\r\n         <el-table-column label=\"角色编号\" prop=\"roleId\" width=\"120\" />\r\n         <el-table-column label=\"角色名称\" prop=\"roleName\" :show-overflow-tooltip=\"true\" width=\"150\" />\r\n         <el-table-column label=\"权限字符\" prop=\"roleKey\" :show-overflow-tooltip=\"true\" width=\"150\" />\r\n         <el-table-column label=\"显示顺序\" prop=\"roleSort\" width=\"100\" />\r\n         <el-table-column label=\"状态\" align=\"center\" width=\"100\">\r\n            <template #default=\"scope\">\r\n               <el-switch\r\n                  v-model=\"scope.row.status\"\r\n                  active-value=\"0\"\r\n                  inactive-value=\"1\"\r\n                  @change=\"handleStatusChange(scope.row)\"\r\n               ></el-switch>\r\n            </template>\r\n         </el-table-column>\r\n         <el-table-column label=\"创建时间\" align=\"center\" prop=\"createTime\">\r\n            <template #default=\"scope\">\r\n               <span>{{ parseTime(scope.row.createTime) }}</span>\r\n            </template>\r\n         </el-table-column>\r\n         <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\r\n            <template #default=\"scope\">\r\n              <el-tooltip content=\"修改\" placement=\"top\" v-if=\"scope.row.roleId !== 1\">\r\n                <el-button link type=\"primary\" icon=\"Edit\" @click=\"handleUpdate(scope.row)\" v-hasPermi=\"['system:role:edit']\"></el-button>\r\n              </el-tooltip>\r\n              <el-tooltip content=\"删除\" placement=\"top\" v-if=\"scope.row.roleId !== 1\">\r\n                <el-button link type=\"primary\" icon=\"Delete\" @click=\"handleDelete(scope.row)\" v-hasPermi=\"['system:role:remove']\"></el-button>\r\n              </el-tooltip>\r\n              <el-tooltip content=\"数据权限\" placement=\"top\" v-if=\"scope.row.roleId !== 1\">\r\n                <el-button link type=\"primary\" icon=\"CircleCheck\" @click=\"handleDataScope(scope.row)\" v-hasPermi=\"['system:role:edit']\"></el-button>\r\n              </el-tooltip>\r\n              <el-tooltip content=\"分配用户\" placement=\"top\" v-if=\"scope.row.roleId !== 1\">\r\n                <el-button link type=\"primary\" icon=\"User\" @click=\"handleAuthUser(scope.row)\" v-hasPermi=\"['system:role:edit']\"></el-button>\r\n              </el-tooltip>\r\n            </template>\r\n         </el-table-column>\r\n      </el-table>\r\n\r\n      <pagination\r\n         v-show=\"total > 0\"\r\n         :total=\"total\"\r\n         v-model:page=\"queryParams.pageNum\"\r\n         v-model:limit=\"queryParams.pageSize\"\r\n         @pagination=\"getList\"\r\n      />\r\n\r\n      <!-- 添加或修改角色配置对话框 -->\r\n      <el-dialog :title=\"title\" v-model=\"open\" width=\"500px\" append-to-body>\r\n         <el-form ref=\"roleRef\" :model=\"form\" :rules=\"rules\" label-width=\"100px\">\r\n            <el-form-item label=\"角色名称\" prop=\"roleName\">\r\n               <el-input v-model=\"form.roleName\" placeholder=\"请输入角色名称\" />\r\n            </el-form-item>\r\n            <el-form-item prop=\"roleKey\">\r\n               <template #label>\r\n                  <span>\r\n                     <el-tooltip content=\"控制器中定义的权限字符，如：@PreAuthorize(`@ss.hasRole('admin')`)\" placement=\"top\">\r\n                        <el-icon><question-filled /></el-icon>\r\n                     </el-tooltip>\r\n                     权限字符\r\n                  </span>\r\n               </template>\r\n               <el-input v-model=\"form.roleKey\" placeholder=\"请输入权限字符\" />\r\n            </el-form-item>\r\n            <el-form-item label=\"角色顺序\" prop=\"roleSort\">\r\n               <el-input-number v-model=\"form.roleSort\" controls-position=\"right\" :min=\"0\" />\r\n            </el-form-item>\r\n            <el-form-item label=\"状态\">\r\n               <el-radio-group v-model=\"form.status\">\r\n                  <el-radio\r\n                     v-for=\"dict in sys_normal_disable\"\r\n                     :key=\"dict.value\"\r\n                     :label=\"dict.value\"\r\n                  >{{ dict.label }}</el-radio>\r\n               </el-radio-group>\r\n            </el-form-item>\r\n            <el-form-item label=\"菜单权限\">\r\n               <el-checkbox v-model=\"menuExpand\" @change=\"handleCheckedTreeExpand($event, 'menu')\">展开/折叠</el-checkbox>\r\n               <el-checkbox v-model=\"menuNodeAll\" @change=\"handleCheckedTreeNodeAll($event, 'menu')\">全选/全不选</el-checkbox>\r\n               <el-checkbox v-model=\"form.menuCheckStrictly\" @change=\"handleCheckedTreeConnect($event, 'menu')\">父子联动</el-checkbox>\r\n               <el-tree\r\n                  class=\"tree-border\"\r\n                  :data=\"menuOptions\"\r\n                  show-checkbox\r\n                  ref=\"menuRef\"\r\n                  node-key=\"id\"\r\n                  :check-strictly=\"!form.menuCheckStrictly\"\r\n                  empty-text=\"加载中，请稍候\"\r\n                  :props=\"{ label: 'label', children: 'children' }\"\r\n               ></el-tree>\r\n            </el-form-item>\r\n            <el-form-item label=\"备注\">\r\n               <el-input v-model=\"form.remark\" type=\"textarea\" placeholder=\"请输入内容\"></el-input>\r\n            </el-form-item>\r\n         </el-form>\r\n         <template #footer>\r\n            <div class=\"dialog-footer\">\r\n               <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\r\n               <el-button @click=\"cancel\">取 消</el-button>\r\n            </div>\r\n         </template>\r\n      </el-dialog>\r\n\r\n      <!-- 分配角色数据权限对话框 -->\r\n      <el-dialog :title=\"title\" v-model=\"openDataScope\" width=\"500px\" append-to-body>\r\n         <el-form :model=\"form\" label-width=\"80px\">\r\n            <el-form-item label=\"角色名称\">\r\n               <el-input v-model=\"form.roleName\" :disabled=\"true\" />\r\n            </el-form-item>\r\n            <el-form-item label=\"权限字符\">\r\n               <el-input v-model=\"form.roleKey\" :disabled=\"true\" />\r\n            </el-form-item>\r\n            <el-form-item label=\"权限范围\">\r\n               <el-select v-model=\"form.dataScope\" @change=\"dataScopeSelectChange\">\r\n                  <el-option\r\n                     v-for=\"item in dataScopeOptions\"\r\n                     :key=\"item.value\"\r\n                     :label=\"item.label\"\r\n                     :value=\"item.value\"\r\n                  ></el-option>\r\n               </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"数据权限\" v-show=\"form.dataScope == 2\">\r\n               <el-checkbox v-model=\"deptExpand\" @change=\"handleCheckedTreeExpand($event, 'dept')\">展开/折叠</el-checkbox>\r\n               <el-checkbox v-model=\"deptNodeAll\" @change=\"handleCheckedTreeNodeAll($event, 'dept')\">全选/全不选</el-checkbox>\r\n               <el-checkbox v-model=\"form.deptCheckStrictly\" @change=\"handleCheckedTreeConnect($event, 'dept')\">父子联动</el-checkbox>\r\n               <el-tree\r\n                  class=\"tree-border\"\r\n                  :data=\"deptOptions\"\r\n                  show-checkbox\r\n                  default-expand-all\r\n                  ref=\"deptRef\"\r\n                  node-key=\"id\"\r\n                  :check-strictly=\"!form.deptCheckStrictly\"\r\n                  empty-text=\"加载中，请稍候\"\r\n                  :props=\"{ label: 'label', children: 'children' }\"\r\n               ></el-tree>\r\n            </el-form-item>\r\n         </el-form>\r\n         <template #footer>\r\n            <div class=\"dialog-footer\">\r\n               <el-button type=\"primary\" @click=\"submitDataScope\">确 定</el-button>\r\n               <el-button @click=\"cancelDataScope\">取 消</el-button>\r\n            </div>\r\n         </template>\r\n      </el-dialog>\r\n   </div>\r\n</template>\r\n\r\n<script setup name=\"Role\">\r\nimport { addRole, changeRoleStatus, dataScope, delRole, getRole, listRole, updateRole, deptTreeSelect } from \"@/api/system/role\";\r\nimport { roleMenuTreeselect, treeselect as menuTreeselect } from \"@/api/system/menu\";\r\n\r\nconst router = useRouter();\r\nconst { proxy } = getCurrentInstance();\r\nconst { sys_normal_disable } = proxy.useDict(\"sys_normal_disable\");\r\n\r\nconst roleList = ref([]);\r\nconst open = ref(false);\r\nconst loading = ref(true);\r\nconst showSearch = ref(true);\r\nconst ids = ref([]);\r\nconst single = ref(true);\r\nconst multiple = ref(true);\r\nconst total = ref(0);\r\nconst title = ref(\"\");\r\nconst dateRange = ref([]);\r\nconst menuOptions = ref([]);\r\nconst menuExpand = ref(false);\r\nconst menuNodeAll = ref(false);\r\nconst deptExpand = ref(true);\r\nconst deptNodeAll = ref(false);\r\nconst deptOptions = ref([]);\r\nconst openDataScope = ref(false);\r\nconst menuRef = ref(null);\r\nconst deptRef = ref(null);\r\n\r\n/** 数据范围选项*/\r\nconst dataScopeOptions = ref([\r\n  { value: \"1\", label: \"全部数据权限\" },\r\n  { value: \"2\", label: \"自定数据权限\" },\r\n  { value: \"3\", label: \"本部门数据权限\" },\r\n  { value: \"4\", label: \"本部门及以下数据权限\" },\r\n  { value: \"5\", label: \"仅本人数据权限\" }\r\n]);\r\n\r\nconst data = reactive({\r\n  form: {},\r\n  queryParams: {\r\n    pageNum: 1,\r\n    pageSize: 10,\r\n    roleName: undefined,\r\n    roleKey: undefined,\r\n    status: undefined\r\n  },\r\n  rules: {\r\n    roleName: [{ required: true, message: \"角色名称不能为空\", trigger: \"blur\" }],\r\n    roleKey: [{ required: true, message: \"权限字符不能为空\", trigger: \"blur\" }],\r\n    roleSort: [{ required: true, message: \"角色顺序不能为空\", trigger: \"blur\" }]\r\n  },\r\n});\r\n\r\nconst { queryParams, form, rules } = toRefs(data);\r\n\r\n/** 查询角色列表 */\r\nfunction getList() {\r\n  loading.value = true;\r\n  listRole(proxy.addDateRange(queryParams.value, dateRange.value)).then(response => {\r\n    roleList.value = response.rows;\r\n    total.value = response.total;\r\n    loading.value = false;\r\n  });\r\n}\r\n/** 搜索按钮操作 */\r\nfunction handleQuery() {\r\n  queryParams.value.pageNum = 1;\r\n  getList();\r\n}\r\n/** 重置按钮操作 */\r\nfunction resetQuery() {\r\n  dateRange.value = [];\r\n  proxy.resetForm(\"queryRef\");\r\n  handleQuery();\r\n}\r\n/** 删除按钮操作 */\r\nfunction handleDelete(row) {\r\n  const roleIds = row.roleId || ids.value;\r\n  proxy.$modal.confirm('是否确认删除角色编号为\"' + roleIds + '\"的数据项?').then(function () {\r\n    return delRole(roleIds);\r\n  }).then(() => {\r\n    getList();\r\n    proxy.$modal.msgSuccess(\"删除成功\");\r\n  }).catch(() => {});\r\n}\r\n/** 导出按钮操作 */\r\nfunction handleExport() {\r\n  proxy.download(\"system/role/export\", {\r\n    ...queryParams.value,\r\n  }, `role_${new Date().getTime()}.xlsx`);\r\n}\r\n/** 多选框选中数据 */\r\nfunction handleSelectionChange(selection) {\r\n  ids.value = selection.map(item => item.roleId);\r\n  single.value = selection.length != 1;\r\n  multiple.value = !selection.length;\r\n}\r\n/** 角色状态修改 */\r\nfunction handleStatusChange(row) {\r\n  let text = row.status === \"0\" ? \"启用\" : \"停用\";\r\n  proxy.$modal.confirm('确认要\"' + text + '\"\"' + row.roleName + '\"角色吗?').then(function () {\r\n    return changeRoleStatus(row.roleId, row.status);\r\n  }).then(() => {\r\n    proxy.$modal.msgSuccess(text + \"成功\");\r\n  }).catch(function () {\r\n    row.status = row.status === \"0\" ? \"1\" : \"0\";\r\n  });\r\n}\r\n/** 更多操作 */\r\nfunction handleCommand(command, row) {\r\n  switch (command) {\r\n    case \"handleDataScope\":\r\n      handleDataScope(row);\r\n      break;\r\n    case \"handleAuthUser\":\r\n      handleAuthUser(row);\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n}\r\n/** 分配用户 */\r\nfunction handleAuthUser(row) {\r\n  router.push(\"/system/role-auth/user/\" + row.roleId);\r\n}\r\n/** 查询菜单树结构 */\r\nfunction getMenuTreeselect() {\r\n  menuTreeselect().then(response => {\r\n    menuOptions.value = response.data;\r\n  });\r\n}\r\n/** 所有部门节点数据 */\r\nfunction getDeptAllCheckedKeys() {\r\n  // 目前被选中的部门节点\r\n  let checkedKeys = deptRef.value.getCheckedKeys();\r\n  // 半选中的部门节点\r\n  let halfCheckedKeys = deptRef.value.getHalfCheckedKeys();\r\n  checkedKeys.unshift.apply(checkedKeys, halfCheckedKeys);\r\n  return checkedKeys;\r\n}\r\n/** 重置新增的表单以及其他数据  */\r\nfunction reset() {\r\n  if (menuRef.value != undefined) {\r\n    menuRef.value.setCheckedKeys([]);\r\n  }\r\n  menuExpand.value = false;\r\n  menuNodeAll.value = false;\r\n  deptExpand.value = true;\r\n  deptNodeAll.value = false;\r\n  form.value = {\r\n    roleId: undefined,\r\n    roleName: undefined,\r\n    roleKey: undefined,\r\n    roleSort: 0,\r\n    status: \"0\",\r\n    menuIds: [],\r\n    deptIds: [],\r\n    menuCheckStrictly: true,\r\n    deptCheckStrictly: true,\r\n    remark: undefined\r\n  };\r\n  proxy.resetForm(\"roleRef\");\r\n}\r\n/** 添加角色 */\r\nfunction handleAdd() {\r\n  reset();\r\n  getMenuTreeselect();\r\n  open.value = true;\r\n  title.value = \"添加角色\";\r\n}\r\n/** 修改角色 */\r\nfunction handleUpdate(row) {\r\n  reset();\r\n  const roleId = row.roleId || ids.value;\r\n  const roleMenu = getRoleMenuTreeselect(roleId);\r\n  getRole(roleId).then(response => {\r\n    form.value = response.data;\r\n    form.value.roleSort = Number(form.value.roleSort);\r\n    open.value = true;\r\n    nextTick(() => {\r\n      roleMenu.then((res) => {\r\n        let checkedKeys = res.checkedKeys;\r\n        checkedKeys.forEach((v) => {\r\n          nextTick(() => {\r\n            menuRef.value.setChecked(v, true, false);\r\n          });\r\n        });\r\n      });\r\n    });\r\n    title.value = \"修改角色\";\r\n  });\r\n}\r\n/** 根据角色ID查询菜单树结构 */\r\nfunction getRoleMenuTreeselect(roleId) {\r\n  return roleMenuTreeselect(roleId).then(response => {\r\n    menuOptions.value = response.menus;\r\n    return response;\r\n  });\r\n}\r\n/** 根据角色ID查询部门树结构 */\r\nfunction getDeptTree(roleId) {\r\n  return deptTreeSelect(roleId).then(response => {\r\n    deptOptions.value = response.depts;\r\n    return response;\r\n  });\r\n}\r\n/** 树权限（展开/折叠）*/\r\nfunction handleCheckedTreeExpand(value, type) {\r\n  if (type == \"menu\") {\r\n    let treeList = menuOptions.value;\r\n    for (let i = 0; i < treeList.length; i++) {\r\n      menuRef.value.store.nodesMap[treeList[i].id].expanded = value;\r\n    }\r\n  } else if (type == \"dept\") {\r\n    let treeList = deptOptions.value;\r\n    for (let i = 0; i < treeList.length; i++) {\r\n      deptRef.value.store.nodesMap[treeList[i].id].expanded = value;\r\n    }\r\n  }\r\n}\r\n/** 树权限（全选/全不选） */\r\nfunction handleCheckedTreeNodeAll(value, type) {\r\n  if (type == \"menu\") {\r\n    menuRef.value.setCheckedNodes(value ? menuOptions.value : []);\r\n  } else if (type == \"dept\") {\r\n    deptRef.value.setCheckedNodes(value ? deptOptions.value : []);\r\n  }\r\n}\r\n/** 树权限（父子联动） */\r\nfunction handleCheckedTreeConnect(value, type) {\r\n  if (type == \"menu\") {\r\n    form.value.menuCheckStrictly = value ? true : false;\r\n  } else if (type == \"dept\") {\r\n    form.value.deptCheckStrictly = value ? true : false;\r\n  }\r\n}\r\n/** 所有菜单节点数据 */\r\nfunction getMenuAllCheckedKeys() {\r\n  // 目前被选中的菜单节点\r\n  let checkedKeys = menuRef.value.getCheckedKeys();\r\n  // 半选中的菜单节点\r\n  let halfCheckedKeys = menuRef.value.getHalfCheckedKeys();\r\n  checkedKeys.unshift.apply(checkedKeys, halfCheckedKeys);\r\n  return checkedKeys;\r\n}\r\n/** 提交按钮 */\r\nfunction submitForm() {\r\n  proxy.$refs[\"roleRef\"].validate(valid => {\r\n    if (valid) {\r\n      if (form.value.roleId != undefined) {\r\n        form.value.menuIds = getMenuAllCheckedKeys();\r\n        updateRole(form.value).then(response => {\r\n          proxy.$modal.msgSuccess(\"修改成功\");\r\n          open.value = false;\r\n          getList();\r\n        });\r\n      } else {\r\n        form.value.menuIds = getMenuAllCheckedKeys();\r\n        addRole(form.value).then(response => {\r\n          proxy.$modal.msgSuccess(\"新增成功\");\r\n          open.value = false;\r\n          getList();\r\n        });\r\n      }\r\n    }\r\n  });\r\n}\r\n/** 取消按钮 */\r\nfunction cancel() {\r\n  open.value = false;\r\n  reset();\r\n}\r\n/** 选择角色权限范围触发 */\r\nfunction dataScopeSelectChange(value) {\r\n  if (value !== \"2\") {\r\n    deptRef.value.setCheckedKeys([]);\r\n  }\r\n}\r\n/** 分配数据权限操作 */\r\nfunction handleDataScope(row) {\r\n  reset();\r\n  const deptTreeSelect = getDeptTree(row.roleId);\r\n  getRole(row.roleId).then(response => {\r\n    form.value = response.data;\r\n    openDataScope.value = true;\r\n    nextTick(() => {\r\n      deptTreeSelect.then(res => {\r\n        nextTick(() => {\r\n          if (deptRef.value) {\r\n            deptRef.value.setCheckedKeys(res.checkedKeys);\r\n          }\r\n        });\r\n      });\r\n    });\r\n    title.value = \"分配数据权限\";\r\n  });\r\n}\r\n/** 提交按钮（数据权限） */\r\nfunction submitDataScope() {\r\n  if (form.value.roleId != undefined) {\r\n    form.value.deptIds = getDeptAllCheckedKeys();\r\n    dataScope(form.value).then(response => {\r\n      proxy.$modal.msgSuccess(\"修改成功\");\r\n      openDataScope.value = false;\r\n      getList();\r\n    });\r\n  }\r\n}\r\n/** 取消按钮（数据权限）*/\r\nfunction cancelDataScope() {\r\n  openDataScope.value = false;\r\n  reset();\r\n}\r\n\r\ngetList();\r\n</script>\r\n"],"names":["router","useRouter","proxy","getCurrentInstance","sys_normal_disable","roleList","ref","open","loading","showSearch","ids","single","multiple","total","title","dateRange","menuOptions","menuExpand","menuNodeAll","deptExpand","deptNodeAll","deptOptions","openDataScope","menuRef","deptRef","dataScopeOptions","data","reactive","queryParams","form","rules","toRefs","getList","listRole","response","handleQuery","resetQuery","handleDelete","row","roleIds","delRole","handleExport","handleSelectionChange","selection","item","handleStatusChange","text","changeRoleStatus","handleAuthUser","getMenuTreeselect","menuTreeselect","getDeptAllCheckedKeys","checkedKeys","halfCheckedKeys","reset","handleAdd","handleUpdate","roleId","roleMenu","getRoleMenuTreeselect","getRole","nextTick","res","v","roleMenuTreeselect","getDeptTree","deptTreeSelect","handleCheckedTreeExpand","value","type","treeList","i","handleCheckedTreeNodeAll","handleCheckedTreeConnect","getMenuAllCheckedKeys","submitForm","valid","updateRole","addRole","cancel","dataScopeSelectChange","handleDataScope","submitDataScope","dataScope","cancelDataScope"],"mappings":"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"}
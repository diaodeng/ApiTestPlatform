{"version":3,"file":"resetPwd.Bt6Dg6fy.js","sources":["../../../src/views/system/user/profile/resetPwd.vue"],"sourcesContent":["<template>\r\n   <el-form ref=\"pwdRef\" :model=\"user\" :rules=\"rules\" label-width=\"80px\">\r\n      <el-form-item label=\"旧密码\" prop=\"oldPassword\">\r\n         <el-input v-model=\"user.oldPassword\" placeholder=\"请输入旧密码\" type=\"password\" show-password />\r\n      </el-form-item>\r\n      <el-form-item label=\"新密码\" prop=\"newPassword\">\r\n         <el-input v-model=\"user.newPassword\" placeholder=\"请输入新密码\" type=\"password\" show-password />\r\n      </el-form-item>\r\n      <el-form-item label=\"确认密码\" prop=\"confirmPassword\">\r\n         <el-input v-model=\"user.confirmPassword\" placeholder=\"请确认新密码\" type=\"password\" show-password/>\r\n      </el-form-item>\r\n      <el-form-item>\r\n      <el-button type=\"primary\" @click=\"submit\">保存</el-button>\r\n      <el-button type=\"danger\" @click=\"close\">关闭</el-button>\r\n      </el-form-item>\r\n   </el-form>\r\n</template>\r\n\r\n<script setup>\r\nimport { updateUserPwd } from \"@/api/system/user\";\r\n\r\nconst { proxy } = getCurrentInstance();\r\n\r\nconst user = reactive({\r\n  oldPassword: undefined,\r\n  newPassword: undefined,\r\n  confirmPassword: undefined\r\n});\r\n\r\nconst equalToPassword = (rule, value, callback) => {\r\n  if (user.newPassword !== value) {\r\n    callback(new Error(\"两次输入的密码不一致\"));\r\n  } else {\r\n    callback();\r\n  }\r\n};\r\nconst rules = ref({\r\n  oldPassword: [{ required: true, message: \"旧密码不能为空\", trigger: \"blur\" }],\r\n  newPassword: [{ required: true, message: \"新密码不能为空\", trigger: \"blur\" }, { min: 6, max: 20, message: \"长度在 6 到 20 个字符\", trigger: \"blur\" }],\r\n  confirmPassword: [{ required: true, message: \"确认密码不能为空\", trigger: \"blur\" }, { required: true, validator: equalToPassword, trigger: \"blur\" }]\r\n});\r\n\r\n/** 提交按钮 */\r\nfunction submit() {\r\n  proxy.$refs.pwdRef.validate(valid => {\r\n    if (valid) {\r\n      updateUserPwd(user.oldPassword, user.newPassword).then(response => {\r\n        proxy.$modal.msgSuccess(\"修改成功\");\r\n      });\r\n    }\r\n  });\r\n};\r\n/** 关闭按钮 */\r\nfunction close() {\r\n  proxy.$tab.closePage();\r\n};\r\n</script>\r\n"],"names":["proxy","getCurrentInstance","user","reactive","rules","ref","rule","value","callback","submit","valid","updateUserPwd","response","close"],"mappings":"kLAqBA,KAAM,CAAE,MAAAA,CAAK,EAAKC,IAEZC,EAAOC,EAAS,CACpB,YAAa,OACb,YAAa,OACb,gBAAiB,MACnB,CAAC,EASKC,EAAQC,EAAI,CAChB,YAAa,CAAC,CAAE,SAAU,GAAM,QAAS,UAAW,QAAS,OAAQ,EACrE,YAAa,CAAC,CAAE,SAAU,GAAM,QAAS,UAAW,QAAS,MAAQ,EAAE,CAAE,IAAK,EAAG,IAAK,GAAI,QAAS,iBAAkB,QAAS,OAAQ,EACtI,gBAAiB,CAAC,CAAE,SAAU,GAAM,QAAS,WAAY,QAAS,MAAQ,EAAE,CAAE,SAAU,GAAM,UAVxE,CAACC,EAAMC,EAAOC,IAAa,CAC7CN,EAAK,cAAgBK,EACvBC,EAAS,IAAI,MAAM,YAAY,CAAC,EAEhCA,GAEJ,EAI4H,QAAS,OAAQ,CAC7I,CAAC,EAGD,SAASC,GAAS,CAChBT,EAAM,MAAM,OAAO,SAASU,GAAS,CAC/BA,GACFC,EAAcT,EAAK,YAAaA,EAAK,WAAW,EAAE,KAAKU,GAAY,CACjEZ,EAAM,OAAO,WAAW,MAAM,CACtC,CAAO,CAEP,CAAG,CACH,CAEA,SAASa,GAAQ,CACfb,EAAM,KAAK,WACb"}
import{_ as M}from"./env-selector.Ck8UcPDe.js";import{b as F}from"./forward.BcwXDGVj.js";import{a as O}from"./agent.CW2QP-1A.js";import{j as E}from"./data-template.pUAxcsDo.js";import{av as J,A as L,r as i,w as b,C as $,L as j,d as u,o as s,m as g,f as n,e as a,h as o,i as q,c as y,O as x,P as C}from"./index.N0ypA0wQ.js";const P={style:{display:"flex","flex-direction":"row","flex-grow":"1"}},K={__name:"run-config",props:{configData:{},configDataModifiers:{}},emits:J(["update"],["update:configData"]),setup(N,{emit:U}){const m=L(N,"configData"),k=U,e=i(JSON.parse(JSON.stringify(E))),_=i([]),V=i([]);function B(){F().then(d=>{_.value=d.data})}function I(){O().then(d=>{V.value=d.rows})}b(()=>m.value,d=>{e.value=m.value},{deep:!0}),b(()=>e.value,d=>{e.value.runBySort&&(e.value.concurrent=1),k("update",e.value)},{deep:!0}),$(()=>{m.value&&(e.value=m.value),j(()=>{B(),I()})});const R=i({env:[{required:!0,message:"运行环境不能为空",trigger:"blur"}]});return(d,t)=>{const r=u("el-form-item"),S=u("el-input"),v=u("el-input-number"),f=u("el-option"),p=u("el-select"),c=u("el-checkbox"),w=u("el-col"),A=u("el-row"),D=u("el-form");return s(),g(D,{model:o(e),rules:o(R)},{default:n(()=>[a(r,{label:"测试环境",prop:"env"},{default:n(()=>[a(M,{"selected-env":o(e).env,"onUpdate:selectedEnv":t[0]||(t[0]=l=>o(e).env=l),"selector-width":"100%"},null,8,["selected-env"])]),_:1}),a(r,{label:"报告名称"},{default:n(()=>[a(S,{modelValue:o(e).reportName,"onUpdate:modelValue":t[1]||(t[1]=l=>o(e).reportName=l),autocomplete:"off",placeholder:"报告名称，默认为执行时间"},null,8,["modelValue"])]),_:1}),a(r,{label:"执行次数"},{default:n(()=>[a(v,{min:1,"controls-position":"right",modelValue:o(e).repeatNum,"onUpdate:modelValue":t[2]||(t[2]=l=>o(e).repeatNum=l)},null,8,["modelValue"])]),_:1}),a(r,{label:"同步执行"},{default:n(()=>[a(p,{modelValue:o(e).isAsync,"onUpdate:modelValue":t[3]||(t[3]=l=>o(e).isAsync=l),placeholder:"选择本次执行方式"},{default:n(()=>[a(f,{label:"同步",value:!1}),a(f,{label:"异步",value:!0})]),_:1},8,["modelValue"])]),_:1}),a(r,{label:"并发数量"},{default:n(()=>[a(v,{min:1,"controls-position":"right",modelValue:o(e).concurrent,"onUpdate:modelValue":t[4]||(t[4]=l=>o(e).concurrent=l),placeholder:"输入并发执行的用例数量",disabled:o(e).runBySort},null,8,["modelValue","disabled"])]),_:1}),a(r,{label:"转发配置"},{default:n(()=>[q("div",P,[a(c,{modelValue:o(e).forwardConfig.forward,"onUpdate:modelValue":t[5]||(t[5]=l=>o(e).forwardConfig.forward=l),style:{"margin-right":"20px"}},null,8,["modelValue"]),a(A,{style:{"flex-grow":"1"},gutter:10},{default:n(()=>[a(w,{span:12},{default:n(()=>[a(p,{placeholder:"请选择客户机",modelValue:o(e).forwardConfig.agentId,"onUpdate:modelValue":t[6]||(t[6]=l=>o(e).forwardConfig.agentId=l),clearable:""},{default:n(()=>[(s(!0),y(x,null,C(o(V),l=>(s(),g(f,{key:l.agentId,label:l.agentName,value:l.agentId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(w,{span:12},{default:n(()=>[a(p,{multiple:"",placeholder:"请选择转发规则",modelValue:o(e).forwardConfig.forwardRuleIds,"onUpdate:modelValue":t[7]||(t[7]=l=>o(e).forwardConfig.forwardRuleIds=l)},{default:n(()=>[(s(!0),y(x,null,C(o(_),l=>(s(),g(f,{key:l.ruleId,label:l.ruleName,value:l.ruleId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})])]),_:1}),a(r,{label:"顺序执行"},{default:n(()=>[a(c,{modelValue:o(e).runBySort,"onUpdate:modelValue":t[8]||(t[8]=l=>o(e).runBySort=l)},null,8,["modelValue"])]),_:1}),a(r,{label:"结果通知"},{default:n(()=>[a(c,{modelValue:o(e).push,"onUpdate:modelValue":t[9]||(t[9]=l=>o(e).push=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])}}};export{K as _};
//# sourceMappingURL=run-config.CZpgWmf3.js.map

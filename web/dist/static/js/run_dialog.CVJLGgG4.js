import{av as w,A as m,r as o,e as T,H as k,j as N,o as B,i as u,I as M,f as d,l as f,h as x,n as y,aX as D,au as _}from"./index.DLM0P_FN.js";import{_ as R}from"./run-config.DU_xBo-W.js";import{t as A}from"./run_detail.BJTn3gqP.js";const E={class:"dialog-footer"},L={__name:"run_dialog",props:w({runType:Number,showDialog:{type:Boolean,default:!1}},{dialogVisible:{},dialogVisibleModifiers:{},runIds:{},runIdsModifiers:{}}),emits:["update:dialogVisible","update:runIds"],setup(r){const l=m(r,"dialogVisible"),c=m(r,"runIds");o([]),o([]);const v=r,i=o(!1),n=o(!0),t=o(!1),a=o({ids:c,runType:v.runType,env:null,reportName:null,isAsync:!1,repeatNum:1,concurrent:1,push:!1,forwardConfig:{forward:!1,agentId:void 0,forwardRuleIds:void 0},runBySort:!1});function b(s){try{if(t.value=!0,n.value=!1,a.value.ids=c,a.value.runType=v.runType,a.value.ids.length===0){_.error({message:"请选择要执行的数据",type:"error"}),n.value=!0,t.value=!1;return}i.value=!0,A(a.value).then(e=>{_.success({message:e.msg,type:"success"}),l.value=!1}).finally(()=>{i.value=!1,n.value=!0,t.value=!1})}catch(e){console.log(e)}finally{}}function p(){n.value=!0,l.value=!1}function C(s){n?(s(),l.value=!1):(s(!1),l.value=!0)}function V(s){a.value={...a.value,...s}}return(s,e)=>{const g=T("el-button"),h=k("loading");return B(),N(f(D),{modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=I=>l.value=I),title:"测试确认",width:"500","append-to-body":"",onClose:p,"before-close":C,"close-on-click-modal":!1,"close-on-press-escape":!1},{footer:u(()=>[x("div",E,[d(g,{onClick:p},{default:u(()=>e[1]||(e[1]=[y("取消")])),_:1,__:[1]}),d(g,{disabled:f(t),type:"primary",onClick:b},{default:u(()=>e[2]||(e[2]=[y(" 执行 ")])),_:1,__:[2]},8,["disabled"])])]),default:u(()=>[M(d(R,{onUpdate:V},null,512),[[h,f(i),void 0,{fullscreen:!0,lock:!0}]])]),_:1},8,["modelValue"])}}};export{L as _};
//# sourceMappingURL=run_dialog.CVJLGgG4.js.map

import{af as re,r as u,au as ce,D as we,a0 as Se,d as o,J as me,o as p,c as A,I as q,U as se,h as t,e,f as l,k as be,P as ae,a7 as oe,l as N,p as D,$ as ne,m as J,z as Y,n as Ne,C as he,v as ye,E as De,at as xe,y as Ue,V as ke,S as $e,_ as Me}from"./index.CHnR_MAu.js";import{l as Ve,H as Ie}from"./project.BpVuymad.js";import{_ as Re}from"./run_dialog.B-H1ReCy.js";import{s as qe,l as Oe,g as Le,d as Qe}from"./module.BMNy9Seo.js";import{g as ze}from"./tools.B8u06WSF.js";import{i as Fe}from"./data-template.CF-ivY4r.js";import{l as Ee}from"./case.CZLC1pq4.js";import"./run_detail.CgntWMNI.js";import"./env.jLYomLFD.js";function Ke(_){return re({url:"/qtr/suite/list",method:"get",params:_})}function Te(_){return re({url:"/qtr/suite/"+_,method:"get"})}function Be(_){return re({url:"/qtr/suite",method:"post",data:_})}function Ae(_){return re({url:"/qtr/suite",method:"put",data:_})}function He(_){return re({url:"/qtr/suite/"+_,method:"delete"})}function Ge(_){return re({url:"/qtr/suite/detailList",method:"get",params:_})}function Ce(_){return re({url:"/qtr/suite/addSuiteDetail",method:"post",data:_})}function Je(_){return re({url:"/qtr/suite/editSuiteDetail",method:"put",data:_})}function We(_){return re({url:"/qtr/suite/getSuiteDetail/"+_,method:"get"})}const Xe={class:"app-container"},Ye=he({name:"project"}),Ze=Object.assign(Ye,{props:{suiteId:{},suiteIdModifiers:{}},emits:["update:suiteId"],setup(_,{expose:O}){const{proxy:y}=ye(),{sys_normal_disable:L}=y.useDict("sys_normal_disable"),C=u([]);u(!1);const T=u(!1),P=u(!0);u("");const V=u(!0),$=u(!0);u(!1);const x=u([]),Q=ce(_,"suiteId"),z=u([]),E=we({form:{},queryParams:{projectName:void 0,status:void 0},rules:{projectName:[{required:!0,message:"项目名称不能为空",trigger:"blur"}],orderNum:[{required:!0,message:"显示排序不能为空",trigger:"blur"}]}}),{queryParams:k,form:K,rules:Z}=Se(E);O({getList:M});function M(){T.value=!0,Ve(k.value).then(U=>{C.value=U.data,T.value=!1})}function c(U){x.value=U.map(j=>j.projectId),z.value=x.value,multiple.value=!U.length}function B(){M()}function v(){y.resetForm("queryRef"),B()}function m(U){if(U&&"projectId"in U&&U.projectId&&(z.value=[U.projectId]),!z.value||z.value.length===0){De.alert("请选择项目","提示！",{type:"warning"});return}const j={suiteId:Q.value,dataIds:z.value,dataType:1};Ce(j).then(ee=>{y.$modal.msgSuccess("新增成功"),openProjectCaseDialog.value=!1})}return(U,j)=>{const ee=o("el-input"),W=o("el-form-item"),te=o("el-option"),X=o("el-select"),le=o("el-button"),H=o("el-form"),ue=o("el-col"),h=o("right-toolbar"),n=o("el-row"),a=o("el-table-column"),d=o("dict-tag"),I=o("el-table"),w=me("loading");return p(),A("div",Xe,[q(e(H,{model:t(k),ref:"queryRef",inline:!0},{default:l(()=>[e(W,{label:"项目名称",prop:"projectName"},{default:l(()=>[e(ee,{modelValue:t(k).projectName,"onUpdate:modelValue":j[0]||(j[0]=S=>t(k).projectName=S),placeholder:"请输入项目名称",clearable:"",style:{width:"200px"},onKeyup:be(B,["enter"])},null,8,["modelValue"])]),_:1}),e(W,{label:"状态",prop:"status"},{default:l(()=>[e(X,{modelValue:t(k).status,"onUpdate:modelValue":j[1]||(j[1]=S=>t(k).status=S),placeholder:"项目状态",clearable:"",style:{width:"200px"}},{default:l(()=>[(p(!0),A(ae,null,oe(t(L),S=>(p(),N(te,{key:S.value,label:S.label,value:S.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(W,null,{default:l(()=>[e(le,{type:"primary",icon:"Search",onClick:B},{default:l(()=>[D("搜索")]),_:1}),e(le,{icon:"Refresh",onClick:v},{default:l(()=>[D("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[se,t(P)]]),e(n,{gutter:10,class:"mb8"},{default:l(()=>[e(ue,{span:1.5},{default:l(()=>[e(le,{type:"primary",onClick:m},{default:l(()=>[D("保存")]),_:1})]),_:1}),e(h,{showSearch:t(P),"onUpdate:showSearch":j[2]||(j[2]=S=>ne(P)?P.value=S:null),onQueryTable:M},null,8,["showSearch"])]),_:1}),t($)?q((p(),N(I,{key:0,border:"",data:t(C),style:{width:"100%"},height:"350","row-key":"projectId","default-expand-all":t(V),onSelectionChange:c},{default:l(()=>[e(a,{type:"selection",width:"55",align:"center"}),e(a,{prop:"projectId",label:"ID",width:"150"}),e(a,{prop:"projectName",align:"center",label:"项目名称",width:"200"}),e(a,{prop:"responsibleName",align:"center",label:"负责人",width:"120"}),e(a,{prop:"testUser",label:"测试负责人",align:"center",width:"120"}),e(a,{prop:"devUser",label:"开发负责人",align:"center",width:"120"}),e(a,{prop:"orderNum",label:"排序",align:"center",width:"100"}),e(a,{prop:"status",label:"状态",align:"center",width:"100"},{default:l(S=>[e(d,{options:t(L),value:S.row.status},null,8,["options","value"])]),_:1}),e(a,{label:"创建时间",align:"center",prop:"createTime","class-name":"small-padding fixed-width"},{default:l(S=>[J("span",null,Y(U.parseTime(S.row.createTime)),1)]),_:1}),e(a,{label:"更新时间",align:"center",prop:"updateTime","class-name":"small-padding fixed-width"},{default:l(S=>[J("span",null,Y(U.parseTime(S.row.updateTime)),1)]),_:1})]),_:1},8,["data","default-expand-all"])),[[w,t(T)]]):Ne("",!0)])}}}),et={class:"app-container"},tt={__name:"case-data",props:xe({dataType:{type:Number,default:Ie.case},formRules:{type:Object,default:{caseName:[{required:!0,message:"用例名称不能为空",trigger:"blur"}],projectId:[{required:!0,message:"所属项目不能为空",trigger:"blur"}],moduleId:[{required:!0,message:"所属模块不能为空",trigger:"blur"}]}}},{suiteId:{},suiteIdModifiers:{},openProjectCaseDialog:{},openProjectCaseDialogModifiers:{}}),emits:["update:suiteId","update:openProjectCaseDialog"],setup(_,{expose:O}){const{proxy:y}=ye(),{sys_normal_disable:L}=y.useDict("sys_normal_disable");y.useDict("sys_request_method");const{hrm_data_type:C}=y.useDict("hrm_data_type"),T=ce(_,"suiteId");O({getList:j});const P=_,V=Ue(()=>P.dataType===Ie.case?"用例":"配置");ke("hrm_data_type",C),ke("sys_normal_disable",L);const $=ce(_,"openProjectCaseDialog"),x=u([]),Q=u([]),z=u([]);u(!1);const E=u(!1),k=u(!0),K=u([]),Z=u(!0),M=u(!0),c=u(0);u("");const B=u(!0),v=u([]);u(!1);const m=$e({pageNum:1,pageSize:10,type:P.dataType,caseId:void 0,caseName:void 0,projectId:void 0,moduleId:void 0,status:void 0,onlySelf:B});u(Fe);function U(h){return h||"全局"}function j(){E.value=!0,Ee(m.value).then(h=>{x.value=h.rows,c.value=h.total}).finally(()=>{E.value=!1})}function ee(){Ve(null).then(h=>{Q.value=h.data})}function W(){qe(m.value).then(h=>{z.value=h.data})}function te(){m.value.moduleId=void 0,W()}function X(){m.value.pageNum=1,j()}function le(){y.resetForm("queryRef"),X()}function H(h){K.value=h.map(n=>n.caseId),v.value=K.value,Z.value=h.length!==1,M.value=!h.length}function ue(h){if(h&&"caseId"in h&&h.caseId&&(v.value=[h.caseId]),!v.value||v.value.length===0){De.alert("请选择用例","提示！",{type:"warning"});return}const n={suiteId:T.value,dataIds:v.value,dataType:3};Ce(n).then(a=>{y.$modal.msgSuccess("新增成功"),$.value=!1})}return ee(),(h,n)=>{const a=o("el-option"),d=o("el-select"),I=o("el-form-item"),w=o("el-input"),S=o("el-checkbox"),F=o("el-button"),R=o("el-form"),de=o("el-col"),b=o("right-toolbar"),fe=o("el-row"),f=o("el-table-column"),G=o("dict-tag"),_e=o("el-table"),ge=o("pagination"),pe=me("loading");return p(),A("div",et,[q(e(R,{model:t(m),ref:"queryRef",inline:!0},{default:l(()=>[e(I,{label:"所属项目",prop:"projectId"},{default:l(()=>[e(d,{modelValue:t(m).projectId,"onUpdate:modelValue":n[0]||(n[0]=i=>t(m).projectId=i),placeholder:"请选择",onChange:te,clearable:"",style:{width:"150px"}},{default:l(()=>[(p(!0),A(ae,null,oe(t(Q),i=>(p(),N(a,{key:i.projectId,label:i.projectName,value:i.projectId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(I,{label:"所属模块",prop:"moduleId"},{default:l(()=>[e(d,{modelValue:t(m).moduleId,"onUpdate:modelValue":n[1]||(n[1]=i=>t(m).moduleId=i),placeholder:"请选择",clearable:"",style:{width:"150px"}},{default:l(()=>[(p(!0),A(ae,null,oe(t(z),i=>(p(),N(a,{key:i.moduleId,label:i.moduleName,value:i.moduleId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(I,{label:t(V)+"ID",prop:"caseId"},{default:l(()=>[e(w,{modelValue:t(m).caseId,"onUpdate:modelValue":n[2]||(n[2]=i=>t(m).caseId=i),placeholder:"请输入"+t(V)+"ID",clearable:"",style:{width:"200px"},onKeyup:be(X,["enter"])},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(I,{label:t(V)+"名称",prop:"caseName"},{default:l(()=>[e(w,{modelValue:t(m).caseName,"onUpdate:modelValue":n[3]||(n[3]=i=>t(m).caseName=i),placeholder:"请输入"+t(V)+"名称",clearable:"",style:{width:"200px"},onKeyup:be(X,["enter"])},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(I,{label:"状态",prop:"status"},{default:l(()=>[e(d,{modelValue:t(m).status,"onUpdate:modelValue":n[4]||(n[4]=i=>t(m).status=i),placeholder:t(V)+"状态",clearable:"",style:{width:"100px"}},{default:l(()=>[(p(!0),A(ae,null,oe(t(L),i=>(p(),N(a,{key:i.value,label:i.label,value:i.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1}),e(I,null,{default:l(()=>[e(S,{modelValue:t(B),"onUpdate:modelValue":n[5]||(n[5]=i=>ne(B)?B.value=i:null),onChange:X},{default:l(()=>[D("仅自己的数据")]),_:1},8,["modelValue"])]),_:1}),e(I,null,{default:l(()=>[e(F,{type:"primary",icon:"Search",onClick:X},{default:l(()=>[D("搜索")]),_:1}),e(F,{type:"default",icon:"Refresh",onClick:le},{default:l(()=>[D("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[se,t(k)]]),e(fe,{gutter:10,class:"mb8"},{default:l(()=>[e(de,{span:1.5},{default:l(()=>[e(F,{type:"primary",onClick:ue},{default:l(()=>[D("保存")]),_:1})]),_:1}),e(b,{showSearch:t(k),"onUpdate:showSearch":n[6]||(n[6]=i=>ne(k)?k.value=i:null),onQueryTable:j},null,8,["showSearch"])]),_:1}),q((p(),N(_e,{data:t(x),style:{width:"100%"},height:"350",onSelectionChange:H,border:"","table-layout":"fixed"},{default:l(()=>[e(f,{type:"selection",width:"55",align:"center"}),e(f,{label:t(V)+"ID",prop:"caseId",width:"150px"},null,8,["label"]),e(f,{label:t(V)+"名称",prop:"caseName",width:"auto"},null,8,["label"]),e(f,{label:"所属项目",prop:"projectName"},{default:l(i=>[J("span",null,Y(U(i.row.projectName)),1)]),_:1}),e(f,{label:"所属模块",prop:"moduleName"},{default:l(i=>[J("span",null,Y(U(i.row.moduleName)),1)]),_:1}),e(f,{label:"状态",align:"center",prop:"status",width:"70px"},{default:l(i=>[e(G,{options:t(L),value:i.row.status},null,8,["options","value"])]),_:1}),e(f,{label:"创建人",align:"center",prop:"createBy"}),e(f,{label:"创建时间",align:"center",prop:"createTime","class-name":"small-padding fixed-width",width:"150px"},{default:l(i=>[J("span",null,Y(h.parseTime(i.row.createTime)),1)]),_:1}),e(f,{label:"更新时间",align:"center",prop:"createTime","class-name":"small-padding fixed-width",width:"150px"},{default:l(i=>[J("span",null,Y(h.parseTime(i.row.updateTime)),1)]),_:1})]),_:1},8,["data"])),[[pe,t(E)]]),q(e(ge,{total:t(c),page:t(m).pageNum,"onUpdate:page":n[7]||(n[7]=i=>t(m).pageNum=i),limit:t(m).pageSize,"onUpdate:limit":n[8]||(n[8]=i=>t(m).pageSize=i),onPagination:j},null,8,["total","page","limit"]),[[se,t(c)>0]])])}}},lt={class:"app-container"},at=he({name:"Module"}),ot=Object.assign(at,{props:{suiteId:{},suiteIdModifiers:{}},emits:["update:suiteId"],setup(_,{expose:O}){const{proxy:y}=ye(),{sys_normal_disable:L}=y.useDict("sys_normal_disable"),C=u([]),T=u([]),P=u(!1),V=u(!1),$=u(!0),x=u([]),Q=u(!0),z=u(!0),E=u(0),k=u("");u(!1),u([]);const K=ce(_,"suiteId"),Z=u([]),M=we({form:{testUser:void 0},queryParams:{pageNum:1,pageSize:10,projectId:void 0,moduleName:void 0,status:void 0},rules:{moduleName:[{required:!0,message:"模块名称不能为空",trigger:"blur"}],projectId:[{required:!0,message:"所属项目不能为空",trigger:"blur"}],testUser:[{required:!0,message:"测试负责人不能为空",trigger:"blur"}],sort:[{required:!0,message:"模块顺序不能为空",trigger:"blur"}]}}),{queryParams:c,form:B,rules:v}=Se(M);O({getList:m});function m(){V.value=!0,Oe(c.value).then(n=>{C.value=n.rows,E.value=n.total,V.value=!1})}function U(){Ve(null).then(n=>{T.value=n.data})}function j(n,a,d){return ee(n.projectId)}function ee(n){for(const a of T.value)if(n===a.projectId)return a.projectName}function W(){B.value={moduleId:void 0,projectId:void 0,moduleName:void 0,sort:0,status:"0",remark:void 0},y.resetForm("postRef")}function te(){c.value.pageNum=1,U(),m()}function X(){y.resetForm("queryRef"),te()}function le(n){x.value=n.map(a=>a.moduleId),Z.value=x.value,Q.value=n.length!=1,z.value=!n.length}function H(n){W();const a=n.moduleId||x.value;Le(a).then(d=>{B.value=d.data,P.value=!0,k.value="修改模块"})}function ue(n){const a=n.moduleId||x.value;y.$modal.confirm('是否确认删除模块编号为"'+a+'"的数据项？').then(function(){return Qe(a)}).then(()=>{m(),y.$modal.msgSuccess("删除成功")}).catch(()=>{})}function h(n){if(n&&"projectId"in n&&n.moduleId&&(Z.value=[n.moduleId]),!Z.value||Z.value.length===0){De.alert("请选择模块","提示！",{type:"warning"});return}const a={suiteId:K.value,dataIds:Z.value,dataType:2};Ce(a).then(d=>{y.$modal.msgSuccess("新增成功"),openProjectCaseDialog.value=!1})}return U(),(n,a)=>{const d=o("el-option"),I=o("el-select"),w=o("el-form-item"),S=o("el-input"),F=o("el-button"),R=o("el-form"),de=o("el-col"),b=o("right-toolbar"),fe=o("el-row"),f=o("el-table-column"),G=o("dict-tag"),_e=o("el-table"),ge=o("pagination"),pe=me("hasPermi"),i=me("loading");return p(),A("div",lt,[q(e(R,{model:t(c),ref:"queryRef",inline:!0},{default:l(()=>[e(w,{label:"项目",prop:"projectId"},{default:l(()=>[e(I,{modelValue:t(c).projectId,"onUpdate:modelValue":a[0]||(a[0]=g=>t(c).projectId=g),placeholder:"请选择",clearable:"",style:{width:"150px"}},{default:l(()=>[(p(!0),A(ae,null,oe(t(T),g=>(p(),N(d,{key:g.projectId,label:g.projectName,value:g.projectId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(w,{label:"模块名称",prop:"moduleName"},{default:l(()=>[e(S,{modelValue:t(c).moduleName,"onUpdate:modelValue":a[1]||(a[1]=g=>t(c).moduleName=g),placeholder:"请输入模块名称",clearable:"",style:{width:"200px"},onKeyup:be(te,["enter"])},null,8,["modelValue"])]),_:1}),e(w,{label:"状态",prop:"status"},{default:l(()=>[e(I,{modelValue:t(c).status,"onUpdate:modelValue":a[2]||(a[2]=g=>t(c).status=g),placeholder:"模块状态",clearable:"",style:{width:"200px"}},{default:l(()=>[(p(!0),A(ae,null,oe(t(L),g=>(p(),N(d,{key:g.value,label:g.label,value:g.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(w,null,{default:l(()=>[e(F,{type:"primary",icon:"Search",onClick:te},{default:l(()=>[D("搜索")]),_:1}),e(F,{icon:"Refresh",onClick:X},{default:l(()=>[D("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[se,t($)]]),e(fe,{gutter:10,class:"mb8"},{default:l(()=>[e(de,{span:1.5},{default:l(()=>[e(F,{type:"primary",onClick:h},{default:l(()=>[D("保存")]),_:1})]),_:1}),e(b,{showSearch:t($),"onUpdate:showSearch":a[3]||(a[3]=g=>ne($)?$.value=g:null),onQueryTable:m},null,8,["showSearch"])]),_:1}),q((p(),N(_e,{border:"",data:t(C),style:{width:"100%"},height:"350",onSelectionChange:le},{default:l(()=>[e(f,{type:"selection",width:"55",align:"center"}),e(f,{label:"模块ID",align:"center",prop:"moduleId"}),e(f,{label:"模块名称",align:"center",prop:"moduleName"}),e(f,{label:"所属项目",align:"center",formatter:j}),e(f,{label:"测试人员",align:"center",prop:"testUser"}),e(f,{label:"模块排序",align:"center",prop:"sort"}),e(f,{label:"状态",align:"center",prop:"status"},{default:l(g=>[e(G,{options:t(L),value:g.row.status},null,8,["options","value"])]),_:1}),e(f,{label:"创建时间",align:"center",prop:"createTime","class-name":"small-padding fixed-width"},{default:l(g=>[J("span",null,Y(n.parseTime(g.row.createTime)),1)]),_:1}),e(f,{label:"更新时间",align:"center",prop:"createTime","class-name":"small-padding fixed-width"},{default:l(g=>[J("span",null,Y(n.parseTime(g.row.updateTime)),1)]),_:1}),e(f,{label:"操作",width:"180",align:"center","class-name":"small-padding fixed-width"},{default:l(g=>[q((p(),N(F,{link:"",type:"primary",icon:"Edit",onClick:ve=>H(g.row)},{default:l(()=>[D(" 修改 ")]),_:2},1032,["onClick"])),[[pe,["hrm:module:edit"]]]),q((p(),N(F,{link:"",type:"primary",icon:"Delete",onClick:ve=>ue(g.row)},{default:l(()=>[D("删除 ")]),_:2},1032,["onClick"])),[[pe,["hrm:module:remove"]]])]),_:1})]),_:1},8,["data"])),[[i,t(V)]]),q(e(ge,{total:t(E),page:t(c).pageNum,"onUpdate:page":a[4]||(a[4]=g=>t(c).pageNum=g),limit:t(c).pageSize,"onUpdate:limit":a[5]||(a[5]=g=>t(c).pageSize=g),onPagination:m},null,8,["total","page","limit"]),[[se,t(E)>0]])])}}}),nt=he({__name:"config-suite-data-dialog",props:{openConfigSuiteDataDialog:{},openConfigSuiteDataDialogModifiers:{},suiteId:{},suiteIdModifiers:{}},emits:xe(["close-dialog"],["update:openConfigSuiteDataDialog","update:suiteId"]),setup(_,{emit:O}){const y=ce(_,"openConfigSuiteDataDialog"),L=ce(_,"suiteId"),C=u("Case"),T=u(null),P=u(null),V=u(null),$=(x,Q)=>{x.props.name==="Case"?T.value.getList():x.props.name==="Module"?P.value.getList():x.props.name==="Project"&&V.value.getList()};return(x,Q)=>{const z=o("el-tab-pane"),E=o("el-tabs"),k=o("el-dialog");return p(),N(k,{modelValue:y.value,"onUpdate:modelValue":Q[1]||(Q[1]=K=>y.value=K),width:"1200",title:"套件数据配置","append-to-body":"","destroy-on-close":"",draggable:"",overflow:"","close-on-click-modal":!1,onClosed:Q[2]||(Q[2]=K=>x.$emit("close-dialog"))},{default:l(()=>[e(E,{modelValue:C.value,"onUpdate:modelValue":Q[0]||(Q[0]=K=>C.value=K),class:"demo-tabs",onTabClick:$},{default:l(()=>[e(z,{label:"Case",name:"Case"},{default:l(()=>[e(tt,{suiteId:L.value,ref_key:"callCase",ref:T},null,8,["suiteId"])]),_:1}),e(z,{label:"Module",name:"Module"},{default:l(()=>[e(ot,{suiteId:L.value,ref_key:"callModule",ref:P},null,8,["suiteId"])]),_:1}),e(z,{label:"Project",name:"Project"},{default:l(()=>[e(Ze,{suiteId:L.value,ref_key:"callProject",ref:V},null,8,["suiteId"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])}}}),ut=Me(nt,[["__scopeId","data-v-f21b80ec"]]),dt={class:"app-container"},it=he({name:"SuiteDetail"}),st=Object.assign(it,{props:{suiteId:{},suiteIdModifiers:{},openSuiteDetailDialog:{},openSuiteDetailDialogModifiers:{}},emits:["update:suiteId","update:openSuiteDetailDialog"],setup(_){const O=ce(_,"suiteId"),{proxy:y}=ye(),{sys_normal_disable:L}=y.useDict("sys_normal_disable"),C=u(!0),T=u(!1),P=u(!1),V=u(!1),$=u(0),x=u(0),Q=u([]),z=u([]),E=u([]),k=u([]),K=u(!0),Z=u(!0),M=u([]),c=we({form:{},queryParams:{dataName:void 0,projectId:void 0,suiteDetailId:void 0,suiteId:O,dataId:void 0,moduleId:void 0,pageNum:1,pageSize:10,status:void 0}}),B=ce(_,"openSuiteDetailDialog"),{queryParams:v,form:m}=Se(c);function U(n){M.value=n.map(a=>a.suiteDetailId)}function j(){H()}function ee(){y.resetForm("queryRef_detail"),j()}function W(){x.value=O.value,T.value=!0}function te(){Ve(null).then(n=>{E.value=n.data})}function X(){qe(v.value).then(n=>{k.value=n.data})}function le(){v.value.moduleId=void 0,X()}function H(){P.value=!0,Ge(v.value).then(n=>{Q.value=n.rows,z.value=n.rows.map(a=>{let d=a.find(b=>b.dataType!==void 0).dataType,I=ze(Ie,d),w=a.find(b=>b.projectName!==void 0),S=a.find(b=>b.moduleName!==void 0),F=a.find(b=>b.caseName!==void 0),R;return w.projectName!==null?R=w.projectName:S.moduleName!==null?R=S.moduleName:F.caseName!==null&&(R=F.caseName),{suiteDetailId:a.find(b=>b.suiteDetailId!==void 0).suiteDetailId,suiteId:a.find(b=>b.suiteId!==void 0).suiteId,dataId:a.find(b=>b.dataId!==void 0).dataId,dataType:I,dataName:R,status:a.find(b=>b.status!==void 0).status,createTime:a.find(b=>b.createTime!==void 0).createTime,updateTime:a.find(b=>b.updateTime!==void 0).updateTime,total:n.total}}),$.value=n.total}).finally(()=>{P.value=!1})}function ue(){Q.value=[]}function h(n){V.value=!0,We(n.suiteDetailId).then(a=>{if(!a.data||Object.keys(a.data).length===0){alert("未查到对应数据！");return}a.data.status=n.status,Je(a.data).then(d=>{y.$modal.msgSuccess("修改成功")})}).finally(()=>{V.value=!1})}return te(),H(),(n,a)=>{const d=o("el-option"),I=o("el-select"),w=o("el-form-item"),S=o("el-input"),F=o("el-button"),R=o("el-form"),de=o("el-col"),b=o("right-toolbar"),fe=o("el-row"),f=o("el-table-column"),G=o("dict-tag"),_e=o("el-switch"),ge=o("el-table"),pe=o("pagination"),i=o("el-dialog"),g=me("hasPermi"),ve=me("loading");return p(),N(i,{fullscreen:"",suiteId:O.value,modelValue:B.value,"onUpdate:modelValue":a[9]||(a[9]=s=>B.value=s),"append-to-body":"","destroy-on-close":"",onClose:ue,onOpen:H},{default:l(()=>[J("div",dt,[q(e(R,{model:t(v),ref:"queryRef_detail",inline:!0},{default:l(()=>[e(w,{label:"所属项目",prop:"projectId"},{default:l(()=>[e(I,{modelValue:t(v).projectId,"onUpdate:modelValue":a[0]||(a[0]=s=>t(v).projectId=s),placeholder:"请选择",onChange:le,clearable:"",style:{width:"150px"}},{default:l(()=>[(p(!0),A(ae,null,oe(t(E),s=>(p(),N(d,{key:s.projectId,label:s.projectName,value:s.projectId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(w,{label:"所属模块",prop:"moduleId"},{default:l(()=>[e(I,{modelValue:t(v).moduleId,"onUpdate:modelValue":a[1]||(a[1]=s=>t(v).moduleId=s),placeholder:"请选择",clearable:"",style:{width:"150px"}},{default:l(()=>[(p(!0),A(ae,null,oe(t(k),s=>(p(),N(d,{key:s.moduleId,label:s.moduleName,value:s.moduleId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),D("、 "),e(w,{label:"数据ID",prop:"dataId"},{default:l(()=>[e(S,{modelValue:t(v).dataId,"onUpdate:modelValue":a[2]||(a[2]=s=>t(v).dataId=s),placeholder:"请输入数据ID",clearable:"",style:{width:"200px"},onKeyup:be(j,["enter"])},null,8,["modelValue"])]),_:1}),e(w,{label:"数据名称",prop:"dataName"},{default:l(()=>[e(S,{modelValue:t(v).dataName,"onUpdate:modelValue":a[3]||(a[3]=s=>t(v).dataName=s),placeholder:"请输入数据名称",clearable:"",style:{width:"200px"},onKeyup:be(j,["enter"])},null,8,["modelValue"])]),_:1}),e(w,{label:"数据状态",prop:"status"},{default:l(()=>[e(I,{modelValue:t(v).status,"onUpdate:modelValue":a[4]||(a[4]=s=>t(v).status=s),placeholder:"数据状态",clearable:"",style:{width:"200px"}},{default:l(()=>[(p(!0),A(ae,null,oe(t(L),s=>(p(),N(d,{key:s.value,label:s.label,value:s.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(w,null,{default:l(()=>[e(F,{type:"primary",icon:"Search",onClick:j},{default:l(()=>[D("搜索")]),_:1}),e(F,{type:"success",icon:"Refresh",onClick:ee},{default:l(()=>[D("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[se,t(C)]]),e(fe,{gutter:10,class:"mb8"},{default:l(()=>[e(de,{span:1.5},{default:l(()=>[e(F,{type:"warning",icon:"Plus",onClick:W},{default:l(()=>[D("选择数据")]),_:1})]),_:1}),e(b,{showSearch:t(C),"onUpdate:showSearch":a[5]||(a[5]=s=>ne(C)?C.value=s:null),onQueryTable:H},null,8,["showSearch"])]),_:1})]),t(K)?q((p(),N(ge,{key:0,border:"",data:t(z),"row-key":"suiteDetailId","default-expand-all":t(Z),onSelectionChange:U},{default:l(()=>[e(f,{type:"selection",width:"55",align:"center"}),e(f,{prop:"suiteDetailId",label:"ID",width:"160",align:"center"}),e(f,{prop:"suiteId",label:"套件ID",width:"160",align:"center"}),e(f,{prop:"dataId",label:"数据ID",width:"160",align:"center"}),e(f,{prop:"dataType",label:"数据类型",width:"100",align:"center"}),e(f,{prop:"dataName",label:"数据名称"}),e(f,{prop:"status",label:"状态",width:"100",align:"center"},{default:l(s=>[e(G,{options:t(L),value:s.row.status},null,8,["options","value"])]),_:1}),e(f,{label:"创建时间",align:"center",prop:"createTime",width:"160","class-name":"small-padding fixed-width"},{default:l(s=>[J("span",null,Y(n.parseTime(s.row.createTime)),1)]),_:1}),e(f,{label:"更新时间",align:"center",prop:"updateTime",width:"160","class-name":"small-padding fixed-width"},{default:l(s=>[J("span",null,Y(n.parseTime(s.row.updateTime)),1)]),_:1}),e(f,{label:"操作",width:"170",align:"center","class-name":"small-padding fixed-width",fixed:"right"},{default:l(s=>[e(_e,{modelValue:s.row.status,"onUpdate:modelValue":ie=>s.row.status=ie,"active-value":"0","active-text":"启用","inactive-value":"1","inactive-text":"停用",onChange:ie=>h(s.row),loading:t(V)},null,8,["modelValue","onUpdate:modelValue","onChange","loading"]),q(e(F,{link:"",type:"danger",icon:"Delete",onClick:ie=>n.handleDelete(s.row),title:"删除"},null,8,["onClick"]),[[g,["qtr:suite:remove"]]])]),_:1})]),_:1},8,["data","default-expand-all"])),[[ve,t(P)]]):Ne("",!0),q(e(pe,{total:t($),page:t(v).pageNum,"onUpdate:page":a[6]||(a[6]=s=>t(v).pageNum=s),limit:t(v).pageSize,"onUpdate:limit":a[7]||(a[7]=s=>t(v).pageSize=s),onPagination:H},null,8,["total","page","limit"]),[[se,t($)>0]]),e(ut,{"form-datas":t(m),suiteId:t(x),onCloseDialog:H,"open-config-suite-data-dialog":t(T),"onUpdate:openConfigSuiteDataDialog":a[8]||(a[8]=s=>ne(T)?T.value=s:null)},null,8,["form-datas","suiteId","open-config-suite-data-dialog"])]),_:1},8,["suiteId","modelValue"])}}}),rt={class:"app-container"},pt={class:"dialog-footer"},ct=he({name:"Suite"}),wt=Object.assign(ct,{setup(_){const{proxy:O}=ye(),{sys_normal_disable:y}=O.useDict("sys_normal_disable"),L=u([]),C=u(!1),T=u(!1),P=u(!0),V=u(!0),$=u(""),x=u(0),Q=u(!0),z=u(!0),E=u(0),k=u(!1),K=u([]),Z=we({form:{},queryParams:{pageNum:1,pageSize:10,suiteName:void 0,status:void 0},rules:{suiteName:[{required:!0,message:"套件名称不能为空",trigger:"blur"}],orderNum:[{required:!0,message:"显示排序不能为空",trigger:"blur"}]}}),{queryParams:M,form:c,rules:B}=Se(Z),v=Ue(()=>$.value);function m(){P.value=!0,Ke(M.value).then(a=>{L.value=a.rows,E.value=a.total,P.value=!1})}function U(a){K.value=a.map(d=>d.suiteId)}function j(){C.value=!1,ee()}function ee(){c.value={suiteId:void 0,suiteName:void 0,orderNum:0,simpleDesc:void 0,status:"0"},O.resetForm("suiteRef")}function W(){m()}function te(){O.resetForm("queryRef"),W()}function X(a){ee(),C.value=!0,$.value="添加套件"}function le(a){const d=a.suiteId;Te(d).then(I=>{if(!I.data||Object.keys(I.data).length===0){alert("未查到对应数据！");return}c.value=I.data,T.value=!0,x.value=a.suiteId,$.value="配置套件【"+I.data.suiteName+"】"})}function H(a){ee(),Te(a.suiteId).then(d=>{if(!d.data||Object.keys(d.data).length===0){alert("未查到对应数据！");return}c.value=d.data,C.value=!0,$.value="修改套件"})}function ue(){O.$refs.suiteRef.validate(a=>{a&&(c.value.suiteId!=null?Ae(c.value).then(d=>{O.$modal.msgSuccess("修改成功"),C.value=!1,m()}):Be(c.value).then(d=>{O.$modal.msgSuccess("新增成功"),C.value=!1,m()}))})}function h(a){O.$modal.confirm('是否确认删除名称为"'+a.suiteName+'"的数据项?').then(function(){return He(a.suiteId)}).then(()=>{m(),O.$modal.msgSuccess("删除成功")}).catch(()=>{})}function n(a){if(a&&"suiteId"in a&&a.suiteId&&(K.value=[a.suiteId]),!K.value||K.value.length===0){De.alert("请选择要运行的套件","提示！",{type:"warning"});return}k.value=!0}return m(),(a,d)=>{const I=o("el-input"),w=o("el-form-item"),S=o("el-option"),F=o("el-select"),R=o("el-button"),de=o("el-form"),b=o("el-col"),fe=o("right-toolbar"),f=o("el-row"),G=o("el-table-column"),_e=o("dict-tag"),ge=o("el-table"),pe=o("pagination"),i=o("el-input-number"),g=o("el-radio"),ve=o("el-radio-group"),s=o("el-dialog"),ie=me("hasPermi"),Pe=me("loading");return p(),A("div",rt,[q(e(de,{model:t(M),ref:"queryRef",inline:!0},{default:l(()=>[e(w,{label:"套件名称",prop:"suiteName"},{default:l(()=>[e(I,{modelValue:t(M).suiteName,"onUpdate:modelValue":d[0]||(d[0]=r=>t(M).suiteName=r),placeholder:"请输入套件名称",clearable:"",style:{width:"200px"},onKeyup:be(W,["enter"])},null,8,["modelValue"])]),_:1}),e(w,{label:"状态",prop:"status"},{default:l(()=>[e(F,{modelValue:t(M).status,"onUpdate:modelValue":d[1]||(d[1]=r=>t(M).status=r),placeholder:"套件状态",clearable:"",style:{width:"200px"}},{default:l(()=>[(p(!0),A(ae,null,oe(t(y),r=>(p(),N(S,{key:r.value,label:r.label,value:r.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(w,null,{default:l(()=>[e(R,{type:"primary",icon:"Search",onClick:W},{default:l(()=>[D("搜索")]),_:1}),e(R,{icon:"Refresh",onClick:te},{default:l(()=>[D("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[se,t(V)]]),e(f,{gutter:10,class:"mb8"},{default:l(()=>[e(b,{span:1.5},{default:l(()=>[q((p(),N(R,{type:"primary",plain:"",icon:"Plus",onClick:X},{default:l(()=>[D("新增 ")]),_:1})),[[ie,["qtr:suite:add"]]]),q((p(),N(R,{type:"warning",icon:"CaretRight",onClick:n,title:"运行"},{default:l(()=>[D("执行 ")]),_:1})),[[ie,["hrm:case:run"]]])]),_:1}),e(fe,{showSearch:t(V),"onUpdate:showSearch":d[2]||(d[2]=r=>ne(V)?V.value=r:null),onQueryTable:m},null,8,["showSearch"])]),_:1}),t(z)?q((p(),N(ge,{key:0,border:"",data:t(L),"row-key":"suiteId","default-expand-all":t(Q),onSelectionChange:U},{default:l(()=>[e(G,{type:"selection",width:"55",align:"center"}),e(G,{prop:"suiteId",label:"ID",width:"160"}),e(G,{prop:"suiteName",label:"套件名称",width:"200"}),D("\\ "),e(G,{prop:"orderNum",label:"排序",width:"200"}),e(G,{prop:"status",label:"状态",width:"100"},{default:l(r=>[e(_e,{options:t(y),value:r.row.status},null,8,["options","value"])]),_:1}),e(G,{label:"创建时间",align:"center",prop:"createTime","class-name":"small-padding fixed-width"},{default:l(r=>[J("span",null,Y(a.parseTime(r.row.createTime)),1)]),_:1}),e(G,{label:"更新时间",align:"center",prop:"updateTime","class-name":"small-padding fixed-width"},{default:l(r=>[J("span",null,Y(a.parseTime(r.row.updateTime)),1)]),_:1}),e(G,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:l(r=>[q((p(),N(R,{link:"",type:"primary",icon:"Edit",onClick:je=>H(r.row)},{default:l(()=>[D(" 修改 ")]),_:2},1032,["onClick"])),[[ie,["qtr:suite:edit"]]]),q((p(),N(R,{link:"",type:"primary",icon:"Tools",onClick:je=>le(r.row)},{default:l(()=>[D(" 配置 ")]),_:2},1032,["onClick"])),[[ie,["qtr:suite:edit"]]]),q((p(),N(R,{link:"",type:"primary",icon:"Delete",onClick:je=>h(r.row)},{default:l(()=>[D(" 删除 ")]),_:2},1032,["onClick"])),[[ie,["qtr:suite:remove"]]])]),_:1})]),_:1},8,["data","default-expand-all"])),[[Pe,t(P)]]):Ne("",!0),q(e(pe,{total:t(E),page:t(M).pageNum,"onUpdate:page":d[3]||(d[3]=r=>t(M).pageNum=r),limit:t(M).pageSize,"onUpdate:limit":d[4]||(d[4]=r=>t(M).pageSize=r),onPagination:m},null,8,["total","page","limit"]),[[se,t(E)>0]]),e(s,{title:t($),modelValue:t(C),"onUpdate:modelValue":d[9]||(d[9]=r=>ne(C)?C.value=r:null),"append-to-body":""},{footer:l(()=>[J("div",pt,[e(R,{type:"primary",onClick:ue},{default:l(()=>[D("确 定")]),_:1}),e(R,{onClick:j},{default:l(()=>[D("取 消")]),_:1})])]),default:l(()=>[e(de,{ref:"suiteRef",model:t(c),rules:t(B),"label-width":"80px"},{default:l(()=>[e(f,null,{default:l(()=>[e(b,{span:12},{default:l(()=>[e(w,{label:"套件名称",prop:"suiteName"},{default:l(()=>[e(I,{modelValue:t(c).suiteName,"onUpdate:modelValue":d[5]||(d[5]=r=>t(c).suiteName=r),placeholder:"请输入套件名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(b,{span:12},{default:l(()=>[e(w,{label:"显示排序",prop:"orderNum"},{default:l(()=>[e(i,{modelValue:t(c).orderNum,"onUpdate:modelValue":d[6]||(d[6]=r=>t(c).orderNum=r),"controls-position":"right",min:0},null,8,["modelValue"])]),_:1})]),_:1}),e(b,{span:12},{default:l(()=>[e(w,{label:"套件描述",prop:"simpleDesc"},{default:l(()=>[e(I,{modelValue:t(c).simpleDesc,"onUpdate:modelValue":d[7]||(d[7]=r=>t(c).simpleDesc=r),placeholder:"请输入描述",maxlength:"400"},null,8,["modelValue"])]),_:1})]),_:1}),e(b,{span:12},{default:l(()=>[e(w,{label:"套件状态"},{default:l(()=>[e(ve,{modelValue:t(c).status,"onUpdate:modelValue":d[8]||(d[8]=r=>t(c).status=r)},{default:l(()=>[(p(!0),A(ae,null,oe(t(y),r=>(p(),N(g,{key:r.value,value:r.value},{default:l(()=>[D(Y(r.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"]),e(Re,{"dialog-visible":t(k),"onUpdate:dialogVisible":d[10]||(d[10]=r=>ne(k)?k.value=r:null),"run-type":t(Ie).suite,"run-ids":t(K)},null,8,["dialog-visible","run-type","run-ids"]),e(st,{"form-datas":t(c),"open-suite-detail-dialog":t(T),"onUpdate:openSuiteDetailDialog":d[11]||(d[11]=r=>ne(T)?T.value=r:null),title:t(v),suiteId:t(x),"show-close":"","destroy-on-close":!0},null,8,["form-datas","open-suite-detail-dialog","title","suiteId"])])}}});export{wt as default};

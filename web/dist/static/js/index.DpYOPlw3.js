import{g as J,u as K,a as L,d as M}from"./project.DdvPERQ7.js";import{R as G,S as W}from"./enum.Cve1eJHF.js";import{_ as X}from"./run_dialog.DpBuEVxn.js";import{_ as Y}from"./project-table-query.DHBG36L_.js";import{r as s,J as Z,N as ee,d,H as le,o as g,c as w,e,f as t,I as V,m as C,p as b,h as a,i as te,O as oe,P as ae,y as ne,K as D,F as re,s as ue,E as se}from"./index.N0ypA0wQ.js";import"./run-config.CZpgWmf3.js";import"./env-selector.Ck8UcPDe.js";import"./env.CsFNKyYM.js";import"./forward.BcwXDGVj.js";import"./agent.CW2QP-1A.js";import"./data-template.pUAxcsDo.js";import"./tools.fhJnEm5t.js";import"./run_detail.BRg85oWr.js";const de={class:"app-container"},pe={class:"dialog-footer"},ie=re({name:"project"}),xe=Object.assign(ie,{setup(me){const{proxy:m}=ue(),{qtr_data_status:I}=m.useDict("qtr_data_status"),j=s(null);s(0);const i=s(!1),h=s(!1);s(!0);const N=s("");s(!0),s(!0);const y=s(!1),_=s([]),R=Z({form:{},queryParams:{projectName:void 0,status:void 0,pageNum:1,pageSize:10},rules:{projectName:[{required:!0,message:"项目名称不能为空",trigger:"blur"}],orderNum:[{required:!0,message:"显示排序不能为空",trigger:"blur"}]}}),{queryParams:fe,form:n,rules:P}=ee(R);function S(r){_.value=r.map(l=>l.projectId)}function $(){i.value=!1,k()}function k(){n.value={projectId:void 0,projectName:void 0,orderNum:0,simpleDesc:void 0,status:W.normal.value},m.resetForm("projectRef")}function q(r){k(),i.value=!0,N.value="添加项目"}function E(r){h.value=!0,k(),J(r.projectId).then(l=>{n.value=l.data,i.value=!0,N.value="修改项目"}).finally(()=>{h.value=!1})}function B(){m.$refs.projectRef.validate(r=>{r&&(n.value.projectId!=null?K(n.value).then(l=>{m.$modal.msgSuccess("修改成功"),i.value=!1,j.value.handleQuery()}):L(n.value).then(l=>{m.$modal.msgSuccess("新增成功"),i.value=!1,j.value.handleQuery()}))})}function Q(r){m.$modal.confirm('是否确认删除名称为"'+r.projectName+'"的数据项?').then(function(){return M(r.projectId)}).then(()=>{j.value.handleQuery(),m.$modal.msgSuccess("删除成功")}).catch(()=>{})}function U(r){if(r&&"projectId"in r&&r.projectId&&(_.value=[r.projectId]),!_.value||_.value.length===0){se.alert("请选择要运行的项目","提示！",{type:"warning"});return}y.value=!0}return(r,l)=>{const f=d("el-button"),u=d("el-col"),c=d("el-input"),p=d("el-form-item"),A=d("el-input-number"),F=d("el-radio"),O=d("el-radio-group"),T=d("el-row"),z=d("el-form"),H=d("el-dialog"),v=le("hasPermi");return g(),w("div",de,[e(Y,{onSelectChange:S,ref_key:"projectQueryViewRef",ref:j},{"table-tool":t(()=>[e(u,{span:1.5},{default:t(()=>[V((g(),C(f,{type:"primary",plain:"",icon:"Plus",onClick:q},{default:t(()=>l[11]||(l[11]=[b("新增 ")])),_:1})),[[v,["hrm:project:add"]]])]),_:1}),e(u,{span:1.5},{default:t(()=>[V((g(),C(f,{type:"warning",icon:"CaretRight",onClick:U,title:"运行"},{default:t(()=>l[12]||(l[12]=[b(" 执行 ")])),_:1})),[[v,["hrm:case:run"]]])]),_:1})]),tableOperate:t(({scope:o})=>[V(e(f,{link:"",type:"primary",icon:"Edit",loading:a(h),onClick:x=>E(o.row),title:"修改"},null,8,["loading","onClick"]),[[v,["hrm:project:edit"]]]),V(e(f,{link:"",type:"warning",icon:"CaretRight",onClick:x=>U(o.row),title:"运行"},null,8,["onClick"]),[[v,["hrm:case:run"]]]),V(e(f,{link:"",type:"primary",icon:"Delete",onClick:x=>Q(o.row),title:"修改"},null,8,["onClick"]),[[v,["hrm:project:remove"]]])]),_:1},512),e(H,{title:a(N),modelValue:a(i),"onUpdate:modelValue":l[9]||(l[9]=o=>D(i)?i.value=o:null),width:"800px","append-to-body":""},{footer:t(()=>[te("div",pe,[e(f,{type:"primary",onClick:B},{default:t(()=>l[13]||(l[13]=[b("确 定")])),_:1}),e(f,{onClick:$},{default:t(()=>l[14]||(l[14]=[b("取 消")])),_:1})])]),default:t(()=>[e(z,{ref:"projectRef",model:a(n),rules:a(P),"label-width":"90px"},{default:t(()=>[e(T,null,{default:t(()=>[e(u,{span:12},{default:t(()=>[e(p,{label:"项目名称",prop:"projectName"},{default:t(()=>[e(c,{modelValue:a(n).projectName,"onUpdate:modelValue":l[0]||(l[0]=o=>a(n).projectName=o),placeholder:"请输入项目名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(p,{label:"显示排序",prop:"orderNum"},{default:t(()=>[e(A,{modelValue:a(n).orderNum,"onUpdate:modelValue":l[1]||(l[1]=o=>a(n).orderNum=o),"controls-position":"right",min:0},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(p,{label:"项目负责人",prop:"responsibleName"},{default:t(()=>[e(c,{modelValue:a(n).responsibleName,"onUpdate:modelValue":l[2]||(l[2]=o=>a(n).responsibleName=o),placeholder:"请输入负责人",maxlength:"20"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(p,{label:"测试负责人",prop:"testUser"},{default:t(()=>[e(c,{modelValue:a(n).testUser,"onUpdate:modelValue":l[3]||(l[3]=o=>a(n).testUser=o),placeholder:"请输入测试负责人",maxlength:"25"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(p,{label:"开发负责人",prop:"devUser"},{default:t(()=>[e(c,{modelValue:a(n).devUser,"onUpdate:modelValue":l[4]||(l[4]=o=>a(n).devUser=o),placeholder:"请输入开发负责人",maxlength:"20"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(p,{label:"发布应用",prop:"publishApp"},{default:t(()=>[e(c,{modelValue:a(n).publishApp,"onUpdate:modelValue":l[5]||(l[5]=o=>a(n).publishApp=o),placeholder:"请输入发布应用",maxlength:"20"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(p,{label:"简要描述",prop:"simpleDesc"},{default:t(()=>[e(c,{type:"textarea",rows:4,modelValue:a(n).simpleDesc,"onUpdate:modelValue":l[6]||(l[6]=o=>a(n).simpleDesc=o),placeholder:"简要描述",maxlength:"100"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(p,{label:"其他信息",prop:"otherDesc"},{default:t(()=>[e(c,{type:"textarea",rows:4,modelValue:a(n).otherDesc,"onUpdate:modelValue":l[7]||(l[7]=o=>a(n).otherDesc=o),placeholder:"其他信息",maxlength:"100"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(p,{label:"项目状态"},{default:t(()=>[e(O,{modelValue:a(n).status,"onUpdate:modelValue":l[8]||(l[8]=o=>a(n).status=o)},{default:t(()=>[(g(!0),w(oe,null,ae(a(I),o=>(g(),C(F,{key:o.value*1,value:o.value*1},{default:t(()=>[b(ne(o.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"]),e(X,{"dialog-visible":a(y),"onUpdate:dialogVisible":l[10]||(l[10]=o=>D(y)?y.value=o:null),"run-type":a(G).project,"run-ids":a(_)},null,8,["dialog-visible","run-type","run-ids"])])}}});export{xe as default};
//# sourceMappingURL=index.DpYOPlw3.js.map

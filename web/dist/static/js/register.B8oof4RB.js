import{_ as R,r as f,d as u,o as _,c as w,e as s,f as r,h as t,i as n,a as E,j as P,l as h,m as U,n as z,q as B,p as T,t as K,E as N,s as I}from"./index.D1UU-JKR.js";import{_ as M}from"./login-logo.bEKJr-iY.js";const $={class:"register"},j={class:"register-code"},A=["src"],F={key:0},H={key:1},L={style:{float:"right"}},Q={__name:"register",setup(S){const x=E(),{proxy:V}=I(),o=f({username:"",password:"",confirmPassword:"",code:"",uuid:""}),b={username:[{required:!0,trigger:"blur",message:"请输入您的账号"},{min:2,max:20,message:"用户账号长度必须介于 2 和 20 之间",trigger:"blur"}],password:[{required:!0,trigger:"blur",message:"请输入您的密码"},{min:5,max:20,message:"用户密码长度必须介于 5 和 20 之间",trigger:"blur"}],confirmPassword:[{required:!0,trigger:"blur",message:"请再次输入您的密码"},{required:!0,validator:(l,e,a)=>{o.value.password!==e?a(new Error("两次输入的密码不一致")):a()},trigger:"blur"}],code:[{required:!0,trigger:"change",message:"请输入验证码"}]},y=f(""),c=f(!1),p=f(!0);function m(){V.$refs.registerRef.validate(l=>{l&&(c.value=!0,K(o.value).then(e=>{const a=o.value.username;N.alert("<font color='red'>恭喜你，您的账号 "+a+" 注册成功！</font>","系统提示",{dangerouslyUseHTMLString:!0,type:"success"}).then(()=>{x.push("/login")}).catch(()=>{})}).catch(()=>{c.value=!1,p&&v()}))})}function v(){P().then(l=>{p.value=l.captchaEnabled===void 0?!0:l.captchaEnabled,p.value&&(y.value="data:image/gif;base64,"+l.img,o.value.uuid=l.uuid)})}return v(),(l,e)=>{const a=u("svg-icon"),g=u("el-input"),d=u("el-form-item"),k=u("el-button"),C=u("router-link"),q=u("el-form");return _(),w("div",$,[s(q,{ref:"registerRef",model:t(o),rules:b,class:"register-form"},{default:r(()=>[e[5]||(e[5]=n("div",{class:"title-container"},[n("img",{src:M,alt:"",style:{width:"210px","margin-bottom":"10px","align-self":"center"}}),n("h3",{class:"title"},"QTestRunner")],-1)),s(d,{prop:"username"},{default:r(()=>[s(g,{modelValue:t(o).username,"onUpdate:modelValue":e[0]||(e[0]=i=>t(o).username=i),type:"text",size:"large","auto-complete":"off",placeholder:"账号"},{prefix:r(()=>[s(a,{"icon-class":"user",class:"el-input__icon input-icon"})]),_:1},8,["modelValue"])]),_:1}),s(d,{prop:"password"},{default:r(()=>[s(g,{modelValue:t(o).password,"onUpdate:modelValue":e[1]||(e[1]=i=>t(o).password=i),type:"password",size:"large","auto-complete":"off",placeholder:"密码",onKeyup:h(m,["enter"])},{prefix:r(()=>[s(a,{"icon-class":"password",class:"el-input__icon input-icon"})]),_:1},8,["modelValue"])]),_:1}),s(d,{prop:"confirmPassword"},{default:r(()=>[s(g,{modelValue:t(o).confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=i=>t(o).confirmPassword=i),type:"password",size:"large","auto-complete":"off",placeholder:"确认密码",onKeyup:h(m,["enter"])},{prefix:r(()=>[s(a,{"icon-class":"password",class:"el-input__icon input-icon"})]),_:1},8,["modelValue"])]),_:1}),t(p)?(_(),U(d,{key:0,prop:"code"},{default:r(()=>[s(g,{size:"large",modelValue:t(o).code,"onUpdate:modelValue":e[3]||(e[3]=i=>t(o).code=i),"auto-complete":"off",placeholder:"验证码",style:{width:"67%"},onKeyup:h(m,["enter"])},{prefix:r(()=>[s(a,{"icon-class":"validCode",class:"el-input__icon input-icon"})]),_:1},8,["modelValue"]),n("div",j,[n("img",{src:t(y),onClick:v,class:"register-code-img"},null,8,A)])]),_:1})):z("",!0),s(d,{style:{width:"100%"}},{default:r(()=>[s(k,{loading:t(c),size:"large",type:"primary",class:"hover-button",onClick:B(m,["prevent"])},{default:r(()=>[t(c)?(_(),w("span",H,"注 册 中...")):(_(),w("span",F,"注 册"))]),_:1},8,["loading"]),n("div",L,[s(C,{class:"link-type",to:"/login"},{default:r(()=>e[4]||(e[4]=[T("使用已有账户登录")])),_:1})])]),_:1})]),_:1},8,["model"]),e[6]||(e[6]=n("div",{class:"el-register-footer"},[n("span",null,"Copyright © 2024 insistence.tech All Rights Reserved.")],-1))])}}},O=R(Q,[["__scopeId","data-v-93e4d11b"]]);export{O as default};

import{X as m,d as le,r as c,J as ne,N as oe,C as se,ab as ue,e as d,H as re,c as R,o as v,I as C,f as l,k as E,M as P,l as n,i as s,m as ie,O as de,P as ce,j as D,n as B,aE as L,K as pe,h as O,y as U,L as me}from"./index.DLM0P_FN.js";function fe(t){return m({url:"/qtr/suite/list",method:"get",params:t})}function ve(t){return m({url:"/qtr/suite/"+t,method:"get"})}function be(t){return m({url:"/qtr/suite",method:"post",data:t})}function Se(t){return m({url:"/qtr/suite",method:"put",data:t})}function we(t){return m({url:"/qtr/suite/"+t,method:"delete"})}function ye(t){return m({url:"/qtr/suite/detailList",method:"get",params:t})}function Ie(t){return m({url:"/qtr/suite/addSuiteDetail",method:"post",data:t})}function qe(t){return m({url:"/qtr/suite/editSuiteDetail",method:"put",data:t})}function ke(t){return m({url:"/qtr/suite/getSuiteDetail/"+t,method:"get"})}function Ne(t){return m({url:"/qtr/suite/changeOrder",method:"post",data:t})}const ge={class:"app-container"},Ce={__name:"suite-table-query",props:{showPagination:{type:Boolean,default:!0},checkedIds:{type:Array,default:[]}},emits:["selectChange"],setup(t,{expose:A,emit:z}){const{proxy:x}=le(),{qtr_data_status:T}=x.useDict("qtr_data_status"),b=t,K=z;A({handleQuery:y,getSelectedIds:j});const _=c(null),h=c([]);c(!1);const q=c(!0),S=c(!0);c("");const Q=c(!0),$=c(!0),k=c(0),V=c([]),f=c([]),F=ne({queryParams:{pageNum:1,pageSize:10,suiteName:void 0,status:void 0},rules:{suiteName:[{required:!0,message:"套件名称不能为空",trigger:"blur"}],orderNum:[{required:!0,message:"显示排序不能为空",trigger:"blur"}]}}),{queryParams:p,rules:he}=oe(F);function w(){q.value=!0,fe(p.value).then(o=>{h.value=o.rows,k.value=o.total,me(()=>{_.value&&_.value.clearSelection(),b.checkedIds&&b.checkedIds.length>0&&_.value&&h.value&&h.value.forEach(e=>{b.checkedIds.find(u=>u===e.suiteId)&&_.value.toggleRowSelection(e,!0)})}),q.value=!1})}function M(o){K("selectChange",o),V.value=o.map(e=>e.suiteId)}function j(){return V.value}function y(){w()}function H(){x.resetForm("queryRef"),y()}function J(o,e){let u=h.value.map(i=>i.suiteId),r=o.map(i=>i.suiteId),N=u.filter(i=>!r.includes(i));r.forEach(i=>{f.value.some(I=>I===i)||f.value.push(i)}),f.value=f.value.filter(i=>!N.includes(i))}function X(o){let e=o.map(u=>u.suiteId);if(e&&e.length>0)e.forEach(u=>{f.value.some(r=>r===u)||f.value.push(u)});else{let u=h.value.map(r=>r.suiteId);f.value=f.value.filter(r=>!u.includes(r))}}return se(()=>{f.value=ue(b.checkedIds),w()}),(o,e)=>{const u=d("el-input"),r=d("el-form-item"),N=d("el-option"),i=d("el-select"),I=d("el-button"),G=d("el-form"),W=d("right-toolbar"),Y=d("el-row"),g=d("el-table-column"),Z=d("dict-tag"),ee=d("el-table"),te=d("pagination"),ae=re("loading");return v(),R("div",ge,[C(l(G,{model:n(p),ref:"queryRef",inline:!0},{default:s(()=>[l(r,{label:"套件名称",prop:"suiteName"},{default:s(()=>[l(u,{modelValue:n(p).suiteName,"onUpdate:modelValue":e[0]||(e[0]=a=>n(p).suiteName=a),placeholder:"请输入套件名称",clearable:"",style:{width:"200px"},onKeyup:ie(y,["enter"])},null,8,["modelValue"])]),_:1}),l(r,{label:"状态",prop:"status"},{default:s(()=>[l(i,{modelValue:n(p).status,"onUpdate:modelValue":e[1]||(e[1]=a=>n(p).status=a),placeholder:"套件状态",clearable:"",style:{width:"200px"}},{default:s(()=>[(v(!0),R(de,null,ce(n(T),a=>(v(),D(N,{key:a.value*1,label:a.label,value:a.value*1},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(r,null,{default:s(()=>[l(I,{type:"primary",icon:"Search",onClick:y},{default:s(()=>e[5]||(e[5]=[B("搜索")])),_:1,__:[5]}),l(I,{icon:"Refresh",onClick:H},{default:s(()=>e[6]||(e[6]=[B("重置")])),_:1,__:[6]})]),_:1})]),_:1},8,["model"]),[[P,n(S)]]),l(Y,{gutter:10,class:"mb8"},{default:s(()=>[L(o.$slots,"table-tool"),l(W,{showSearch:n(S),"onUpdate:showSearch":e[2]||(e[2]=a=>pe(S)?S.value=a:null),onQueryTable:w},null,8,["showSearch"])]),_:3}),n($)?C((v(),D(ee,{key:0,border:"",ref_key:"tableRef",ref:_,data:n(h),"row-key":"suiteId","default-expand-all":n(Q),onSelectionChange:M,onSelect:J,onSelectAll:X},{default:s(()=>[l(g,{type:"selection",width:"55",align:"center"}),l(g,{prop:"suiteId",label:"ID",width:"160"}),l(g,{prop:"suiteName",label:"套件名称",width:"200"}),l(g,{prop:"orderNum",label:"排序",width:"200"}),l(g,{prop:"status",label:"状态",width:"100"},{default:s(a=>[l(Z,{options:n(T),value:a.row.status+""},null,8,["options","value"])]),_:1}),l(g,{label:"创建时间",align:"center",prop:"createTime","class-name":"small-padding fixed-width"},{default:s(a=>[O("span",null,U(o.parseTime(a.row.createTime)),1)]),_:1}),l(g,{label:"更新时间",align:"center",prop:"updateTime","class-name":"small-padding fixed-width"},{default:s(a=>[O("span",null,U(o.parseTime(a.row.updateTime)),1)]),_:1}),o.$slots.tableOperate?(v(),D(g,{key:0,label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:s(a=>[L(o.$slots,"tableOperate",{scope:a})]),_:3})):E("",!0)]),_:3},8,["data","default-expand-all"])),[[ae,n(q)]]):E("",!0),C(l(te,{total:n(k),page:n(p).pageNum,"onUpdate:page":e[3]||(e[3]=a=>n(p).pageNum=a),limit:n(p).pageSize,"onUpdate:limit":e[4]||(e[4]=a=>n(p).pageSize=a),onPagination:w},null,8,["total","page","limit"]),[[P,n(k)>0&&t.showPagination]])])}}};export{Ce as _,Ie as a,ve as b,Ne as c,we as d,Se as e,be as f,ke as g,ye as l,qe as u};
//# sourceMappingURL=suite-table-query.z8lbDPjw.js.map

import{t as x}from"./run_detail.CgntWMNI.js";import{l as A}from"./env.jLYomLFD.js";import{H as R}from"./project.BpVuymad.js";import{at as H,au as C,r as i,d as n,J as P,o as f,l as b,f as s,m as z,e as o,p as k,h as a,I as F,c as J,P as O,a7 as j,aO as q,ay as I}from"./index.CHnR_MAu.js";const G={class:"dialog-footer"},X={__name:"run_dialog",props:H({runType:{type:Number,default:R.case},showDialog:{type:Boolean,default:!1}},{dialogVisible:{},dialogVisibleModifiers:{},runIds:{},runIdsModifiers:{}}),emits:["update:dialogVisible","update:runIds"],setup(p){const u=C(p,"dialogVisible"),h=C(p,"runIds"),T=p,v=i(!1),d=i(!0),g=i([]),m=i(!1),t=i({ids:h,runType:T.runType,env:null,reportName:null,isAsync:"1",repeatNum:1});function B(r){try{if(m.value=!0,d.value=!1,t.value.ids.length===0){I.error({message:"请选择要执行的数据",type:"error"}),d.value=!0,m.value=!1;return}v.value=!0,x(t.value).then(e=>{I.success({message:e.msg,type:"success"}),u.value=!1}).finally(()=>{v.value=!1,d.value=!0,m.value=!1})}catch(e){console.log(e)}finally{}}function V(){d.value=!0,u.value=!1}function D(r){d?(r(),u.value=!1):(r(!1),u.value=!0)}function E(){A().then(r=>{g.value=r.data})}return E(),(r,e)=>{const _=n("el-option"),y=n("el-select"),c=n("el-form-item"),L=n("el-input"),M=n("el-input-number"),U=n("el-form"),N=n("el-button"),w=P("loading");return f(),b(a(q),{modelValue:u.value,"onUpdate:modelValue":e[4]||(e[4]=l=>u.value=l),title:"测试确认",width:"500","append-to-body":"",onClose:V,"before-close":D,"close-on-click-modal":!1,"close-on-press-escape":!1},{footer:s(()=>[z("div",G,[o(N,{onClick:V},{default:s(()=>[k("取消")]),_:1}),o(N,{disabled:a(m),type:"primary",onClick:B},{default:s(()=>[k(" 执行 ")]),_:1},8,["disabled"])])]),default:s(()=>[F((f(),b(U,{model:a(t)},{default:s(()=>[o(c,{label:"测试环境："},{default:s(()=>[o(y,{modelValue:a(t).env,"onUpdate:modelValue":e[0]||(e[0]=l=>a(t).env=l),placeholder:"请选择测试环境"},{default:s(()=>[(f(!0),J(O,null,j(a(g),l=>(f(),b(_,{key:l.envId,label:l.envName,value:l.envId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(c,{label:"报告名称："},{default:s(()=>[o(L,{modelValue:a(t).reportName,"onUpdate:modelValue":e[1]||(e[1]=l=>a(t).reportName=l),autocomplete:"off",placeholder:"报告名称，默认为执行时间"},null,8,["modelValue"])]),_:1}),o(c,{label:"执行次数："},{default:s(()=>[o(M,{min:1,"controls-position":"right",modelValue:a(t).repeatNum,"onUpdate:modelValue":e[2]||(e[2]=l=>a(t).repeatNum=l)},null,8,["modelValue"])]),_:1}),o(c,{label:"同步执行："},{default:s(()=>[o(y,{modelValue:a(t).isAsync,"onUpdate:modelValue":e[3]||(e[3]=l=>a(t).isAsync=l),placeholder:"Please select a zone"},{default:s(()=>[o(_,{label:"同步",value:"1"}),o(_,{label:"异步",value:"2"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])),[[w,a(v),void 0,{fullscreen:!0,lock:!0}]])]),_:1},8,["modelValue"])}}};export{X as _};

import{X as C,r as g,J as _e,N as ve,d as a,H as L,o as d,c as $,I as y,M,h as t,e as l,f as n,l as Q,O,P as j,m as _,K as q,p as s,i as A,y as H,F as be,s as Ve}from"./index.N0ypA0wQ.js";function we(m){return C({url:"/system/config/list",method:"get",params:m})}function he(m){return C({url:"/system/config/"+m,method:"get"})}function Ce(m){return C({url:"/system/config",method:"post",data:m})}function ke(m){return C({url:"/system/config",method:"put",data:m})}function Ne(m){return C({url:"/system/config/"+m,method:"delete"})}function xe(){return C({url:"/system/config/refreshCache",method:"delete"})}const Se={class:"app-container"},Te={class:"dialog-footer"},Ke=be({name:"Config"}),De=Object.assign(Ke,{setup(m){const{proxy:f}=Ve(),{sys_yes_no:T}=f.useDict("sys_yes_no"),P=g([]),b=g(!1),K=g(!0),x=g(!0),U=g([]),F=g(!0),Y=g(!0),D=g(0),R=g(""),k=g([]),J=_e({form:{},queryParams:{pageNum:1,pageSize:10,configName:void 0,configKey:void 0,configType:void 0},rules:{configName:[{required:!0,message:"参数名称不能为空",trigger:"blur"}],configKey:[{required:!0,message:"参数键名不能为空",trigger:"blur"}],configValue:[{required:!0,message:"参数键值不能为空",trigger:"blur"}]}}),{queryParams:u,form:i,rules:X}=ve(J);function w(){K.value=!0,we(f.addDateRange(u.value,k.value)).then(r=>{P.value=r.rows,D.value=r.total,K.value=!1})}function G(){b.value=!1,I()}function I(){i.value={configId:void 0,configName:void 0,configKey:void 0,configValue:void 0,configType:"Y",remark:void 0},f.resetForm("configRef")}function S(){u.value.pageNum=1,w()}function W(){k.value=[],f.resetForm("queryRef"),S()}function Z(r){U.value=r.map(e=>e.configId),F.value=r.length!=1,Y.value=!r.length}function ee(){I(),b.value=!0,R.value="添加参数"}function B(r){I();const e=r.configId||U.value;he(e).then(V=>{i.value=V.data,b.value=!0,R.value="修改参数"})}function le(){f.$refs.configRef.validate(r=>{r&&(i.value.configId!=null?ke(i.value).then(e=>{f.$modal.msgSuccess("修改成功"),b.value=!1,w()}):Ce(i.value).then(e=>{f.$modal.msgSuccess("新增成功"),b.value=!1,w()}))})}function E(r){const e=r.configId||U.value;f.$modal.confirm('是否确认删除参数编号为"'+e+'"的数据项？').then(function(){return Ne(e)}).then(()=>{w(),f.$modal.msgSuccess("删除成功")}).catch(()=>{})}function oe(){f.download("system/config/export",{...u.value},`config_${new Date().getTime()}.xlsx`)}function ne(){xe().then(()=>{f.$modal.msgSuccess("刷新缓存成功")})}return w(),(r,e)=>{const V=a("el-input"),c=a("el-form-item"),te=a("el-option"),ae=a("el-select"),ie=a("el-date-picker"),p=a("el-button"),z=a("el-form"),N=a("el-col"),ue=a("right-toolbar"),re=a("el-row"),v=a("el-table-column"),de=a("dict-tag"),se=a("el-table"),fe=a("pagination"),pe=a("el-radio"),me=a("el-radio-group"),ce=a("el-dialog"),h=L("hasPermi"),ge=L("loading");return d(),$("div",Se,[y(l(z,{model:t(u),ref:"queryRef",inline:!0,"label-width":"68px"},{default:n(()=>[l(c,{label:"参数名称",prop:"configName"},{default:n(()=>[l(V,{modelValue:t(u).configName,"onUpdate:modelValue":e[0]||(e[0]=o=>t(u).configName=o),placeholder:"请输入参数名称",clearable:"",style:{width:"240px"},onKeyup:Q(S,["enter"])},null,8,["modelValue"])]),_:1}),l(c,{label:"参数键名",prop:"configKey"},{default:n(()=>[l(V,{modelValue:t(u).configKey,"onUpdate:modelValue":e[1]||(e[1]=o=>t(u).configKey=o),placeholder:"请输入参数键名",clearable:"",style:{width:"240px"},onKeyup:Q(S,["enter"])},null,8,["modelValue"])]),_:1}),l(c,{label:"系统内置",prop:"configType"},{default:n(()=>[l(ae,{modelValue:t(u).configType,"onUpdate:modelValue":e[2]||(e[2]=o=>t(u).configType=o),placeholder:"系统内置",clearable:""},{default:n(()=>[(d(!0),$(O,null,j(t(T),o=>(d(),_(te,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(c,{label:"创建时间",style:{width:"308px"}},{default:n(()=>[l(ie,{modelValue:t(k),"onUpdate:modelValue":e[3]||(e[3]=o=>q(k)?k.value=o:null),"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),_:1}),l(c,null,{default:n(()=>[l(p,{type:"primary",icon:"Search",onClick:S},{default:n(()=>e[13]||(e[13]=[s("搜索")])),_:1}),l(p,{icon:"Refresh",onClick:W},{default:n(()=>e[14]||(e[14]=[s("重置")])),_:1})]),_:1})]),_:1},8,["model"]),[[M,t(x)]]),l(re,{gutter:10,class:"mb8"},{default:n(()=>[l(N,{span:1.5},{default:n(()=>[y((d(),_(p,{type:"primary",plain:"",icon:"Plus",onClick:ee},{default:n(()=>e[15]||(e[15]=[s("新增")])),_:1})),[[h,["system:config:add"]]])]),_:1}),l(N,{span:1.5},{default:n(()=>[y((d(),_(p,{type:"success",plain:"",icon:"Edit",disabled:t(F),onClick:B},{default:n(()=>e[16]||(e[16]=[s("修改")])),_:1},8,["disabled"])),[[h,["system:config:edit"]]])]),_:1}),l(N,{span:1.5},{default:n(()=>[y((d(),_(p,{type:"danger",plain:"",icon:"Delete",disabled:t(Y),onClick:E},{default:n(()=>e[17]||(e[17]=[s("删除")])),_:1},8,["disabled"])),[[h,["system:config:remove"]]])]),_:1}),l(N,{span:1.5},{default:n(()=>[y((d(),_(p,{type:"warning",plain:"",icon:"Download",onClick:oe},{default:n(()=>e[18]||(e[18]=[s("导出")])),_:1})),[[h,["system:config:export"]]])]),_:1}),l(N,{span:1.5},{default:n(()=>[y((d(),_(p,{type:"danger",plain:"",icon:"Refresh",onClick:ne},{default:n(()=>e[19]||(e[19]=[s("刷新缓存")])),_:1})),[[h,["system:config:remove"]]])]),_:1}),l(ue,{showSearch:t(x),"onUpdate:showSearch":e[4]||(e[4]=o=>q(x)?x.value=o:null),onQueryTable:w},null,8,["showSearch"])]),_:1}),y((d(),_(se,{data:t(P),onSelectionChange:Z},{default:n(()=>[l(v,{type:"selection",width:"55",align:"center"}),l(v,{label:"参数主键",align:"center",prop:"configId"}),l(v,{label:"参数名称",align:"center",prop:"configName","show-overflow-tooltip":!0}),l(v,{label:"参数键名",align:"center",prop:"configKey","show-overflow-tooltip":!0}),l(v,{label:"参数键值",align:"center",prop:"configValue","show-overflow-tooltip":!0}),l(v,{label:"系统内置",align:"center",prop:"configType"},{default:n(o=>[l(de,{options:t(T),value:o.row.configType},null,8,["options","value"])]),_:1}),l(v,{label:"备注",align:"center",prop:"remark","show-overflow-tooltip":!0}),l(v,{label:"创建时间",align:"center",prop:"createTime",width:"180"},{default:n(o=>[A("span",null,H(r.parseTime(o.row.createTime)),1)]),_:1}),l(v,{label:"操作",align:"center",width:"150","class-name":"small-padding fixed-width"},{default:n(o=>[y((d(),_(p,{link:"",type:"primary",icon:"Edit",onClick:ye=>B(o.row)},{default:n(()=>e[20]||(e[20]=[s("修改")])),_:2},1032,["onClick"])),[[h,["system:config:edit"]]]),y((d(),_(p,{link:"",type:"primary",icon:"Delete",onClick:ye=>E(o.row)},{default:n(()=>e[21]||(e[21]=[s("删除")])),_:2},1032,["onClick"])),[[h,["system:config:remove"]]])]),_:1})]),_:1},8,["data"])),[[ge,t(K)]]),y(l(fe,{total:t(D),page:t(u).pageNum,"onUpdate:page":e[5]||(e[5]=o=>t(u).pageNum=o),limit:t(u).pageSize,"onUpdate:limit":e[6]||(e[6]=o=>t(u).pageSize=o),onPagination:w},null,8,["total","page","limit"]),[[M,t(D)>0]]),l(ce,{title:t(R),modelValue:t(b),"onUpdate:modelValue":e[12]||(e[12]=o=>q(b)?b.value=o:null),width:"500px","append-to-body":""},{footer:n(()=>[A("div",Te,[l(p,{type:"primary",onClick:le},{default:n(()=>e[22]||(e[22]=[s("确 定")])),_:1}),l(p,{onClick:G},{default:n(()=>e[23]||(e[23]=[s("取 消")])),_:1})])]),default:n(()=>[l(z,{ref:"configRef",model:t(i),rules:t(X),"label-width":"80px"},{default:n(()=>[l(c,{label:"参数名称",prop:"configName"},{default:n(()=>[l(V,{modelValue:t(i).configName,"onUpdate:modelValue":e[7]||(e[7]=o=>t(i).configName=o),placeholder:"请输入参数名称"},null,8,["modelValue"])]),_:1}),l(c,{label:"参数键名",prop:"configKey"},{default:n(()=>[l(V,{modelValue:t(i).configKey,"onUpdate:modelValue":e[8]||(e[8]=o=>t(i).configKey=o),placeholder:"请输入参数键名"},null,8,["modelValue"])]),_:1}),l(c,{label:"参数键值",prop:"configValue"},{default:n(()=>[l(V,{modelValue:t(i).configValue,"onUpdate:modelValue":e[9]||(e[9]=o=>t(i).configValue=o),placeholder:"请输入参数键值"},null,8,["modelValue"])]),_:1}),l(c,{label:"系统内置",prop:"configType"},{default:n(()=>[l(me,{modelValue:t(i).configType,"onUpdate:modelValue":e[10]||(e[10]=o=>t(i).configType=o)},{default:n(()=>[(d(!0),$(O,null,j(t(T),o=>(d(),_(pe,{key:o.value,label:o.value},{default:n(()=>[s(H(o.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(c,{label:"备注",prop:"remark"},{default:n(()=>[l(V,{modelValue:t(i).remark,"onUpdate:modelValue":e[11]||(e[11]=o=>t(i).remark=o),type:"textarea",placeholder:"请输入内容"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{De as default};
//# sourceMappingURL=index.DzW2zqW6.js.map

{"version":3,"file":"index.BNW9Y1Fb.js","sources":["../../../src/api/hrm/debugtalk.js","../../../src/views/hrm/debugtalk/index.vue"],"sourcesContent":["import request from '@/utils/request'\r\n\r\n// 查询DebugTalk列表\r\nexport function listDebugTalk(query) {\r\n  return request({\r\n    url: '/hrm/debugtalk/list',\r\n    method: 'get',\r\n    params: query\r\n  })\r\n}\r\n\r\n// 查询DebugTalk详细\r\nexport function getDebugTalk(debugtalkId) {\r\n  return request({\r\n    url: '/hrm/debugtalk/' + debugtalkId,\r\n    method: 'get'\r\n  })\r\n}\r\n\r\n// 新增DebugTalk\r\nexport function addDebugTalk(data) {\r\n  return request({\r\n    url: '/hrm/debugtalk',\r\n    method: 'post',\r\n    data: data\r\n  })\r\n}\r\n\r\n// 修改DebugTalk\r\nexport function updateDebugTalk(data) {\r\n  return request({\r\n    url: '/hrm/debugtalk',\r\n    method: 'put',\r\n    data: data\r\n  })\r\n}\r\n\r\n// 删除DebugTalk\r\nexport function delDebugTalk(debugtalkId) {\r\n  return request({\r\n    url: '/hrm/debugtalk/' + debugtalkId,\r\n    method: 'delete'\r\n  })\r\n}","<template>\r\n  <div class=\"app-container\">\r\n    <el-form :model=\"queryParams\" ref=\"queryRef\" :inline=\"true\" v-show=\"showSearch\">\r\n      <el-form-item label=\"所属项目\" prop=\"projectId\">\r\n        <el-select v-model=\"queryParams.projectId\" placeholder=\"请选择\" clearable\r\n                   style=\"width: 150px\">\r\n          <el-option\r\n              v-for=\"option in projectOptions\"\r\n              :key=\"option.projectId\"\r\n              :label=\"option.projectName\"\r\n              :value=\"option.projectId\">\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"状态\" prop=\"status\">\r\n        <el-select v-model=\"queryParams.status\" placeholder=\"状态\" clearable style=\"width: 100px\">\r\n          <el-option\r\n              v-for=\"dict in qtr_data_status\"\r\n              :key=\"dict.value\"\r\n              :label=\"dict.label\"\r\n              :value=\"dict.value\"\r\n          />\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" icon=\"Search\" @click=\"handleQuery\">搜索</el-button>\r\n        <el-button type=\"default\" icon=\"Refresh\" @click=\"resetQuery\">重置</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n    <el-table\r\n        border\r\n        v-if=\"refreshTable\"\r\n        v-loading=\"loading\"\r\n        :data=\"debugtalkList\"\r\n        row-key=\"debugtalkId\"\r\n        :default-expand-all=\"isExpandAll\"\r\n        max-height=\"calc(100vh - 240px)\"\r\n    >\r\n      <el-table-column prop=\"debugtalkId\" label=\"ID\" width=\"150\"></el-table-column>\r\n      <el-table-column label=\"项目ID\" width=\"150\" prop=\"projectId\" align=\"center\">\r\n        <template #default=\"scope\">\r\n          <span>{{ nameOrGlob(scope.row.projectId) }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"所属项目\" min-width=\"260\" prop=\"projectName\" align=\"left\">\r\n        <template #default=\"scope\">\r\n          <el-text>{{ nameOrGlob(scope.row.projectName) }}</el-text>\r\n        </template>\r\n      </el-table-column>\r\n      <!--         <el-table-column label=\"所属项目\" width=\"260\" :formatter=\"formatProject\" align=\"center\"></el-table-column>-->\r\n      <el-table-column align=\"left\" label=\"DebugTalk\" min-width=\"115\">\r\n        <template #default=\"scope\">\r\n          <el-button link type=\"primary\" @click=\"handleUpdate(scope.row)\"\r\n                     v-hasPermi=\"['hrm:debugtalk:edit', 'hrm:debugtalk:detail']\">debugtalk.py\r\n          </el-button>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"status\" label=\"状态\" align=\"center\" width=\"70\">\r\n        <template #default=\"scope\">\r\n          <dict-tag :options=\"qtr_data_status\" :value=\"scope.row.status\"/>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"创建时间\" align=\"center\" prop=\"createTime\" class-name=\"small-padding fixed-width\" width=\"150\">\r\n        <template #default=\"scope\">\r\n          <span>{{ parseTime(scope.row.createTime) }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"更新时间\" align=\"center\" prop=\"updateTime\" class-name=\"small-padding fixed-width\" width=\"150\">\r\n        <template #default=\"scope\">\r\n          <span>{{ parseTime(scope.row.updateTime) }}</span>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <pagination\r\n        v-show=\"total > 0\"\r\n        :total=\"total\"\r\n        v-model:page=\"queryParams.pageNum\"\r\n        v-model:limit=\"queryParams.pageSize\"\r\n        @pagination=\"getList\"\r\n    />\r\n\r\n    <!-- 修改debugtalk对话框 -->\r\n    <el-dialog fullscreen :title=\"title\" v-model=\"open\" append-to-body>\r\n      <el-form ref=\"debugtalkRef\" :model=\"form\" :rules=\"rules\" label-width=\"100px\" style=\"height: 100%\">\r\n        <el-container style=\"height: 100%\">\r\n          <el-header height=\"20px\" border=\"2px\" style=\"border-bottom-color: #97a8be;text-align: right\">\r\n            <el-button-group>\r\n              <el-button type=\"primary\" icon=\"Save\" @click=\"submitForm\" v-hasPermi=\"['hrm:debugtalk:edit']\">保存\r\n              </el-button>\r\n              <el-button type=\"primary\" icon=\"Cancel\" @click=\"cancel\">取消</el-button>\r\n            </el-button-group>\r\n          </el-header>\r\n\r\n          <el-main style=\"max-height: calc(100vh - 95px);\">\r\n\r\n            <AceEditor v-model:content=\"form.debugtalk\" :can-set=\"true\" lang=\"python\" themes=\"monokai\"></AceEditor>\r\n\r\n          </el-main>\r\n        </el-container>\r\n      </el-form>\r\n\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script setup name=\"debugtalk\">\r\nimport AceEditor from \"@/components/hrm/common/ace-editor.vue\";\r\nimport {listDebugTalk, getDebugTalk, addDebugTalk, updateDebugTalk} from \"@/api/hrm/debugtalk.js\";\r\nimport {listProject} from \"@/api/hrm/project.js\";\r\nimport {initDebugTalkFormData} from \"@/components/hrm/data-template.js\";\r\n\r\nconst {proxy} = getCurrentInstance();\r\nconst {qtr_data_status} = proxy.useDict(\"qtr_data_status\");\r\n\r\nconst debugtalkList = ref([]);\r\nconst total = ref(0);\r\nconst projectOptions = ref([]);\r\nconst projectList = ref([]);\r\nconst open = ref(false);\r\nconst loading = ref(true);\r\nconst showSearch = ref(true);\r\nconst title = ref(\"\");\r\nconst isExpandAll = ref(true);\r\nconst refreshTable = ref(true);\r\nconst projectId = ref();\r\nconst debugtalk = ref();\r\n\r\n\r\nconst data = reactive({\r\n  queryParams: {\r\n    debugtalkId: undefined,\r\n    projectId: undefined,\r\n    status: undefined,\r\n    pageSize: 10,\r\n    pageNum: 1\r\n  },\r\n  rules: {\r\n    orderNum: [{required: true, message: \"显示排序不能为空\", trigger: \"blur\"}]\r\n  },\r\n\r\n});\r\nconst form = ref({\r\n  debugtalk: JSON.parse(JSON.stringify(initDebugTalkFormData))\r\n});\r\nconst {queryParams, rules} = toRefs(data);\r\n\r\n\r\n\r\nfunction nameOrGlob(val) {\r\n  return val ? val : \"全局\";\r\n}\r\n\r\n/** 查询DebugTalk列表 */\r\nfunction getList() {\r\n  loading.value = true;\r\n  listDebugTalk(queryParams.value).then(response => {\r\n    debugtalkList.value = response.rows;\r\n    total.value = response.total;\r\n    loading.value = false;\r\n  });\r\n}\r\n\r\n/** 取消按钮 */\r\nfunction cancel() {\r\n  open.value = false;\r\n  reset();\r\n}\r\n\r\n/** 表单重置 */\r\nfunction reset() {\r\n  form.value = {\r\n    debugtalkId: undefined,\r\n    orderNum: 0,\r\n    debugtalk: undefined,\r\n    status: \"0\"\r\n  };\r\n  proxy.resetForm(\"debugtalkRef\");\r\n}\r\n\r\n/** 搜索按钮操作 */\r\nfunction handleQuery() {\r\n  getList();\r\n}\r\n\r\n/** 重置按钮操作 */\r\nfunction resetQuery() {\r\n  proxy.resetForm(\"queryRef\");\r\n  handleQuery();\r\n}\r\n\r\n/** 修改按钮操作 */\r\nfunction handleUpdate(row) {\r\n  reset();\r\n  getDebugTalk(row.debugtalkId).then(response => {\r\n    if (!response.data || Object.keys(response.data).length === 0) {\r\n      alert(\"未查到对应数据！\");\r\n      return;\r\n    }\r\n    form.value = response.data;\r\n    open.value = true;\r\n    title.value = \"编辑DebugTalk\";\r\n  });\r\n}\r\n\r\n/** 提交按钮 */\r\nfunction submitForm() {\r\n  proxy.$refs[\"debugtalkRef\"].validate(valid => {\r\n    if (valid) {\r\n      if (form.value.debugtalkId != undefined) {\r\n        updateDebugTalk(form.value).then(response => {\r\n          proxy.$modal.msgSuccess(\"修改成功\");\r\n          open.value = false;\r\n          getList();\r\n        });\r\n      } else {\r\n        addDebugTalk(form.value).then(response => {\r\n          proxy.$modal.msgSuccess(\"新增成功\");\r\n          open.value = false;\r\n          getList();\r\n        });\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\n/** 删除按钮操作 */\r\nfunction handleDelete(row) {\r\n  proxy.$modal.confirm('是否确认删除名称为\"' + row.projectName + '\"的数据项?').then(function () {\r\n    return delProject(row.projectId);\r\n  }).then(() => {\r\n    getList();\r\n    proxy.$modal.msgSuccess(\"删除成功\");\r\n  }).catch(() => {\r\n  });\r\n}\r\n\r\n// 格式化项目名称的函数\r\nfunction formatProject(row, column, cellValue) {\r\n  // 假设每个debugtalk对象都有一个projectId属性，用于从其他地方获取项目名称\r\n  return getProjectName(row.projectId); // getProjectName是一个根据projectId获取项目名称的函数\r\n}\r\n\r\n// 获取项目名称的函数（这里应该是你的实际逻辑）\r\nfunction getProjectName(projectId) {\r\n  // 根据projectId从某个地方（例如另一个数组或API）获取项目名称\r\n  for (const project of projectList.value) {\r\n    if (projectId === project.projectId) {\r\n      return project.projectName;\r\n    }\r\n  }\r\n}\r\n\r\n\r\n/** 查询项目列表 */\r\nfunction getProjectSelect() {\r\n  listProject({isPage: false}).then(response => {\r\n    projectOptions.value = response.data;\r\n  });\r\n}\r\n\r\ngetProjectSelect();\r\ngetList();\r\n</script>\r\n<style scoped>\r\n</style>\r\n"],"names":["listDebugTalk","query","request","getDebugTalk","debugtalkId","addDebugTalk","data","updateDebugTalk","proxy","getCurrentInstance","qtr_data_status","debugtalkList","ref","total","projectOptions","open","loading","showSearch","title","isExpandAll","refreshTable","reactive","form","initDebugTalkFormData","queryParams","rules","toRefs","nameOrGlob","val","getList","response","cancel","reset","handleQuery","resetQuery","handleUpdate","row","submitForm","valid","getProjectSelect","listProject"],"mappings":"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"}
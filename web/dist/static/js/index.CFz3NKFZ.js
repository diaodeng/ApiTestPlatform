import{X as ue,r as u,A as ce,J as he,N as we,d as n,H as fe,o as p,c as A,I as q,M as se,h as t,e,f as l,l as ve,O as ae,P as oe,m as D,p as w,K as ne,i as G,y as W,n as Ce,F as ye,s as Ie,E as Se,av as Ue,v as Pe,a6 as ke,a5 as Me,_ as Re,au as xe}from"./index.DgyczuKs.js";import{H as qe,R as Oe}from"./enum.Cve1eJHF.js";import{_ as Le}from"./run_dialog.Cj7v-l2H.js";import{l as Ve}from"./project.Ta7DfENy.js";import{s as $e,l as Qe,g as ze,d as Ee}from"./module.Ckx2ii-L.js";import{a as Fe}from"./data-template.CBoE4CJQ.js";import{l as Ke}from"./case.DjTsuh8x.js";import"./env-selector.CY0X6zlK.js";import"./env.D40RgY2q.js";import"./forward.Bd-7Bd9U.js";import"./agent.Dph-1RM_.js";import"./tools.DGA99u3Z.js";function Be(f){return ue({url:"/qtr/suite/list",method:"get",params:f})}function Te(f){return ue({url:"/qtr/suite/"+f,method:"get"})}function Ae(f){return ue({url:"/qtr/suite",method:"post",data:f})}function He(f){return ue({url:"/qtr/suite",method:"put",data:f})}function Ge(f){return ue({url:"/qtr/suite/"+f,method:"delete"})}function Je(f){return ue({url:"/qtr/suite/detailList",method:"get",params:f})}function Ne(f){return ue({url:"/qtr/suite/addSuiteDetail",method:"post",data:f})}function Xe(f){return ue({url:"/qtr/suite/editSuiteDetail",method:"put",data:f})}function We(f){return ue({url:"/qtr/suite/getSuiteDetail/"+f,method:"get"})}function Ye(f){return ue({url:"/qtr/suite/changeOrder",method:"post",data:f})}const Ze={class:"app-container"},et=ye({name:"project"}),tt=Object.assign(et,{props:{suiteId:{},suiteIdModifiers:{}},emits:["update:suiteId"],setup(f,{expose:L}){const{proxy:v}=Ie(),{qtr_data_status:Q}=v.useDict("qtr_data_status"),T=u([]);u(!1);const N=u(!1),U=u(!0);u("");const S=u(!0),$=u(!0),j=u([]),M=ce(f,"suiteId"),R=u([]),E=he({form:{},queryParams:{projectName:void 0,status:void 0,isPage:!1,suiteId:M,dataType:1},rules:{projectName:[{required:!0,message:"项目名称不能为空",trigger:"blur"}],orderNum:[{required:!0,message:"显示排序不能为空",trigger:"blur"}]}}),{queryParams:k,form:z,rules:Y}=we(E);L({getList:O});function O(){N.value=!0,Ve(k.value).then(x=>{T.value=x.data,N.value=!1})}function m(x){j.value=x.map(_=>_.projectId),R.value=j.value,multiple.value=!x.length}function K(){O()}function b(){v.resetForm("queryRef"),K()}function c(x){if(x&&"projectId"in x&&x.projectId&&(R.value=[x.projectId]),!R.value||R.value.length===0){Se.alert("请选择项目","提示！",{type:"warning"});return}const _={suiteId:M.value,dataIds:R.value,dataType:1};Ne(_).then(Z=>{v.$modal.msgSuccess("新增成功"),openProjectCaseDialog.value=!1})}return(x,_)=>{const Z=n("el-input"),J=n("el-form-item"),ee=n("el-option"),X=n("el-select"),te=n("el-button"),H=n("el-form"),de=n("el-col"),y=n("right-toolbar"),d=n("el-row"),o=n("el-table-column"),a=n("dict-tag"),h=n("el-table"),P=fe("loading");return p(),A("div",Ze,[q(e(H,{model:t(k),ref:"queryRef",inline:!0},{default:l(()=>[e(J,{label:"项目名称",prop:"projectName"},{default:l(()=>[e(Z,{modelValue:t(k).projectName,"onUpdate:modelValue":_[0]||(_[0]=I=>t(k).projectName=I),placeholder:"请输入项目名称",clearable:"",style:{width:"200px"},onKeyup:ve(K,["enter"])},null,8,["modelValue"])]),_:1}),e(J,{label:"状态",prop:"status"},{default:l(()=>[e(X,{modelValue:t(k).status,"onUpdate:modelValue":_[1]||(_[1]=I=>t(k).status=I),placeholder:"项目状态",clearable:"",style:{width:"200px"}},{default:l(()=>[(p(!0),A(ae,null,oe(t(Q),I=>(p(),D(ee,{key:I.value*1,label:I.label,value:I.value*1},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(J,null,{default:l(()=>[e(te,{type:"primary",icon:"Search",onClick:K},{default:l(()=>_[3]||(_[3]=[w("搜索")])),_:1}),e(te,{icon:"Refresh",onClick:b},{default:l(()=>_[4]||(_[4]=[w("重置")])),_:1})]),_:1})]),_:1},8,["model"]),[[se,t(U)]]),e(d,{gutter:10,class:"mb8"},{default:l(()=>[e(de,{span:1.5},{default:l(()=>[e(te,{type:"primary",onClick:c},{default:l(()=>_[5]||(_[5]=[w("保存")])),_:1})]),_:1}),e(y,{showSearch:t(U),"onUpdate:showSearch":_[2]||(_[2]=I=>ne(U)?U.value=I:null),onQueryTable:O},null,8,["showSearch"])]),_:1}),t($)?q((p(),D(h,{key:0,border:"",data:t(T),style:{width:"100%"},height:"350","row-key":"projectId","default-expand-all":t(S),onSelectionChange:m},{default:l(()=>[e(o,{type:"selection",width:"55",align:"center"}),e(o,{prop:"projectId",label:"ID",width:"150"}),e(o,{prop:"projectName",align:"center",label:"项目名称",width:"200"}),e(o,{prop:"testUser",label:"测试负责人",align:"center",width:"120"}),e(o,{prop:"status",label:"状态",align:"center",width:"100"},{default:l(I=>[e(a,{options:t(Q),value:I.row.status+""},null,8,["options","value"])]),_:1}),e(o,{label:"创建时间",align:"center",prop:"createTime","class-name":"small-padding fixed-width"},{default:l(I=>[G("span",null,W(x.parseTime(I.row.createTime)),1)]),_:1}),e(o,{label:"更新时间",align:"center",prop:"updateTime","class-name":"small-padding fixed-width"},{default:l(I=>[G("span",null,W(x.parseTime(I.row.updateTime)),1)]),_:1})]),_:1},8,["data","default-expand-all"])),[[P,t(N)]]):Ce("",!0)])}}}),lt={class:"app-container"},at={__name:"case-data",props:Ue({dataType:{type:Number,default:qe.case},formRules:{type:Object,default:{caseName:[{required:!0,message:"用例名称不能为空",trigger:"blur"}],projectId:[{required:!0,message:"所属项目不能为空",trigger:"blur"}],moduleId:[{required:!0,message:"所属模块不能为空",trigger:"blur"}]}}},{suiteId:{},suiteIdModifiers:{},openProjectCaseDialog:{},openProjectCaseDialogModifiers:{}}),emits:["update:suiteId","update:openProjectCaseDialog"],setup(f,{expose:L}){const{proxy:v}=Ie();v.useDict("qtr_case_status");const{sys_normal_disable:Q}=v.useDict("sys_normal_disable");v.useDict("sys_request_method");const{hrm_data_type:T}=v.useDict("hrm_data_type"),N=ce(f,"suiteId");L({getList:_});const U=f,S=Pe(()=>U.dataType===qe.case?"用例":"配置");ke("hrm_data_type",T),ke("sys_normal_disable",Q);const $=ce(f,"openProjectCaseDialog"),j=u([]),M=u([]),R=u([]);u(!1);const E=u(!1),k=u(!0),z=u([]),Y=u(!0),O=u(!0),m=u(0);u("");const K=u(!0),b=u([]);u(!1);const c=Me({pageNum:1,pageSize:10,type:U.dataType,caseId:void 0,suiteId:N,dataType:3,caseName:void 0,projectId:void 0,moduleId:void 0,status:void 0,onlySelf:K});u(Fe);function x(y){return y||"全局"}function _(){E.value=!0,Ke(c.value).then(y=>{j.value=y.rows,m.value=y.total}).finally(()=>{E.value=!1})}function Z(){Ve(null).then(y=>{M.value=y.data})}function J(){$e(c.value).then(y=>{R.value=y.data})}function ee(){c.value.moduleId=void 0,J()}function X(){c.value.pageNum=1,_()}function te(){v.resetForm("queryRef"),X()}function H(y){z.value=y.map(d=>d.caseId),b.value=z.value,Y.value=y.length!==1,O.value=!y.length}function de(y){if(y&&"caseId"in y&&y.caseId&&(b.value=[y.caseId]),!b.value||b.value.length===0){Se.alert("请选择用例","提示！",{type:"warning"});return}const d={suiteId:N.value,dataIds:b.value,dataType:3};Ne(d).then(o=>{v.$modal.msgSuccess("新增成功"),$.value=!1})}return Z(),(y,d)=>{const o=n("el-option"),a=n("el-select"),h=n("el-form-item"),P=n("el-input"),I=n("el-checkbox"),B=n("el-button"),F=n("el-form"),ie=n("el-col"),le=n("right-toolbar"),ge=n("el-row"),V=n("el-table-column"),C=n("dict-tag"),re=n("el-table"),_e=n("pagination"),pe=fe("loading");return p(),A("div",lt,[q(e(F,{model:t(c),ref:"queryRef",inline:!0},{default:l(()=>[e(h,{label:"所属项目",prop:"projectId"},{default:l(()=>[e(a,{modelValue:t(c).projectId,"onUpdate:modelValue":d[0]||(d[0]=i=>t(c).projectId=i),placeholder:"请选择",onChange:ee,clearable:"",style:{width:"150px"}},{default:l(()=>[(p(!0),A(ae,null,oe(t(M),i=>(p(),D(o,{key:i.projectId,label:i.projectName,value:i.projectId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(h,{label:"所属模块",prop:"moduleId"},{default:l(()=>[e(a,{modelValue:t(c).moduleId,"onUpdate:modelValue":d[1]||(d[1]=i=>t(c).moduleId=i),placeholder:"请选择",clearable:"",style:{width:"150px"}},{default:l(()=>[(p(!0),A(ae,null,oe(t(R),i=>(p(),D(o,{key:i.moduleId,label:i.moduleName,value:i.moduleId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(h,{label:t(S)+"ID",prop:"caseId"},{default:l(()=>[e(P,{modelValue:t(c).caseId,"onUpdate:modelValue":d[2]||(d[2]=i=>t(c).caseId=i),placeholder:"请输入"+t(S)+"ID",clearable:"",style:{width:"200px"},onKeyup:ve(X,["enter"])},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(h,{label:t(S)+"名称",prop:"caseName"},{default:l(()=>[e(P,{modelValue:t(c).caseName,"onUpdate:modelValue":d[3]||(d[3]=i=>t(c).caseName=i),placeholder:"请输入"+t(S)+"名称",clearable:"",style:{width:"200px"},onKeyup:ve(X,["enter"])},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(h,{label:"状态",prop:"status"},{default:l(()=>[e(a,{modelValue:t(c).status,"onUpdate:modelValue":d[4]||(d[4]=i=>t(c).status=i),placeholder:t(S)+"状态",clearable:"",style:{width:"100px"}},{default:l(()=>[(p(!0),A(ae,null,oe(t(Q),i=>(p(),D(o,{key:i.value*1,label:i.label,value:i.value*1},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1}),e(h,null,{default:l(()=>[e(I,{modelValue:t(K),"onUpdate:modelValue":d[5]||(d[5]=i=>ne(K)?K.value=i:null),onChange:X},{default:l(()=>d[9]||(d[9]=[w("仅自己的数据")])),_:1},8,["modelValue"])]),_:1}),e(h,null,{default:l(()=>[e(B,{type:"primary",icon:"Search",onClick:X},{default:l(()=>d[10]||(d[10]=[w("搜索")])),_:1}),e(B,{type:"default",icon:"Refresh",onClick:te},{default:l(()=>d[11]||(d[11]=[w("重置")])),_:1})]),_:1})]),_:1},8,["model"]),[[se,t(k)]]),e(ge,{gutter:10,class:"mb8"},{default:l(()=>[e(ie,{span:1.5},{default:l(()=>[e(B,{type:"primary",onClick:de},{default:l(()=>d[12]||(d[12]=[w("保存")])),_:1})]),_:1}),e(le,{showSearch:t(k),"onUpdate:showSearch":d[6]||(d[6]=i=>ne(k)?k.value=i:null),onQueryTable:_},null,8,["showSearch"])]),_:1}),q((p(),D(re,{data:t(j),style:{width:"100%"},height:"350",onSelectionChange:H,border:"","table-layout":"fixed"},{default:l(()=>[e(V,{type:"selection",width:"55",align:"center"}),e(V,{label:t(S)+"ID",prop:"caseId",width:"150px"},null,8,["label"]),e(V,{label:t(S)+"名称",prop:"caseName",width:"auto"},null,8,["label"]),e(V,{label:"所属项目",prop:"projectName"},{default:l(i=>[G("span",null,W(x(i.row.projectName)),1)]),_:1}),e(V,{label:"所属模块",prop:"moduleName"},{default:l(i=>[G("span",null,W(x(i.row.moduleName)),1)]),_:1}),e(V,{label:"状态",align:"center",prop:"status",width:"70px"},{default:l(i=>[e(C,{options:t(Q),value:i.row.status+""},null,8,["options","value"])]),_:1}),e(V,{label:"创建人",align:"center",prop:"createBy"}),e(V,{label:"创建时间",align:"center",prop:"createTime","class-name":"small-padding fixed-width",width:"150px"},{default:l(i=>[G("span",null,W(y.parseTime(i.row.createTime)),1)]),_:1}),e(V,{label:"更新时间",align:"center",prop:"createTime","class-name":"small-padding fixed-width",width:"150px"},{default:l(i=>[G("span",null,W(y.parseTime(i.row.updateTime)),1)]),_:1})]),_:1},8,["data"])),[[pe,t(E)]]),q(e(_e,{total:t(m),page:t(c).pageNum,"onUpdate:page":d[7]||(d[7]=i=>t(c).pageNum=i),limit:t(c).pageSize,"onUpdate:limit":d[8]||(d[8]=i=>t(c).pageSize=i),onPagination:_},null,8,["total","page","limit"]),[[se,t(m)>0]])])}}},ot={class:"app-container"},nt=ye({name:"Module"}),ut=Object.assign(nt,{props:{suiteId:{},suiteIdModifiers:{}},emits:["update:suiteId"],setup(f,{expose:L}){const{proxy:v}=Ie(),{qtr_data_status:Q}=v.useDict("qtr_data_status"),T=u([]),N=u([]),U=u(!1),S=u(!1),$=u(!0),j=u([]),M=u(!0),R=u(!0),E=u(0),k=u("");u(!1),u([]);const z=ce(f,"suiteId"),Y=u([]),O=he({form:{testUser:void 0},queryParams:{pageNum:1,pageSize:10,suiteId:z,dataType:2,projectId:void 0,moduleName:void 0,status:void 0},rules:{moduleName:[{required:!0,message:"模块名称不能为空",trigger:"blur"}],projectId:[{required:!0,message:"所属项目不能为空",trigger:"blur"}],testUser:[{required:!0,message:"测试负责人不能为空",trigger:"blur"}],sort:[{required:!0,message:"模块顺序不能为空",trigger:"blur"}]}}),{queryParams:m,form:K,rules:b}=we(O);L({getList:c});function c(){S.value=!0,Qe(m.value).then(d=>{T.value=d.rows,E.value=d.total,S.value=!1})}function x(){Ve({isPage:!1}).then(d=>{N.value=d.data})}function _(d,o,a){return Z(d.projectId)}function Z(d){for(const o of N.value)if(d===o.projectId)return o.projectName}function J(){K.value={moduleId:void 0,projectId:void 0,moduleName:void 0,sort:0,status:"0",remark:void 0},v.resetForm("postRef")}function ee(){m.value.pageNum=1,x(),c()}function X(){v.resetForm("queryRef"),ee()}function te(d){j.value=d.map(o=>o.moduleId),Y.value=j.value,M.value=d.length!=1,R.value=!d.length}function H(d){J();const o=d.moduleId||j.value;ze(o).then(a=>{K.value=a.data,U.value=!0,k.value="修改模块"})}function de(d){const o=d.moduleId||j.value;v.$modal.confirm('是否确认删除模块编号为"'+o+'"的数据项？').then(function(){return Ee(o)}).then(()=>{c(),v.$modal.msgSuccess("删除成功")}).catch(()=>{})}function y(d){if(d&&"projectId"in d&&d.moduleId&&(Y.value=[d.moduleId]),!Y.value||Y.value.length===0){Se.alert("请选择模块","提示！",{type:"warning"});return}const o={suiteId:z.value,dataIds:Y.value,dataType:2};Ne(o).then(a=>{v.$modal.msgSuccess("新增成功"),openProjectCaseDialog.value=!1})}return x(),(d,o)=>{const a=n("el-option"),h=n("el-select"),P=n("el-form-item"),I=n("el-input"),B=n("el-button"),F=n("el-form"),ie=n("el-col"),le=n("right-toolbar"),ge=n("el-row"),V=n("el-table-column"),C=n("dict-tag"),re=n("el-table"),_e=n("pagination"),pe=fe("hasPermi"),i=fe("loading");return p(),A("div",ot,[q(e(F,{model:t(m),ref:"queryRef",inline:!0},{default:l(()=>[e(P,{label:"项目",prop:"projectId"},{default:l(()=>[e(h,{modelValue:t(m).projectId,"onUpdate:modelValue":o[0]||(o[0]=g=>t(m).projectId=g),placeholder:"请选择",clearable:"",style:{width:"150px"}},{default:l(()=>[(p(!0),A(ae,null,oe(t(N),g=>(p(),D(a,{key:g.projectId,label:g.projectName,value:g.projectId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(P,{label:"模块名称",prop:"moduleName"},{default:l(()=>[e(I,{modelValue:t(m).moduleName,"onUpdate:modelValue":o[1]||(o[1]=g=>t(m).moduleName=g),placeholder:"请输入模块名称",clearable:"",style:{width:"200px"},onKeyup:ve(ee,["enter"])},null,8,["modelValue"])]),_:1}),e(P,{label:"状态",prop:"status"},{default:l(()=>[e(h,{modelValue:t(m).status,"onUpdate:modelValue":o[2]||(o[2]=g=>t(m).status=g),placeholder:"模块状态",clearable:"",style:{width:"200px"}},{default:l(()=>[(p(!0),A(ae,null,oe(t(Q),g=>(p(),D(a,{key:g.value*1,label:g.label,value:g.value*1},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(P,null,{default:l(()=>[e(B,{type:"primary",icon:"Search",onClick:ee},{default:l(()=>o[6]||(o[6]=[w("搜索")])),_:1}),e(B,{icon:"Refresh",onClick:X},{default:l(()=>o[7]||(o[7]=[w("重置")])),_:1})]),_:1})]),_:1},8,["model"]),[[se,t($)]]),e(ge,{gutter:10,class:"mb8"},{default:l(()=>[e(ie,{span:1.5},{default:l(()=>[e(B,{type:"primary",onClick:y},{default:l(()=>o[8]||(o[8]=[w("保存")])),_:1})]),_:1}),e(le,{showSearch:t($),"onUpdate:showSearch":o[3]||(o[3]=g=>ne($)?$.value=g:null),onQueryTable:c},null,8,["showSearch"])]),_:1}),q((p(),D(re,{border:"",data:t(T),style:{width:"100%"},height:"350",onSelectionChange:te},{default:l(()=>[e(V,{type:"selection",width:"55",align:"center"}),e(V,{label:"模块ID",align:"center",prop:"moduleId"}),e(V,{label:"模块名称",align:"center",prop:"moduleName"}),e(V,{label:"所属项目",align:"center",formatter:_}),e(V,{label:"测试人员",align:"center",prop:"testUser"}),e(V,{label:"模块排序",align:"center",prop:"sort"}),e(V,{label:"状态",align:"center",prop:"status"},{default:l(g=>[e(C,{options:t(Q),value:g.row.status+""},null,8,["options","value"])]),_:1}),e(V,{label:"创建时间",align:"center",prop:"createTime","class-name":"small-padding fixed-width"},{default:l(g=>[G("span",null,W(d.parseTime(g.row.createTime)),1)]),_:1}),e(V,{label:"更新时间",align:"center",prop:"createTime","class-name":"small-padding fixed-width"},{default:l(g=>[G("span",null,W(d.parseTime(g.row.updateTime)),1)]),_:1}),e(V,{label:"操作",width:"180",align:"center","class-name":"small-padding fixed-width"},{default:l(g=>[q((p(),D(B,{link:"",type:"primary",icon:"Edit",onClick:be=>H(g.row)},{default:l(()=>o[9]||(o[9]=[w(" 修改 ")])),_:2},1032,["onClick"])),[[pe,["hrm:module:edit"]]]),q((p(),D(B,{link:"",type:"primary",icon:"Delete",onClick:be=>de(g.row)},{default:l(()=>o[10]||(o[10]=[w("删除 ")])),_:2},1032,["onClick"])),[[pe,["hrm:module:remove"]]])]),_:1})]),_:1},8,["data"])),[[i,t(S)]]),q(e(_e,{total:t(E),page:t(m).pageNum,"onUpdate:page":o[4]||(o[4]=g=>t(m).pageNum=g),limit:t(m).pageSize,"onUpdate:limit":o[5]||(o[5]=g=>t(m).pageSize=g),onPagination:c},null,8,["total","page","limit"]),[[se,t(E)>0]])])}}}),dt=ye({__name:"config-suite-data-dialog",props:{openConfigSuiteDataDialog:{},openConfigSuiteDataDialogModifiers:{},suiteId:{},suiteIdModifiers:{}},emits:Ue(["close-dialog"],["update:openConfigSuiteDataDialog","update:suiteId"]),setup(f,{emit:L}){const v=ce(f,"openConfigSuiteDataDialog"),Q=ce(f,"suiteId"),T=u("Case"),N=u(null),U=u(null),S=u(null),$=(j,M)=>{j.props.name==="Case"?N.value.getList():j.props.name==="Module"?U.value.getList():j.props.name==="Project"&&S.value.getList()};return(j,M)=>{const R=n("el-tab-pane"),E=n("el-tabs"),k=n("el-dialog");return p(),D(k,{modelValue:v.value,"onUpdate:modelValue":M[1]||(M[1]=z=>v.value=z),width:"1200",title:"套件数据配置","append-to-body":"","destroy-on-close":"",draggable:"",overflow:"","close-on-click-modal":!1,onClosed:M[2]||(M[2]=z=>j.$emit("close-dialog"))},{default:l(()=>[e(E,{modelValue:T.value,"onUpdate:modelValue":M[0]||(M[0]=z=>T.value=z),class:"demo-tabs",onTabClick:$},{default:l(()=>[e(R,{label:"Case",name:"Case"},{default:l(()=>[e(at,{suiteId:Q.value,ref_key:"callCase",ref:N},null,8,["suiteId"])]),_:1}),e(R,{label:"Module",name:"Module"},{default:l(()=>[e(ut,{suiteId:Q.value,ref_key:"callModule",ref:U},null,8,["suiteId"])]),_:1}),e(R,{label:"Project",name:"Project"},{default:l(()=>[e(tt,{suiteId:Q.value,ref_key:"callProject",ref:S},null,8,["suiteId"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])}}}),st=Re(dt,[["__scopeId","data-v-c9945769"]]),it={class:"app-container"},rt=ye({name:"SuiteDetail"}),pt=Object.assign(rt,{props:{suiteId:{},suiteIdModifiers:{},openSuiteDetailDialog:{},openSuiteDetailDialogModifiers:{}},emits:["update:suiteId","update:openSuiteDetailDialog"],setup(f){const L=ce(f,"suiteId"),{proxy:v}=Ie(),{qtr_case_status:Q}=v.useDict("qtr_case_status"),{qtr_data_type:T}=v.useDict("qtr_data_type"),N=u(!0),U=u(!1),S=u(!1),$=u(!1),j=u(0),M=u(0),R=u([]);u([]);const E=u([]),k=u([]),z=u(!0),Y=u(!0),O=u([]),m=he({form:{},queryParams:{dataName:void 0,projectId:void 0,suiteDetailId:void 0,suiteId:L,dataId:void 0,moduleId:void 0,pageNum:1,pageSize:10,status:void 0}}),K=ce(f,"openSuiteDetailDialog"),{queryParams:b,form:c}=we(m);function x(o){O.value=o.map(a=>a.suiteDetailId)}function _(){H()}function Z(){v.resetForm("queryRef_detail"),_()}function J(){M.value=L.value,U.value=!0}function ee(){Ve(null).then(o=>{E.value=o.data})}function X(){$e(b.value).then(o=>{k.value=o.data})}function te(){b.value.moduleId=void 0,X()}function H(){S.value=!0,Je(b.value).then(o=>{R.value=o.rows,j.value=o.total}).finally(()=>{S.value=!1})}function de(){R.value=[]}function y(o){$.value=!0,We(o.suiteDetailId).then(a=>{if(!a.data||Object.keys(a.data).length===0){alert("未查到对应数据！");return}a.data.status=o.status,Xe(a.data).then(h=>{v.$modal.msgSuccess("修改成功")})}).finally(()=>{$.value=!1})}function d(o){Ye({suiteId:o.suiteId,orderNum:o.orderNum,dataId:o.dataId}).then(a=>{xe.success(a.msg)}).catch(a=>{xe.error("操作失败")})}return ee(),H(),(o,a)=>{const h=n("el-option"),P=n("el-select"),I=n("el-form-item"),B=n("el-input"),F=n("el-button"),ie=n("el-form"),le=n("el-col"),ge=n("right-toolbar"),V=n("el-row"),C=n("el-table-column"),re=n("dict-tag"),_e=n("el-switch"),pe=n("el-table"),i=n("pagination"),g=n("el-dialog"),be=fe("hasPermi"),De=fe("loading");return p(),D(g,{fullscreen:"",suiteId:L.value,modelValue:K.value,"onUpdate:modelValue":a[9]||(a[9]=s=>K.value=s),"append-to-body":"","destroy-on-close":"",onClose:de,onOpen:H},{default:l(()=>[G("div",it,[q(e(ie,{model:t(b),ref:"queryRef_detail",inline:!0},{default:l(()=>[e(I,{label:"所属项目",prop:"projectId"},{default:l(()=>[e(P,{modelValue:t(b).projectId,"onUpdate:modelValue":a[0]||(a[0]=s=>t(b).projectId=s),placeholder:"请选择",onChange:te,clearable:"",style:{width:"150px"}},{default:l(()=>[(p(!0),A(ae,null,oe(t(E),s=>(p(),D(h,{key:s.projectId,label:s.projectName,value:s.projectId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(I,{label:"所属模块",prop:"moduleId"},{default:l(()=>[e(P,{modelValue:t(b).moduleId,"onUpdate:modelValue":a[1]||(a[1]=s=>t(b).moduleId=s),placeholder:"请选择",clearable:"",style:{width:"150px"}},{default:l(()=>[(p(!0),A(ae,null,oe(t(k),s=>(p(),D(h,{key:s.moduleId,label:s.moduleName,value:s.moduleId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a[12]||(a[12]=w(" 、 ")),e(I,{label:"数据ID",prop:"dataId"},{default:l(()=>[e(B,{modelValue:t(b).dataId,"onUpdate:modelValue":a[2]||(a[2]=s=>t(b).dataId=s),placeholder:"请输入数据ID",clearable:"",style:{width:"200px"},onKeyup:ve(_,["enter"])},null,8,["modelValue"])]),_:1}),e(I,{label:"数据名称",prop:"dataName"},{default:l(()=>[e(B,{modelValue:t(b).dataName,"onUpdate:modelValue":a[3]||(a[3]=s=>t(b).dataName=s),placeholder:"请输入数据名称",clearable:"",style:{width:"200px"},onKeyup:ve(_,["enter"])},null,8,["modelValue"])]),_:1}),e(I,{label:"数据状态",prop:"status"},{default:l(()=>[e(P,{modelValue:t(b).status,"onUpdate:modelValue":a[4]||(a[4]=s=>t(b).status=s),placeholder:"数据状态",clearable:"",style:{width:"200px"}},{default:l(()=>[(p(!0),A(ae,null,oe(t(Q),s=>(p(),D(h,{key:s.value*1,label:s.label,value:s.value*1},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(I,null,{default:l(()=>[e(F,{type:"primary",icon:"Search",onClick:_},{default:l(()=>a[10]||(a[10]=[w("搜索")])),_:1}),e(F,{type:"success",icon:"Refresh",onClick:Z},{default:l(()=>a[11]||(a[11]=[w("重置")])),_:1})]),_:1})]),_:1},8,["model"]),[[se,t(N)]]),e(V,{gutter:10,class:"mb8"},{default:l(()=>[e(le,{span:1.5},{default:l(()=>[e(F,{type:"warning",icon:"Plus",onClick:J},{default:l(()=>a[13]||(a[13]=[w("选择数据")])),_:1})]),_:1}),e(ge,{showSearch:t(N),"onUpdate:showSearch":a[5]||(a[5]=s=>ne(N)?N.value=s:null),onQueryTable:H},null,8,["showSearch"])]),_:1})]),t(z)?q((p(),D(pe,{key:0,border:"",data:t(R),"row-key":"suiteDetailId","default-expand-all":t(Y),onSelectionChange:x},{default:l(()=>[e(C,{type:"selection",width:"55",align:"center"}),e(C,{prop:"suiteDetailId",label:"ID",width:"160",align:"center"}),e(C,{prop:"suiteId",label:"套件ID",width:"160",align:"center"}),e(C,{prop:"dataId",label:"数据ID",width:"160",align:"center"}),e(C,{prop:"dataType",label:"数据类型",width:"100",align:"center"},{default:l(s=>[e(re,{options:t(T),value:s.row.dataType+""},null,8,["options","value"])]),_:1}),e(C,{prop:"dataName",label:"数据名称"}),e(C,{prop:"orderNum",label:"排序",width:"80px"},{default:l(s=>[e(B,{modelValue:s.row.orderNum,"onUpdate:modelValue":me=>s.row.orderNum=me,onChange:me=>d(s.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(C,{prop:"dataStatus",label:"数据状态",width:"100",align:"center"},{default:l(s=>[e(re,{options:t(Q),value:s.row.dataStatus+""},null,8,["options","value"])]),_:1}),e(C,{label:"创建时间",align:"center",prop:"createTime",width:"160","class-name":"small-padding fixed-width"},{default:l(s=>[G("span",null,W(o.parseTime(s.row.createTime)),1)]),_:1}),e(C,{label:"更新时间",align:"center",prop:"updateTime",width:"160","class-name":"small-padding fixed-width"},{default:l(s=>[G("span",null,W(o.parseTime(s.row.updateTime)),1)]),_:1}),e(C,{label:"操作",width:"170",align:"center","class-name":"small-padding fixed-width",fixed:"right"},{default:l(s=>[e(_e,{modelValue:s.row.status,"onUpdate:modelValue":me=>s.row.status=me,"active-value":2,"active-text":"启用","inactive-value":1,"inactive-text":"停用",onChange:me=>y(s.row),loading:t($)},null,8,["modelValue","onUpdate:modelValue","onChange","loading"]),q(e(F,{link:"",type:"danger",icon:"Delete",onClick:me=>o.handleDelete(s.row),title:"删除"},null,8,["onClick"]),[[be,["qtr:suite:remove"]]])]),_:1})]),_:1},8,["data","default-expand-all"])),[[De,t(S)]]):Ce("",!0),q(e(i,{total:t(j),page:t(b).pageNum,"onUpdate:page":a[6]||(a[6]=s=>t(b).pageNum=s),limit:t(b).pageSize,"onUpdate:limit":a[7]||(a[7]=s=>t(b).pageSize=s),onPagination:H},null,8,["total","page","limit"]),[[se,t(j)>0]]),e(st,{"form-datas":t(c),suiteId:t(M),onCloseDialog:H,"open-config-suite-data-dialog":t(U),"onUpdate:openConfigSuiteDataDialog":a[8]||(a[8]=s=>ne(U)?U.value=s:null)},null,8,["form-datas","suiteId","open-config-suite-data-dialog"])]),_:1},8,["suiteId","modelValue"])}}}),mt={class:"app-container"},ct={class:"dialog-footer"},ft=ye({name:"Suite"}),Nt=Object.assign(ft,{setup(f){const{proxy:L}=Ie(),{qtr_data_status:v}=L.useDict("qtr_data_status"),Q=u([]),T=u(!1),N=u(!1),U=u(!0),S=u(!0),$=u(""),j=u(0),M=u(!0),R=u(!0),E=u(0),k=u(!1),z=u([]),Y=he({form:{},queryParams:{pageNum:1,pageSize:10,suiteName:void 0,status:void 0},rules:{suiteName:[{required:!0,message:"套件名称不能为空",trigger:"blur"}],orderNum:[{required:!0,message:"显示排序不能为空",trigger:"blur"}]}}),{queryParams:O,form:m,rules:K}=we(Y),b=Pe(()=>$.value);function c(){U.value=!0,Be(O.value).then(o=>{Q.value=o.rows,E.value=o.total,U.value=!1})}function x(o){z.value=o.map(a=>a.suiteId)}function _(){T.value=!1,Z()}function Z(){m.value={suiteId:void 0,suiteName:void 0,orderNum:0,simpleDesc:void 0,status:"0"},L.resetForm("suiteRef")}function J(){c()}function ee(){L.resetForm("queryRef"),J()}function X(o){Z(),T.value=!0,$.value="添加套件"}function te(o){const a=o.suiteId;Te(a).then(h=>{if(!h.data||Object.keys(h.data).length===0){alert("未查到对应数据！");return}m.value=h.data,N.value=!0,j.value=o.suiteId,$.value="配置套件【"+h.data.suiteName+"】"})}function H(o){Z(),Te(o.suiteId).then(a=>{if(!a.data||Object.keys(a.data).length===0){alert("未查到对应数据！");return}m.value=a.data,T.value=!0,$.value="修改套件"})}function de(){L.$refs.suiteRef.validate(o=>{o&&(m.value.suiteId!=null?He(m.value).then(a=>{L.$modal.msgSuccess("修改成功"),T.value=!1,c()}):Ae(m.value).then(a=>{L.$modal.msgSuccess("新增成功"),T.value=!1,c()}))})}function y(o){L.$modal.confirm('是否确认删除名称为"'+o.suiteName+'"的数据项?').then(function(){return Ge(o.suiteId)}).then(()=>{c(),L.$modal.msgSuccess("删除成功")}).catch(()=>{})}function d(o){if(o&&"suiteId"in o&&o.suiteId&&(z.value=[o.suiteId]),!z.value||z.value.length===0){Se.alert("请选择要运行的套件","提示！",{type:"warning"});return}k.value=!0}return c(),(o,a)=>{const h=n("el-input"),P=n("el-form-item"),I=n("el-option"),B=n("el-select"),F=n("el-button"),ie=n("el-form"),le=n("el-col"),ge=n("right-toolbar"),V=n("el-row"),C=n("el-table-column"),re=n("dict-tag"),_e=n("el-table"),pe=n("pagination"),i=n("el-input-number"),g=n("el-radio"),be=n("el-radio-group"),De=n("el-dialog"),s=fe("hasPermi"),me=fe("loading");return p(),A("div",mt,[q(e(ie,{model:t(O),ref:"queryRef",inline:!0},{default:l(()=>[e(P,{label:"套件名称",prop:"suiteName"},{default:l(()=>[e(h,{modelValue:t(O).suiteName,"onUpdate:modelValue":a[0]||(a[0]=r=>t(O).suiteName=r),placeholder:"请输入套件名称",clearable:"",style:{width:"200px"},onKeyup:ve(J,["enter"])},null,8,["modelValue"])]),_:1}),e(P,{label:"状态",prop:"status"},{default:l(()=>[e(B,{modelValue:t(O).status,"onUpdate:modelValue":a[1]||(a[1]=r=>t(O).status=r),placeholder:"套件状态",clearable:"",style:{width:"200px"}},{default:l(()=>[(p(!0),A(ae,null,oe(t(v),r=>(p(),D(I,{key:r.value*1,label:r.label,value:r.value*1},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(P,null,{default:l(()=>[e(F,{type:"primary",icon:"Search",onClick:J},{default:l(()=>a[12]||(a[12]=[w("搜索")])),_:1}),e(F,{icon:"Refresh",onClick:ee},{default:l(()=>a[13]||(a[13]=[w("重置")])),_:1})]),_:1})]),_:1},8,["model"]),[[se,t(S)]]),e(V,{gutter:10,class:"mb8"},{default:l(()=>[e(le,{span:1.5},{default:l(()=>[q((p(),D(F,{type:"primary",plain:"",icon:"Plus",onClick:X},{default:l(()=>a[14]||(a[14]=[w("新增 ")])),_:1})),[[s,["qtr:suite:add"]]]),q((p(),D(F,{type:"warning",icon:"CaretRight",onClick:d,title:"运行"},{default:l(()=>a[15]||(a[15]=[w("执行 ")])),_:1})),[[s,["hrm:case:run"]]])]),_:1}),e(ge,{showSearch:t(S),"onUpdate:showSearch":a[2]||(a[2]=r=>ne(S)?S.value=r:null),onQueryTable:c},null,8,["showSearch"])]),_:1}),t(R)?q((p(),D(_e,{key:0,border:"",data:t(Q),"row-key":"suiteId","default-expand-all":t(M),onSelectionChange:x},{default:l(()=>[e(C,{type:"selection",width:"55",align:"center"}),e(C,{prop:"suiteId",label:"ID",width:"160"}),e(C,{prop:"suiteName",label:"套件名称",width:"200"}),e(C,{prop:"orderNum",label:"排序",width:"200"}),e(C,{prop:"status",label:"状态",width:"100"},{default:l(r=>[e(re,{options:t(v),value:r.row.status+""},null,8,["options","value"])]),_:1}),e(C,{label:"创建时间",align:"center",prop:"createTime","class-name":"small-padding fixed-width"},{default:l(r=>[G("span",null,W(o.parseTime(r.row.createTime)),1)]),_:1}),e(C,{label:"更新时间",align:"center",prop:"updateTime","class-name":"small-padding fixed-width"},{default:l(r=>[G("span",null,W(o.parseTime(r.row.updateTime)),1)]),_:1}),e(C,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:l(r=>[q((p(),D(F,{link:"",type:"primary",icon:"Edit",onClick:je=>H(r.row)},{default:l(()=>a[16]||(a[16]=[w(" 修改 ")])),_:2},1032,["onClick"])),[[s,["qtr:suite:edit"]]]),q((p(),D(F,{link:"",type:"primary",icon:"Tools",onClick:je=>te(r.row)},{default:l(()=>a[17]||(a[17]=[w(" 配置 ")])),_:2},1032,["onClick"])),[[s,["qtr:suite:edit"]]]),q((p(),D(F,{link:"",type:"primary",icon:"Delete",onClick:je=>y(r.row)},{default:l(()=>a[18]||(a[18]=[w(" 删除 ")])),_:2},1032,["onClick"])),[[s,["qtr:suite:remove"]]])]),_:1})]),_:1},8,["data","default-expand-all"])),[[me,t(U)]]):Ce("",!0),q(e(pe,{total:t(E),page:t(O).pageNum,"onUpdate:page":a[3]||(a[3]=r=>t(O).pageNum=r),limit:t(O).pageSize,"onUpdate:limit":a[4]||(a[4]=r=>t(O).pageSize=r),onPagination:c},null,8,["total","page","limit"]),[[se,t(E)>0]]),e(De,{title:t($),modelValue:t(T),"onUpdate:modelValue":a[9]||(a[9]=r=>ne(T)?T.value=r:null),"append-to-body":""},{footer:l(()=>[G("div",ct,[e(F,{type:"primary",onClick:de},{default:l(()=>a[19]||(a[19]=[w("确 定")])),_:1}),e(F,{onClick:_},{default:l(()=>a[20]||(a[20]=[w("取 消")])),_:1})])]),default:l(()=>[e(ie,{ref:"suiteRef",model:t(m),rules:t(K),"label-width":"80px"},{default:l(()=>[e(V,null,{default:l(()=>[e(le,{span:12},{default:l(()=>[e(P,{label:"套件名称",prop:"suiteName"},{default:l(()=>[e(h,{modelValue:t(m).suiteName,"onUpdate:modelValue":a[5]||(a[5]=r=>t(m).suiteName=r),placeholder:"请输入套件名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(le,{span:12},{default:l(()=>[e(P,{label:"显示排序",prop:"orderNum"},{default:l(()=>[e(i,{modelValue:t(m).orderNum,"onUpdate:modelValue":a[6]||(a[6]=r=>t(m).orderNum=r),"controls-position":"right",min:0},null,8,["modelValue"])]),_:1})]),_:1}),e(le,{span:12},{default:l(()=>[e(P,{label:"套件描述",prop:"simpleDesc"},{default:l(()=>[e(h,{modelValue:t(m).simpleDesc,"onUpdate:modelValue":a[7]||(a[7]=r=>t(m).simpleDesc=r),placeholder:"请输入描述",maxlength:"400"},null,8,["modelValue"])]),_:1})]),_:1}),e(le,{span:12},{default:l(()=>[e(P,{label:"套件状态"},{default:l(()=>[e(be,{modelValue:t(m).status,"onUpdate:modelValue":a[8]||(a[8]=r=>t(m).status=r)},{default:l(()=>[(p(!0),A(ae,null,oe(t(v),r=>(p(),D(g,{key:r.value*1,value:r.value*1},{default:l(()=>[w(W(r.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"]),e(Le,{"dialog-visible":t(k),"onUpdate:dialogVisible":a[10]||(a[10]=r=>ne(k)?k.value=r:null),"run-type":t(Oe).suite,"run-ids":t(z)},null,8,["dialog-visible","run-type","run-ids"]),e(pt,{"form-datas":t(m),"open-suite-detail-dialog":t(N),"onUpdate:openSuiteDetailDialog":a[11]||(a[11]=r=>ne(N)?N.value=r:null),title:t(b),suiteId:t(j),"show-close":"","destroy-on-close":!0},null,8,["form-datas","open-suite-detail-dialog","title","suiteId"])])}}});export{Nt as default};

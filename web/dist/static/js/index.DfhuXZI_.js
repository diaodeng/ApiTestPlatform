import{a as Se,l as Ue,c as Pe,g as $e,u as Me,_ as Re,b as Ve,d as Oe,e as Qe,f as Le}from"./suite-table-query.z8lbDPjw.js";import{H as Ce,R as Ee,S as ze}from"./enum.BYy-eByp.js";import{_ as Fe}from"./run_dialog.CVJLGgG4.js";import{F as be,d as ve,r as u,A as ue,J as ye,N as Ie,e as n,H as se,c as G,o as m,I as U,f as e,k as Ne,M as ie,l as t,i as l,m as me,O as le,P as ae,j as C,n as w,K as ne,h as Y,y as te,E as he,av as ke,v as xe,a5 as Ke,a7 as De,_ as Be,au as je}from"./index.DLM0P_FN.js";import{l as we}from"./project.NehpJ71d.js";import{s as Te,l as Ae,g as He,d as Ge}from"./module.CsavA2LQ.js";import{a as Je}from"./data-template.BrUbBjfC.js";import{l as We}from"./case.ClJHBfiF.js";import"./run-config.DU_xBo-W.js";import"./env-selector.BKBox_zM.js";import"./env.DaAQ5naB.js";import"./forward.CYnhzzK1.js";import"./agent.DUVcbZuN.js";import"./run_detail.BJTn3gqP.js";import"./tools.De_J0dJF.js";const Xe={class:"app-container"},Ye=be({name:"project"}),Ze=Object.assign(Ye,{props:{suiteId:{},suiteIdModifiers:{}},emits:["update:suiteId"],setup(B,{expose:P}){const{proxy:y}=ve(),{qtr_data_status:$}=y.useDict("qtr_data_status"),S=u([]);u(!1);const j=u(!1),D=u(!0);u("");const M=u(!0),N=u(!0),g=u([]),x=ue(B,"suiteId"),T=u([]),b=ye({form:{},queryParams:{projectName:void 0,status:void 0,isPage:!1,suiteId:x,dataType:1},rules:{projectName:[{required:!0,message:"项目名称不能为空",trigger:"blur"}],orderNum:[{required:!0,message:"显示排序不能为空",trigger:"blur"}]}}),{queryParams:R,form:O,rules:z}=Ie(b);P({getList:W});function W(){j.value=!0,we(R.value).then(h=>{S.value=h.data,j.value=!1})}function V(h){g.value=h.map(i=>i.projectId),T.value=g.value,multiple.value=!h.length}function J(){W()}function I(){y.resetForm("queryRef"),J()}function Q(h){if(h&&"projectId"in h&&h.projectId&&(T.value=[h.projectId]),!T.value||T.value.length===0){he.alert("请选择项目","提示！",{type:"warning"});return}const i={suiteId:x.value,dataIds:T.value,dataType:1};Se(i).then(Z=>{y.$modal.msgSuccess("新增成功"),openProjectCaseDialog.value=!1})}return(h,i)=>{const Z=n("el-input"),v=n("el-form-item"),d=n("el-option"),k=n("el-select"),F=n("el-button"),q=n("el-form"),X=n("el-col"),oe=n("right-toolbar"),f=n("el-row"),a=n("el-table-column"),o=n("dict-tag"),L=n("el-table"),E=se("loading");return m(),G("div",Xe,[U(e(q,{model:t(R),ref:"queryRef",inline:!0},{default:l(()=>[e(v,{label:"项目名称",prop:"projectName"},{default:l(()=>[e(Z,{modelValue:t(R).projectName,"onUpdate:modelValue":i[0]||(i[0]=p=>t(R).projectName=p),placeholder:"请输入项目名称",clearable:"",style:{width:"200px"},onKeyup:me(J,["enter"])},null,8,["modelValue"])]),_:1}),e(v,{label:"状态",prop:"status"},{default:l(()=>[e(k,{modelValue:t(R).status,"onUpdate:modelValue":i[1]||(i[1]=p=>t(R).status=p),placeholder:"项目状态",clearable:"",style:{width:"200px"}},{default:l(()=>[(m(!0),G(le,null,ae(t($),p=>(m(),C(d,{key:p.value*1,label:p.label,value:p.value*1},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(v,null,{default:l(()=>[e(F,{type:"primary",icon:"Search",onClick:J},{default:l(()=>i[3]||(i[3]=[w("搜索")])),_:1,__:[3]}),e(F,{icon:"Refresh",onClick:I},{default:l(()=>i[4]||(i[4]=[w("重置")])),_:1,__:[4]})]),_:1})]),_:1},8,["model"]),[[ie,t(D)]]),e(f,{gutter:10,class:"mb8"},{default:l(()=>[e(X,{span:1.5},{default:l(()=>[e(F,{type:"primary",onClick:Q},{default:l(()=>i[5]||(i[5]=[w("保存")])),_:1,__:[5]})]),_:1}),e(oe,{showSearch:t(D),"onUpdate:showSearch":i[2]||(i[2]=p=>ne(D)?D.value=p:null),onQueryTable:W},null,8,["showSearch"])]),_:1}),t(N)?U((m(),C(L,{key:0,border:"",data:t(S),style:{width:"100%"},height:"350","row-key":"projectId","default-expand-all":t(M),onSelectionChange:V},{default:l(()=>[e(a,{type:"selection",width:"55",align:"center"}),e(a,{prop:"projectId",label:"ID",width:"150"}),e(a,{prop:"projectName",align:"center",label:"项目名称",width:"200"}),e(a,{prop:"testUser",label:"测试负责人",align:"center",width:"120"}),e(a,{prop:"status",label:"状态",align:"center",width:"100"},{default:l(p=>[e(o,{options:t($),value:p.row.status+""},null,8,["options","value"])]),_:1}),e(a,{label:"创建时间",align:"center",prop:"createTime","class-name":"small-padding fixed-width"},{default:l(p=>[Y("span",null,te(h.parseTime(p.row.createTime)),1)]),_:1}),e(a,{label:"更新时间",align:"center",prop:"updateTime","class-name":"small-padding fixed-width"},{default:l(p=>[Y("span",null,te(h.parseTime(p.row.updateTime)),1)]),_:1})]),_:1},8,["data","default-expand-all"])),[[E,t(j)]]):Ne("",!0)])}}}),et={class:"app-container"},tt={__name:"case-data",props:ke({dataType:{type:Number,default:Ce.case},formRules:{type:Object,default:{caseName:[{required:!0,message:"用例名称不能为空",trigger:"blur"}],projectId:[{required:!0,message:"所属项目不能为空",trigger:"blur"}],moduleId:[{required:!0,message:"所属模块不能为空",trigger:"blur"}]}}},{suiteId:{},suiteIdModifiers:{},openProjectCaseDialog:{},openProjectCaseDialogModifiers:{}}),emits:["update:suiteId","update:openProjectCaseDialog"],setup(B,{expose:P}){const{proxy:y}=ve(),{qtr_case_status:$}=y.useDict("qtr_case_status"),{sys_normal_disable:S}=y.useDict("sys_normal_disable"),{sys_request_method:j}=y.useDict("sys_request_method"),{hrm_data_type:D}=y.useDict("hrm_data_type"),M=ue(B,"suiteId");P({getList:v});const N=B,g=xe(()=>N.dataType===Ce.case?"用例":"配置");De("hrm_data_type",D),De("sys_normal_disable",S);const x=ue(B,"openProjectCaseDialog"),T=u([]),b=u([]),R=u([]);u(!1);const O=u(!1),z=u(!0),W=u([]),V=u(!0),J=u(!0),I=u(0);u("");const Q=u(!0),h=u([]);u(!1);const i=Ke({pageNum:1,pageSize:10,type:N.dataType,caseId:void 0,suiteId:M,dataType:3,caseName:void 0,projectId:void 0,moduleId:void 0,status:void 0,onlySelf:Q});u(Je);function Z(a){return a||"全局"}function v(){O.value=!0,We(i.value).then(a=>{T.value=a.rows,I.value=a.total}).finally(()=>{O.value=!1})}function d(){we(null).then(a=>{b.value=a.data})}function k(){Te(i.value).then(a=>{R.value=a.data})}function F(){i.value.moduleId=void 0,k()}function q(){i.value.pageNum=1,v()}function X(){y.resetForm("queryRef"),q()}function oe(a){W.value=a.map(o=>o.caseId),h.value=W.value,V.value=a.length!==1,J.value=!a.length}function f(a){if(a&&"caseId"in a&&a.caseId&&(h.value=[a.caseId]),!h.value||h.value.length===0){he.alert("请选择用例","提示！",{type:"warning"});return}const o={suiteId:M.value,dataIds:h.value,dataType:3};Se(o).then(L=>{y.$modal.msgSuccess("新增成功"),x.value=!1})}return d(),(a,o)=>{const L=n("el-option"),E=n("el-select"),p=n("el-form-item"),c=n("el-input"),ee=n("el-checkbox"),de=n("el-button"),ce=n("el-form"),fe=n("el-col"),A=n("right-toolbar"),K=n("el-row"),H=n("el-table-column"),_e=n("dict-tag"),re=n("el-table"),ge=n("pagination"),_=se("loading");return m(),G("div",et,[U(e(ce,{model:t(i),ref:"queryRef",inline:!0},{default:l(()=>[e(p,{label:"所属项目",prop:"projectId"},{default:l(()=>[e(E,{modelValue:t(i).projectId,"onUpdate:modelValue":o[0]||(o[0]=r=>t(i).projectId=r),placeholder:"请选择",onChange:F,clearable:"",style:{width:"150px"}},{default:l(()=>[(m(!0),G(le,null,ae(t(b),r=>(m(),C(L,{key:r.projectId,label:r.projectName,value:r.projectId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"所属模块",prop:"moduleId"},{default:l(()=>[e(E,{modelValue:t(i).moduleId,"onUpdate:modelValue":o[1]||(o[1]=r=>t(i).moduleId=r),placeholder:"请选择",clearable:"",style:{width:"150px"}},{default:l(()=>[(m(!0),G(le,null,ae(t(R),r=>(m(),C(L,{key:r.moduleId,label:r.moduleName,value:r.moduleId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(p,{label:t(g)+"ID",prop:"caseId"},{default:l(()=>[e(c,{modelValue:t(i).caseId,"onUpdate:modelValue":o[2]||(o[2]=r=>t(i).caseId=r),placeholder:"请输入"+t(g)+"ID",clearable:"",style:{width:"200px"},onKeyup:me(q,["enter"])},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(p,{label:t(g)+"名称",prop:"caseName"},{default:l(()=>[e(c,{modelValue:t(i).caseName,"onUpdate:modelValue":o[3]||(o[3]=r=>t(i).caseName=r),placeholder:"请输入"+t(g)+"名称",clearable:"",style:{width:"200px"},onKeyup:me(q,["enter"])},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(p,{label:"状态",prop:"status"},{default:l(()=>[e(E,{modelValue:t(i).status,"onUpdate:modelValue":o[4]||(o[4]=r=>t(i).status=r),placeholder:t(g)+"状态",clearable:"",style:{width:"100px"}},{default:l(()=>[(m(!0),G(le,null,ae(t(S),r=>(m(),C(L,{key:r.value*1,label:r.label,value:r.value*1},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1}),e(p,null,{default:l(()=>[e(ee,{modelValue:t(Q),"onUpdate:modelValue":o[5]||(o[5]=r=>ne(Q)?Q.value=r:null),onChange:q},{default:l(()=>o[9]||(o[9]=[w("仅自己的数据")])),_:1,__:[9]},8,["modelValue"])]),_:1}),e(p,null,{default:l(()=>[e(de,{type:"primary",icon:"Search",onClick:q},{default:l(()=>o[10]||(o[10]=[w("搜索")])),_:1,__:[10]}),e(de,{type:"default",icon:"Refresh",onClick:X},{default:l(()=>o[11]||(o[11]=[w("重置")])),_:1,__:[11]})]),_:1})]),_:1},8,["model"]),[[ie,t(z)]]),e(K,{gutter:10,class:"mb8"},{default:l(()=>[e(fe,{span:1.5},{default:l(()=>[e(de,{type:"primary",onClick:f},{default:l(()=>o[12]||(o[12]=[w("保存")])),_:1,__:[12]})]),_:1}),e(A,{showSearch:t(z),"onUpdate:showSearch":o[6]||(o[6]=r=>ne(z)?z.value=r:null),onQueryTable:v},null,8,["showSearch"])]),_:1}),U((m(),C(re,{data:t(T),style:{width:"100%"},height:"350",onSelectionChange:oe,border:"","table-layout":"fixed"},{default:l(()=>[e(H,{type:"selection",width:"55",align:"center"}),e(H,{label:t(g)+"ID",prop:"caseId",width:"150px"},null,8,["label"]),e(H,{label:t(g)+"名称",prop:"caseName",width:"auto"},null,8,["label"]),e(H,{label:"所属项目",prop:"projectName"},{default:l(r=>[Y("span",null,te(Z(r.row.projectName)),1)]),_:1}),e(H,{label:"所属模块",prop:"moduleName"},{default:l(r=>[Y("span",null,te(Z(r.row.moduleName)),1)]),_:1}),e(H,{label:"状态",align:"center",prop:"status",width:"70px"},{default:l(r=>[e(_e,{options:t(S),value:r.row.status+""},null,8,["options","value"])]),_:1}),e(H,{label:"创建人",align:"center",prop:"createBy"}),e(H,{label:"创建时间",align:"center",prop:"createTime","class-name":"small-padding fixed-width",width:"150px"},{default:l(r=>[Y("span",null,te(a.parseTime(r.row.createTime)),1)]),_:1}),e(H,{label:"更新时间",align:"center",prop:"createTime","class-name":"small-padding fixed-width",width:"150px"},{default:l(r=>[Y("span",null,te(a.parseTime(r.row.updateTime)),1)]),_:1})]),_:1},8,["data"])),[[_,t(O)]]),U(e(ge,{total:t(I),page:t(i).pageNum,"onUpdate:page":o[7]||(o[7]=r=>t(i).pageNum=r),limit:t(i).pageSize,"onUpdate:limit":o[8]||(o[8]=r=>t(i).pageSize=r),onPagination:v},null,8,["total","page","limit"]),[[ie,t(I)>0]])])}}},lt={class:"app-container"},at=be({name:"Module"}),ot=Object.assign(at,{props:{suiteId:{},suiteIdModifiers:{}},emits:["update:suiteId"],setup(B,{expose:P}){const{proxy:y}=ve(),{qtr_data_status:$}=y.useDict("qtr_data_status"),S=u([]),j=u([]),D=u(!1),M=u(!1),N=u(!0),g=u([]),x=u(!0),T=u(!0),b=u(0),R=u("");u(!1),u([]);const O=ue(B,"suiteId"),z=u([]),W=ye({form:{testUser:void 0},queryParams:{pageNum:1,pageSize:10,suiteId:O,dataType:2,projectId:void 0,moduleName:void 0,status:void 0},rules:{moduleName:[{required:!0,message:"模块名称不能为空",trigger:"blur"}],projectId:[{required:!0,message:"所属项目不能为空",trigger:"blur"}],testUser:[{required:!0,message:"测试负责人不能为空",trigger:"blur"}],sort:[{required:!0,message:"模块顺序不能为空",trigger:"blur"}]}}),{queryParams:V,form:J,rules:I}=Ie(W);P({getList:Q});function Q(){M.value=!0,Ae(V.value).then(f=>{S.value=f.rows,b.value=f.total,M.value=!1})}function h(){we({isPage:!1}).then(f=>{j.value=f.data})}function i(f,a,o){return Z(f.projectId)}function Z(f){for(const a of j.value)if(f===a.projectId)return a.projectName}function v(){J.value={moduleId:void 0,projectId:void 0,moduleName:void 0,sort:0,status:"0",remark:void 0},y.resetForm("postRef")}function d(){V.value.pageNum=1,h(),Q()}function k(){y.resetForm("queryRef"),d()}function F(f){g.value=f.map(a=>a.moduleId),z.value=g.value,x.value=f.length!=1,T.value=!f.length}function q(f){v();const a=f.moduleId||g.value;He(a).then(o=>{J.value=o.data,D.value=!0,R.value="修改模块"})}function X(f){const a=f.moduleId||g.value;y.$modal.confirm('是否确认删除模块编号为"'+a+'"的数据项？').then(function(){return Ge(a)}).then(()=>{Q(),y.$modal.msgSuccess("删除成功")}).catch(()=>{})}function oe(f){if(f&&"projectId"in f&&f.moduleId&&(z.value=[f.moduleId]),!z.value||z.value.length===0){he.alert("请选择模块","提示！",{type:"warning"});return}const a={suiteId:O.value,dataIds:z.value,dataType:2};Se(a).then(o=>{y.$modal.msgSuccess("新增成功"),openProjectCaseDialog.value=!1})}return h(),(f,a)=>{const o=n("el-option"),L=n("el-select"),E=n("el-form-item"),p=n("el-input"),c=n("el-button"),ee=n("el-form"),de=n("el-col"),ce=n("right-toolbar"),fe=n("el-row"),A=n("el-table-column"),K=n("dict-tag"),H=n("el-table"),_e=n("pagination"),re=se("hasPermi"),ge=se("loading");return m(),G("div",lt,[U(e(ee,{model:t(V),ref:"queryRef",inline:!0},{default:l(()=>[e(E,{label:"项目",prop:"projectId"},{default:l(()=>[e(L,{modelValue:t(V).projectId,"onUpdate:modelValue":a[0]||(a[0]=_=>t(V).projectId=_),placeholder:"请选择",clearable:"",style:{width:"150px"}},{default:l(()=>[(m(!0),G(le,null,ae(t(j),_=>(m(),C(o,{key:_.projectId,label:_.projectName,value:_.projectId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(E,{label:"模块名称",prop:"moduleName"},{default:l(()=>[e(p,{modelValue:t(V).moduleName,"onUpdate:modelValue":a[1]||(a[1]=_=>t(V).moduleName=_),placeholder:"请输入模块名称",clearable:"",style:{width:"200px"},onKeyup:me(d,["enter"])},null,8,["modelValue"])]),_:1}),e(E,{label:"状态",prop:"status"},{default:l(()=>[e(L,{modelValue:t(V).status,"onUpdate:modelValue":a[2]||(a[2]=_=>t(V).status=_),placeholder:"模块状态",clearable:"",style:{width:"200px"}},{default:l(()=>[(m(!0),G(le,null,ae(t($),_=>(m(),C(o,{key:_.value*1,label:_.label,value:_.value*1},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(E,null,{default:l(()=>[e(c,{type:"primary",icon:"Search",onClick:d},{default:l(()=>a[6]||(a[6]=[w("搜索")])),_:1,__:[6]}),e(c,{icon:"Refresh",onClick:k},{default:l(()=>a[7]||(a[7]=[w("重置")])),_:1,__:[7]})]),_:1})]),_:1},8,["model"]),[[ie,t(N)]]),e(fe,{gutter:10,class:"mb8"},{default:l(()=>[e(de,{span:1.5},{default:l(()=>[e(c,{type:"primary",onClick:oe},{default:l(()=>a[8]||(a[8]=[w("保存")])),_:1,__:[8]})]),_:1}),e(ce,{showSearch:t(N),"onUpdate:showSearch":a[3]||(a[3]=_=>ne(N)?N.value=_:null),onQueryTable:Q},null,8,["showSearch"])]),_:1}),U((m(),C(H,{border:"",data:t(S),style:{width:"100%"},height:"350",onSelectionChange:F},{default:l(()=>[e(A,{type:"selection",width:"55",align:"center"}),e(A,{label:"模块ID",align:"center",prop:"moduleId"}),e(A,{label:"模块名称",align:"center",prop:"moduleName"}),e(A,{label:"所属项目",align:"center",formatter:i}),e(A,{label:"测试人员",align:"center",prop:"testUser"}),e(A,{label:"模块排序",align:"center",prop:"sort"}),e(A,{label:"状态",align:"center",prop:"status"},{default:l(_=>[e(K,{options:t($),value:_.row.status+""},null,8,["options","value"])]),_:1}),e(A,{label:"创建时间",align:"center",prop:"createTime","class-name":"small-padding fixed-width"},{default:l(_=>[Y("span",null,te(f.parseTime(_.row.createTime)),1)]),_:1}),e(A,{label:"更新时间",align:"center",prop:"createTime","class-name":"small-padding fixed-width"},{default:l(_=>[Y("span",null,te(f.parseTime(_.row.updateTime)),1)]),_:1}),e(A,{label:"操作",width:"180",align:"center","class-name":"small-padding fixed-width"},{default:l(_=>[U((m(),C(c,{link:"",type:"primary",icon:"Edit",onClick:r=>q(_.row)},{default:l(()=>a[9]||(a[9]=[w(" 修改 ")])),_:2,__:[9]},1032,["onClick"])),[[re,["hrm:module:edit"]]]),U((m(),C(c,{link:"",type:"primary",icon:"Delete",onClick:r=>X(_.row)},{default:l(()=>a[10]||(a[10]=[w("删除 ")])),_:2,__:[10]},1032,["onClick"])),[[re,["hrm:module:remove"]]])]),_:1})]),_:1},8,["data"])),[[ge,t(M)]]),U(e(_e,{total:t(b),page:t(V).pageNum,"onUpdate:page":a[4]||(a[4]=_=>t(V).pageNum=_),limit:t(V).pageSize,"onUpdate:limit":a[5]||(a[5]=_=>t(V).pageSize=_),onPagination:Q},null,8,["total","page","limit"]),[[ie,t(b)>0]])])}}}),nt=be({__name:"config-suite-data-dialog",props:{openConfigSuiteDataDialog:{},openConfigSuiteDataDialogModifiers:{},suiteId:{},suiteIdModifiers:{}},emits:ke(["close-dialog"],["update:openConfigSuiteDataDialog","update:suiteId"]),setup(B,{emit:P}){const y=ue(B,"openConfigSuiteDataDialog"),$=ue(B,"suiteId"),S=u("Case"),j=u(null),D=u(null),M=u(null),N=(g,x)=>{g.props.name==="Case"?j.value.getList():g.props.name==="Module"?D.value.getList():g.props.name==="Project"&&M.value.getList()};return(g,x)=>{const T=n("el-tab-pane"),b=n("el-tabs"),R=n("el-dialog");return m(),C(R,{modelValue:y.value,"onUpdate:modelValue":x[1]||(x[1]=O=>y.value=O),width:"90%",title:"套件数据配置","append-to-body":"","destroy-on-close":"",draggable:"",overflow:"","close-on-click-modal":!1,onClosed:x[2]||(x[2]=O=>g.$emit("close-dialog"))},{default:l(()=>[e(b,{modelValue:S.value,"onUpdate:modelValue":x[0]||(x[0]=O=>S.value=O),class:"demo-tabs",onTabClick:N},{default:l(()=>[e(T,{label:"Case",name:"Case"},{default:l(()=>[e(tt,{suiteId:$.value,ref_key:"callCase",ref:j},null,8,["suiteId"])]),_:1}),e(T,{label:"Module",name:"Module"},{default:l(()=>[e(ot,{suiteId:$.value,ref_key:"callModule",ref:D},null,8,["suiteId"])]),_:1}),e(T,{label:"Project",name:"Project"},{default:l(()=>[e(Ze,{suiteId:$.value,ref_key:"callProject",ref:M},null,8,["suiteId"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])}}}),ut=Be(nt,[["__scopeId","data-v-505c434e"]]),dt={class:"app-container"},st=be({name:"SuiteDetail"}),it=Object.assign(st,{props:{suiteId:{},suiteIdModifiers:{},openSuiteDetailDialog:{},openSuiteDetailDialogModifiers:{}},emits:["update:suiteId","update:openSuiteDetailDialog"],setup(B){const P=ue(B,"suiteId"),{proxy:y}=ve(),{qtr_case_status:$}=y.useDict("qtr_case_status"),{qtr_data_type:S}=y.useDict("qtr_data_type"),j=u(!0),D=u(!1),M=u(!1),N=u(!1),g=u(0),x=u(0),T=u([]);u([]);const b=u([]),R=u([]),O=u(!0),z=u(!0),W=u([]),V=ye({form:{},queryParams:{dataName:void 0,projectId:void 0,suiteDetailId:void 0,suiteId:P,dataId:void 0,moduleId:void 0,pageNum:1,pageSize:10,status:void 0}}),J=ue(B,"openSuiteDetailDialog"),{queryParams:I,form:Q}=Ie(V);function h(a){W.value=a.map(o=>o.suiteDetailId)}function i(){q()}function Z(){y.resetForm("queryRef_detail"),i()}function v(){x.value=P.value,D.value=!0}function d(){we(null).then(a=>{b.value=a.data})}function k(){Te(I.value).then(a=>{R.value=a.data})}function F(){I.value.moduleId=void 0,k()}function q(){M.value=!0,Ue(I.value).then(a=>{T.value=a.rows,g.value=a.total}).finally(()=>{M.value=!1})}function X(){T.value=[]}function oe(a){N.value=!0,$e(a.suiteDetailId).then(o=>{if(!o.data||Object.keys(o.data).length===0){alert("未查到对应数据！");return}o.data.status=a.status,Me(o.data).then(L=>{y.$modal.msgSuccess("修改成功")})}).finally(()=>{N.value=!1})}function f(a){Pe({suiteId:a.suiteId,orderNum:a.orderNum,dataId:a.dataId}).then(o=>{je.success(o.msg)}).catch(o=>{je.error("操作失败")})}return d(),q(),(a,o)=>{const L=n("el-option"),E=n("el-select"),p=n("el-form-item"),c=n("el-input"),ee=n("el-button"),de=n("el-form"),ce=n("el-col"),fe=n("right-toolbar"),A=n("el-row"),K=n("el-table-column"),H=n("dict-tag"),_e=n("el-switch"),re=n("el-table"),ge=n("pagination"),_=n("el-dialog"),r=se("hasPermi"),qe=se("loading");return m(),C(_,{fullscreen:"",suiteId:P.value,modelValue:J.value,"onUpdate:modelValue":o[9]||(o[9]=s=>J.value=s),"append-to-body":"","destroy-on-close":"",onClose:X,onOpen:q},{default:l(()=>[Y("div",dt,[U(e(de,{model:t(I),ref:"queryRef_detail",inline:!0},{default:l(()=>[e(p,{label:"所属项目",prop:"projectId"},{default:l(()=>[e(E,{modelValue:t(I).projectId,"onUpdate:modelValue":o[0]||(o[0]=s=>t(I).projectId=s),placeholder:"请选择",onChange:F,clearable:"",style:{width:"150px"}},{default:l(()=>[(m(!0),G(le,null,ae(t(b),s=>(m(),C(L,{key:s.projectId,label:s.projectName,value:s.projectId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"所属模块",prop:"moduleId"},{default:l(()=>[e(E,{modelValue:t(I).moduleId,"onUpdate:modelValue":o[1]||(o[1]=s=>t(I).moduleId=s),placeholder:"请选择",clearable:"",style:{width:"150px"}},{default:l(()=>[(m(!0),G(le,null,ae(t(R),s=>(m(),C(L,{key:s.moduleId,label:s.moduleName,value:s.moduleId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o[12]||(o[12]=w(" 、 ")),e(p,{label:"数据ID",prop:"dataId"},{default:l(()=>[e(c,{modelValue:t(I).dataId,"onUpdate:modelValue":o[2]||(o[2]=s=>t(I).dataId=s),placeholder:"请输入数据ID",clearable:"",style:{width:"200px"},onKeyup:me(i,["enter"])},null,8,["modelValue"])]),_:1}),e(p,{label:"数据名称",prop:"dataName"},{default:l(()=>[e(c,{modelValue:t(I).dataName,"onUpdate:modelValue":o[3]||(o[3]=s=>t(I).dataName=s),placeholder:"请输入数据名称",clearable:"",style:{width:"200px"},onKeyup:me(i,["enter"])},null,8,["modelValue"])]),_:1}),e(p,{label:"数据状态",prop:"status"},{default:l(()=>[e(E,{modelValue:t(I).status,"onUpdate:modelValue":o[4]||(o[4]=s=>t(I).status=s),placeholder:"数据状态",clearable:"",style:{width:"200px"}},{default:l(()=>[(m(!0),G(le,null,ae(t($),s=>(m(),C(L,{key:s.value*1,label:s.label,value:s.value*1},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(p,null,{default:l(()=>[e(ee,{type:"primary",icon:"Search",onClick:i},{default:l(()=>o[10]||(o[10]=[w("搜索")])),_:1,__:[10]}),e(ee,{type:"success",icon:"Refresh",onClick:Z},{default:l(()=>o[11]||(o[11]=[w("重置")])),_:1,__:[11]})]),_:1})]),_:1,__:[12]},8,["model"]),[[ie,t(j)]]),e(A,{gutter:10,class:"mb8"},{default:l(()=>[e(ce,{span:1.5},{default:l(()=>[e(ee,{type:"warning",icon:"Plus",onClick:v},{default:l(()=>o[13]||(o[13]=[w("选择数据")])),_:1,__:[13]})]),_:1}),e(fe,{showSearch:t(j),"onUpdate:showSearch":o[5]||(o[5]=s=>ne(j)?j.value=s:null),onQueryTable:q},null,8,["showSearch"])]),_:1})]),t(O)?U((m(),C(re,{key:0,border:"",data:t(T),"row-key":"suiteDetailId","default-expand-all":t(z),onSelectionChange:h},{default:l(()=>[e(K,{type:"selection",width:"55",align:"center"}),e(K,{prop:"suiteDetailId",label:"ID",width:"160",align:"center"}),e(K,{prop:"suiteId",label:"套件ID",width:"160",align:"center"}),e(K,{prop:"dataId",label:"数据ID",width:"160",align:"center"}),e(K,{prop:"dataType",label:"数据类型",width:"100",align:"center"},{default:l(s=>[e(H,{options:t(S),value:s.row.dataType+""},null,8,["options","value"])]),_:1}),e(K,{prop:"dataName",label:"数据名称"}),e(K,{prop:"orderNum",label:"排序",width:"80px"},{default:l(s=>[e(c,{modelValue:s.row.orderNum,"onUpdate:modelValue":pe=>s.row.orderNum=pe,onChange:pe=>f(s.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(K,{prop:"dataStatus",label:"数据状态",width:"100",align:"center"},{default:l(s=>[e(H,{options:t($),value:s.row.dataStatus+""},null,8,["options","value"])]),_:1}),e(K,{label:"创建时间",align:"center",prop:"createTime",width:"160","class-name":"small-padding fixed-width"},{default:l(s=>[Y("span",null,te(a.parseTime(s.row.createTime)),1)]),_:1}),e(K,{label:"更新时间",align:"center",prop:"updateTime",width:"160","class-name":"small-padding fixed-width"},{default:l(s=>[Y("span",null,te(a.parseTime(s.row.updateTime)),1)]),_:1}),e(K,{label:"操作",width:"170",align:"center","class-name":"small-padding fixed-width",fixed:"right"},{default:l(s=>[e(_e,{modelValue:s.row.status,"onUpdate:modelValue":pe=>s.row.status=pe,"active-value":2,"active-text":"启用","inactive-value":1,"inactive-text":"停用",onChange:pe=>oe(s.row),loading:t(N)},null,8,["modelValue","onUpdate:modelValue","onChange","loading"]),U(e(ee,{link:"",type:"danger",icon:"Delete",onClick:pe=>a.handleDelete(s.row),title:"删除"},null,8,["onClick"]),[[r,["qtr:suite:remove"]]])]),_:1})]),_:1},8,["data","default-expand-all"])),[[qe,t(M)]]):Ne("",!0),U(e(ge,{total:t(g),page:t(I).pageNum,"onUpdate:page":o[6]||(o[6]=s=>t(I).pageNum=s),limit:t(I).pageSize,"onUpdate:limit":o[7]||(o[7]=s=>t(I).pageSize=s),onPagination:q},null,8,["total","page","limit"]),[[ie,t(g)>0]]),e(ut,{"form-datas":t(Q),suiteId:t(x),onCloseDialog:q,"open-config-suite-data-dialog":t(D),"onUpdate:openConfigSuiteDataDialog":o[8]||(o[8]=s=>ne(D)?D.value=s:null)},null,8,["form-datas","suiteId","open-config-suite-data-dialog"])]),_:1},8,["suiteId","modelValue"])}}}),rt={class:"app-container"},pt={class:"dialog-footer"},jt={__name:"index",setup(B){const{proxy:P}=ve(),{qtr_data_status:y}=P.useDict("qtr_data_status"),$=u(null),S=u(!1),j=u(!1);u(!0),u(!0);const D=u(""),M=u(0);u(0);const N=u(!1),g=u([]),x=ye({form:{},queryParams:{pageNum:1,pageSize:10,suiteName:void 0,status:void 0},rules:{suiteName:[{required:!0,message:"套件名称不能为空",trigger:"blur"}],orderNum:[{required:!0,message:"显示排序不能为空",trigger:"blur"}]}}),{queryParams:T,form:b,rules:R}=Ie(x),O=xe(()=>D.value);function z(v){g.value=v.map(d=>d.suiteId)}function W(){S.value=!1,V()}function V(){b.value={suiteId:void 0,suiteName:void 0,orderNum:0,simpleDesc:void 0,status:ze.normal.value},P.resetForm("suiteRef")}function J(v){V(),S.value=!0,D.value="添加套件"}function I(v){const d=v.suiteId;Ve(d).then(k=>{if(!k.data||Object.keys(k.data).length===0){alert("未查到对应数据！");return}b.value=k.data,j.value=!0,M.value=v.suiteId,D.value="配置套件【"+k.data.suiteName+"】"})}function Q(v){V(),Ve(v.suiteId).then(d=>{if(!d.data||Object.keys(d.data).length===0){alert("未查到对应数据！");return}b.value=d.data,S.value=!0,D.value="修改套件"})}function h(){P.$refs.suiteRef.validate(v=>{v&&(b.value.suiteId!==void 0?Qe(b.value).then(d=>{P.$modal.msgSuccess("修改成功"),S.value=!1,$.value.handleQuery()}):Le(b.value).then(d=>{P.$modal.msgSuccess("新增成功"),S.value=!1,$.value.handleQuery()}))})}function i(v){P.$modal.confirm('是否确认删除名称为"'+v.suiteName+'"的数据项?').then(function(){return Oe(v.suiteId)}).then(()=>{$.value.handleQuery(),P.$modal.msgSuccess("删除成功")}).catch(()=>{})}function Z(v){if(v&&"suiteId"in v&&v.suiteId&&(g.value=[v.suiteId]),!g.value||g.value.length===0){he.alert("请选择要运行的套件","提示！",{type:"warning"});return}N.value=!0}return(v,d)=>{const k=n("el-button"),F=n("el-col"),q=n("el-input"),X=n("el-form-item"),oe=n("el-input-number"),f=n("el-radio"),a=n("el-radio-group"),o=n("el-row"),L=n("el-form"),E=n("el-dialog"),p=se("hasPermi");return m(),G("div",rt,[e(Re,{onSelectChange:z,ref_key:"suiteQueryViewRef",ref:$},{"table-tool":l(()=>[e(F,{span:1.5},{default:l(()=>[U((m(),C(k,{type:"primary",plain:"",icon:"Plus",onClick:J},{default:l(()=>d[7]||(d[7]=[w("新增 ")])),_:1,__:[7]})),[[p,["qtr:suite:add"]]]),U((m(),C(k,{type:"warning",icon:"CaretRight",onClick:Z,title:"运行"},{default:l(()=>d[8]||(d[8]=[w("执行 ")])),_:1,__:[8]})),[[p,["hrm:case:run"]]])]),_:1})]),tableOperate:l(({scope:c})=>[U((m(),C(k,{link:"",type:"primary",icon:"Edit",onClick:ee=>Q(c.row)},{default:l(()=>d[9]||(d[9]=[w(" 修改 ")])),_:2,__:[9]},1032,["onClick"])),[[p,["qtr:suite:edit"]]]),U((m(),C(k,{link:"",type:"primary",icon:"Tools",onClick:ee=>I(c.row)},{default:l(()=>d[10]||(d[10]=[w(" 配置 ")])),_:2,__:[10]},1032,["onClick"])),[[p,["qtr:suite:edit"]]]),U((m(),C(k,{link:"",type:"primary",icon:"Delete",onClick:ee=>i(c.row)},{default:l(()=>d[11]||(d[11]=[w(" 删除 ")])),_:2,__:[11]},1032,["onClick"])),[[p,["qtr:suite:remove"]]])]),_:1},512),e(E,{title:t(D),modelValue:t(S),"onUpdate:modelValue":d[4]||(d[4]=c=>ne(S)?S.value=c:null),"append-to-body":""},{footer:l(()=>[Y("div",pt,[e(k,{type:"primary",onClick:h},{default:l(()=>d[12]||(d[12]=[w("确 定")])),_:1,__:[12]}),e(k,{onClick:W},{default:l(()=>d[13]||(d[13]=[w("取 消")])),_:1,__:[13]})])]),default:l(()=>[e(L,{ref:"suiteRef",model:t(b),rules:t(R),"label-width":"80px"},{default:l(()=>[e(o,null,{default:l(()=>[e(F,{span:12},{default:l(()=>[e(X,{label:"套件名称",prop:"suiteName"},{default:l(()=>[e(q,{modelValue:t(b).suiteName,"onUpdate:modelValue":d[0]||(d[0]=c=>t(b).suiteName=c),placeholder:"请输入套件名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(F,{span:12},{default:l(()=>[e(X,{label:"显示排序",prop:"orderNum"},{default:l(()=>[e(oe,{modelValue:t(b).orderNum,"onUpdate:modelValue":d[1]||(d[1]=c=>t(b).orderNum=c),"controls-position":"right",min:0},null,8,["modelValue"])]),_:1})]),_:1}),e(F,{span:12},{default:l(()=>[e(X,{label:"套件描述",prop:"simpleDesc"},{default:l(()=>[e(q,{modelValue:t(b).simpleDesc,"onUpdate:modelValue":d[2]||(d[2]=c=>t(b).simpleDesc=c),placeholder:"请输入描述",maxlength:"400"},null,8,["modelValue"])]),_:1})]),_:1}),e(F,{span:12},{default:l(()=>[e(X,{label:"套件状态"},{default:l(()=>[e(a,{modelValue:t(b).status,"onUpdate:modelValue":d[3]||(d[3]=c=>t(b).status=c)},{default:l(()=>[(m(!0),G(le,null,ae(t(y),c=>(m(),C(f,{key:c.value*1,value:c.value*1},{default:l(()=>[w(te(c.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"]),e(Fe,{"dialog-visible":t(N),"onUpdate:dialogVisible":d[5]||(d[5]=c=>ne(N)?N.value=c:null),"run-type":t(Ee).suite,"run-ids":t(g)},null,8,["dialog-visible","run-type","run-ids"]),e(it,{"form-datas":t(b),"open-suite-detail-dialog":t(j),"onUpdate:openSuiteDetailDialog":d[6]||(d[6]=c=>ne(j)?j.value=c:null),title:t(O),suiteId:t(M),"show-close":"","destroy-on-close":!0},null,8,["form-datas","open-suite-detail-dialog","title","suiteId"])])}}};export{jt as default};
//# sourceMappingURL=index.DfhuXZI_.js.map

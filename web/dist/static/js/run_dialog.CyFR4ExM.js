import{_ as D,t as E}from"./run_detail.VJK9822J.js";import{R as A}from"./project.BEKQUXYm.js";import{ar as L,as as g,r as p,d as n,B as $,o as y,m as C,f as s,i as j,e as l,p as N,h as o,C as q,aR as z,at as k}from"./index.D1UU-JKR.js";const F={class:"dialog-footer"},K={__name:"run_dialog",props:L({runType:{type:Number,default:A.case},showDialog:{type:Boolean,default:!1}},{dialogVisible:{},dialogVisibleModifiers:{},runIds:{},runIdsModifiers:{}}),emits:["update:dialogVisible","update:runIds"],setup(f){const u=g(f,"dialogVisible"),U=g(f,"runIds"),x=f,c=p(!1),d=p(!0),i=p(!1),a=p({ids:U,runType:x.runType,env:null,reportName:null,isAsync:!1,repeatNum:1,concurrent:1,push:!1});function R(m){try{if(i.value=!0,d.value=!1,a.value.ids.length===0){k.error({message:"请选择要执行的数据",type:"error"}),d.value=!0,i.value=!1;return}c.value=!0,E(a.value).then(e=>{k.success({message:e.msg,type:"success"}),u.value=!1}).finally(()=>{c.value=!1,d.value=!0,i.value=!1})}catch(e){console.log(e)}finally{}}function v(){d.value=!0,u.value=!1}function T(m){d?(m(),u.value=!1):(m(!1),u.value=!0)}return(m,e)=>{const r=n("el-form-item"),h=n("el-input"),_=n("el-input-number"),b=n("el-option"),w=n("el-select"),B=n("el-checkbox"),I=n("el-form"),V=n("el-button"),M=$("loading");return y(),C(o(z),{modelValue:u.value,"onUpdate:modelValue":e[6]||(e[6]=t=>u.value=t),title:"测试确认",width:"500","append-to-body":"",onClose:v,"before-close":T,"close-on-click-modal":!1,"close-on-press-escape":!1},{footer:s(()=>[j("div",F,[l(V,{onClick:v},{default:s(()=>e[7]||(e[7]=[N("取消")])),_:1}),l(V,{disabled:o(i),type:"primary",onClick:R},{default:s(()=>e[8]||(e[8]=[N(" 执行 ")])),_:1},8,["disabled"])])]),default:s(()=>[q((y(),C(I,{model:o(a)},{default:s(()=>[l(r,{label:"测试环境："},{default:s(()=>[l(D,{"selected-env":o(a).env,"onUpdate:selectedEnv":e[0]||(e[0]=t=>o(a).env=t),"selector-width":"100%"},null,8,["selected-env"])]),_:1}),l(r,{label:"报告名称："},{default:s(()=>[l(h,{modelValue:o(a).reportName,"onUpdate:modelValue":e[1]||(e[1]=t=>o(a).reportName=t),autocomplete:"off",placeholder:"报告名称，默认为执行时间"},null,8,["modelValue"])]),_:1}),l(r,{label:"执行次数："},{default:s(()=>[l(_,{min:1,"controls-position":"right",modelValue:o(a).repeatNum,"onUpdate:modelValue":e[2]||(e[2]=t=>o(a).repeatNum=t)},null,8,["modelValue"])]),_:1}),l(r,{label:"同步执行："},{default:s(()=>[l(w,{modelValue:o(a).isAsync,"onUpdate:modelValue":e[3]||(e[3]=t=>o(a).isAsync=t),placeholder:"选择本次执行方式"},{default:s(()=>[l(b,{label:"同步",value:!1}),l(b,{label:"异步",value:!0})]),_:1},8,["modelValue"])]),_:1}),l(r,{label:"并发数量："},{default:s(()=>[l(_,{min:1,"controls-position":"right",modelValue:o(a).concurrent,"onUpdate:modelValue":e[4]||(e[4]=t=>o(a).concurrent=t),placeholder:"输入并发执行的用例数量"},null,8,["modelValue"])]),_:1}),l(r,{label:"结果通知："},{default:s(()=>[l(B,{modelValue:o(a).push,"onUpdate:modelValue":e[5]||(e[5]=t=>o(a).push=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])),[[M,o(c),void 0,{fullscreen:!0,lock:!0}]])]),_:1},8,["modelValue"])}}};export{K as _};

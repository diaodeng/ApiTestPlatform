import{F as oe,d as ne,r,J as re,N as se,e as s,H as q,c as R,o as _,I as p,f as t,M as P,l as a,i as o,m as ie,O as ue,P as de,j as x,K as T,n as v,aD as pe,h as U,y as B,a7 as $}from"./index.DLM0P_FN.js";import{l as me,d as ce}from"./report.CGKmgNVL.js";import{r as _e}from"./enum.BYy-eByp.js";import{d as fe}from"./run-detail.DBJ4uq6l.js";import"./run_detail.BJTn3gqP.js";import"./case.ClJHBfiF.js";import"./data-template.BrUbBjfC.js";import"./tools.De_J0dJF.js";import"./table-variables.B-u5fhkB.js";import"./ace-editor.DzAKNVzR.js";import"./ResizeObserver.es.B1PUzC5B.js";import"./module.CsavA2LQ.js";import"./project.NehpJ71d.js";import"./env-selector.BKBox_zM.js";import"./env.DaAQ5naB.js";import"./forward.CYnhzzK1.js";import"./agent.DUVcbZuN.js";const ge={class:"app-container"},he=oe({name:"RunDetail"}),ze=Object.assign(he,{setup(ye){const{proxy:d}=ne(),{sys_normal_disable:ve}=d.useDict("sys_normal_disable"),{hrm_run_status:I}=d.useDict("hrm_run_status"),{sys_request_method:be}=d.useDict("sys_request_method"),{hrm_data_type:j}=d.useDict("hrm_data_type"),{qtr_case_status:z}=d.useDict("qtr_case_status");$("hrm_data_type",j),$("qtr_case_status",z);const k=r([]);r([]),r(!1);const b=r(!0),F=r(!0),C=r([]),K=r(!0),L=r(!0),w=r(0),f=r(!1),N=r(null),g=r({}),h=r(!0),E=re({queryParams:{pageNum:1,pageSize:10,reportId:void 0,reportName:void 0,projectId:void 0,moduleId:void 0,status:void 0,onlySelf:h}}),{queryParams:i}=se(E);function m(){b.value=!0,me(i.value).then(n=>{k.value=n.rows,w.value=n.total,b.value=!1})}function D(){i.value.pageNum=1,m()}function O(){d.resetForm("queryRef"),D()}function Q(n){C.value=n.map(e=>e.reportId),K.value=n.length!=1,L.value=!n.length}function S(n){let e=[];n.reportId?e=[n.reportId]:e=C.value,d.$modal.confirm('是否确认删除ID为"'+e+'"的数据项？').then(function(){return ce({reportIds:e})}).then(()=>{m(),d.$modal.msgSuccess("删除成功")}).catch(()=>{})}function A(n){let e=n.reportId;g.value={},g.value=n,N.value=e,f.value=!0}return m(),(n,e)=>{const H=s("el-input"),y=s("el-form-item"),J=s("el-option"),M=s("el-select"),G=s("el-checkbox"),c=s("el-button"),W=s("el-form"),u=s("el-table-column"),X=s("el-table"),Y=s("pagination"),Z=s("el-main"),ee=s("el-container"),te=s("el-dialog"),V=q("hasPermi"),le=q("loading");return _(),R("div",ge,[p(t(W,{model:a(i),ref:"queryRef",inline:!0},{default:o(()=>[t(y,{label:"报告名称",prop:"reportName"},{default:o(()=>[t(H,{modelValue:a(i).reportName,"onUpdate:modelValue":e[0]||(e[0]=l=>a(i).reportName=l),placeholder:"请输入报告名称",clearable:"",style:{width:"200px"},onKeyup:ie(D,["enter"])},null,8,["modelValue"])]),_:1}),t(y,{label:"状态",prop:"status"},{default:o(()=>[t(M,{modelValue:a(i).status,"onUpdate:modelValue":e[1]||(e[1]=l=>a(i).status=l),placeholder:"报告状态",clearable:"",style:{width:"100px"}},{default:o(()=>[(_(!0),R(ue,null,de(a(I),l=>(_(),x(J,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(y,null,{default:o(()=>[t(G,{modelValue:a(h),"onUpdate:modelValue":e[2]||(e[2]=l=>T(h)?h.value=l:null),onChange:m},{default:o(()=>e[6]||(e[6]=[v("仅自己的数据")])),_:1,__:[6]},8,["modelValue"])]),_:1}),t(y,null,{default:o(()=>[t(c,{type:"primary",icon:"Search",onClick:D},{default:o(()=>e[7]||(e[7]=[v("搜索")])),_:1,__:[7]}),t(c,{type:"default",icon:"Refresh",onClick:O},{default:o(()=>e[8]||(e[8]=[v("重置")])),_:1,__:[8]}),p((_(),x(c,{type:"danger",icon:"Delete",onClick:S},{default:o(()=>e[9]||(e[9]=[v("删除")])),_:1,__:[9]})),[[V,["hrm:report:delete"]]])]),_:1})]),_:1},8,["model"]),[[P,a(F)]]),p((_(),x(X,{data:a(k),onSelectionChange:Q,border:"","table-layout":"fixed","max-height":"calc(100vh - 240px)"},{default:o(()=>[t(u,{type:"selection",width:"55",align:"center"}),t(u,{label:"ID",align:"center",prop:"reportId",width:"150"}),t(u,{label:"报告名",align:"left",prop:"reportName","min-width":"200"}),t(u,{label:"success",align:"center",prop:"success",width:"80"}),t(u,{label:"total",align:"center",prop:"total",width:"70"}),t(u,{label:"status",align:"center",prop:"status",width:"80"},{default:o(l=>[t(pe,{options:a(I),value:l.row.status},null,8,["options","value"])]),_:1}),t(u,{label:"创建人",align:"center",prop:"createBy",width:"70"}),t(u,{label:"执行开始时间",align:"center",prop:"createTime","class-name":"small-padding fixed-width",width:"150"},{default:o(l=>[U("span",null,B(n.parseTime(l.row.startAt)),1)]),_:1}),t(u,{label:"执行时长(S)",align:"center",prop:"createTime","class-name":"small-padding fixed-width",width:"100"},{default:o(l=>[U("span",null,B(l.row.testDuration),1)]),_:1}),t(u,{label:"操作",width:"80",align:"center","class-name":"small-padding fixed-width",fixed:"right"},{default:o(l=>[p(t(c,{link:"",type:"primary",icon:"View",onClick:ae=>A(l.row),title:"查看"},null,8,["onClick"]),[[V,["hrm:report:detail"]]]),p(t(c,{link:"",type:"danger",icon:"Delete",onClick:ae=>S(l.row),title:"删除"},null,8,["onClick"]),[[V,["hrm:report:delete"]]])]),_:1})]),_:1},8,["data"])),[[le,a(b)]]),p(t(Y,{total:a(w),page:a(i).pageNum,"onUpdate:page":e[3]||(e[3]=l=>a(i).pageNum=l),limit:a(i).pageSize,"onUpdate:limit":e[4]||(e[4]=l=>a(i).pageSize=l),onPagination:m},null,8,["total","page","limit"]),[[P,a(w)>0]]),t(te,{fullscreen:"",modelValue:a(f),"onUpdate:modelValue":e[5]||(e[5]=l=>T(f)?f.value=l:null),title:"报告详情【"+a(g).reportId+">>"+a(g).reportName+"】","append-to-body":"","destroy-on-close":""},{default:o(()=>[t(ee,{style:{height:"100%"}},{default:o(()=>[t(Z,{style:{"max-height":"calc(100vh - 95px)"}},{default:o(()=>[t(fe,{"report-id":a(N),"view-type":a(_e).report},null,8,["report-id","view-type"])]),_:1})]),_:1})]),_:1},8,["modelValue","title"])])}}});export{ze as default};
//# sourceMappingURL=index.DRltyfUj.js.map

import{X as m,r as c,J as le,N as ne,C as oe,ab as se,d,H as ue,o as v,c as R,I as C,M as E,h as l,e as n,f as s,l as re,O as ie,P as de,m as D,p as P,aE as B,K as ce,i as L,y as O,n as U,s as pe,L as me}from"./index.N0ypA0wQ.js";function fe(t){return m({url:"/qtr/suite/list",method:"get",params:t})}function ve(t){return m({url:"/qtr/suite/"+t,method:"get"})}function be(t){return m({url:"/qtr/suite",method:"post",data:t})}function Se(t){return m({url:"/qtr/suite",method:"put",data:t})}function we(t){return m({url:"/qtr/suite/"+t,method:"delete"})}function ye(t){return m({url:"/qtr/suite/detailList",method:"get",params:t})}function Ie(t){return m({url:"/qtr/suite/addSuiteDetail",method:"post",data:t})}function qe(t){return m({url:"/qtr/suite/editSuiteDetail",method:"put",data:t})}function ke(t){return m({url:"/qtr/suite/getSuiteDetail/"+t,method:"get"})}function Ne(t){return m({url:"/qtr/suite/changeOrder",method:"post",data:t})}const ge={class:"app-container"},Ce={__name:"suite-table-query",props:{showPagination:{type:Boolean,default:!0},checkedIds:{type:Array,default:[]}},emits:["selectChange"],setup(t,{expose:A,emit:z}){const{proxy:x}=pe(),{qtr_data_status:T}=x.useDict("qtr_data_status"),b=t,K=z;A({handleQuery:y,getSelectedIds:H});const _=c(null),h=c([]);c(!1);const q=c(!0),S=c(!0);c("");const Q=c(!0),$=c(!0),k=c(0),V=c([]),f=c([]),F=le({queryParams:{pageNum:1,pageSize:10,suiteName:void 0,status:void 0},rules:{suiteName:[{required:!0,message:"套件名称不能为空",trigger:"blur"}],orderNum:[{required:!0,message:"显示排序不能为空",trigger:"blur"}]}}),{queryParams:p,rules:he}=ne(F);function w(){q.value=!0,fe(p.value).then(o=>{h.value=o.rows,k.value=o.total,me(()=>{_.value&&_.value.clearSelection(),b.checkedIds&&b.checkedIds.length>0&&_.value&&h.value&&h.value.forEach(e=>{b.checkedIds.find(u=>u===e.suiteId)&&_.value.toggleRowSelection(e,!0)})}),q.value=!1})}function M(o){K("selectChange",o),V.value=o.map(e=>e.suiteId)}function H(){return V.value}function y(){w()}function J(){x.resetForm("queryRef"),y()}function X(o,e){let u=h.value.map(i=>i.suiteId),r=o.map(i=>i.suiteId),N=u.filter(i=>!r.includes(i));r.forEach(i=>{f.value.some(I=>I===i)||f.value.push(i)}),f.value=f.value.filter(i=>!N.includes(i))}function j(o){let e=o.map(u=>u.suiteId);if(e&&e.length>0)e.forEach(u=>{f.value.some(r=>r===u)||f.value.push(u)});else{let u=h.value.map(r=>r.suiteId);f.value=f.value.filter(r=>!u.includes(r))}}return oe(()=>{f.value=se(b.checkedIds),w()}),(o,e)=>{const u=d("el-input"),r=d("el-form-item"),N=d("el-option"),i=d("el-select"),I=d("el-button"),G=d("el-form"),W=d("right-toolbar"),Y=d("el-row"),g=d("el-table-column"),Z=d("dict-tag"),ee=d("el-table"),te=d("pagination"),ae=ue("loading");return v(),R("div",ge,[C(n(G,{model:l(p),ref:"queryRef",inline:!0},{default:s(()=>[n(r,{label:"套件名称",prop:"suiteName"},{default:s(()=>[n(u,{modelValue:l(p).suiteName,"onUpdate:modelValue":e[0]||(e[0]=a=>l(p).suiteName=a),placeholder:"请输入套件名称",clearable:"",style:{width:"200px"},onKeyup:re(y,["enter"])},null,8,["modelValue"])]),_:1}),n(r,{label:"状态",prop:"status"},{default:s(()=>[n(i,{modelValue:l(p).status,"onUpdate:modelValue":e[1]||(e[1]=a=>l(p).status=a),placeholder:"套件状态",clearable:"",style:{width:"200px"}},{default:s(()=>[(v(!0),R(ie,null,de(l(T),a=>(v(),D(N,{key:a.value*1,label:a.label,value:a.value*1},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),n(r,null,{default:s(()=>[n(I,{type:"primary",icon:"Search",onClick:y},{default:s(()=>e[5]||(e[5]=[P("搜索")])),_:1}),n(I,{icon:"Refresh",onClick:J},{default:s(()=>e[6]||(e[6]=[P("重置")])),_:1})]),_:1})]),_:1},8,["model"]),[[E,l(S)]]),n(Y,{gutter:10,class:"mb8"},{default:s(()=>[B(o.$slots,"table-tool"),n(W,{showSearch:l(S),"onUpdate:showSearch":e[2]||(e[2]=a=>ce(S)?S.value=a:null),onQueryTable:w},null,8,["showSearch"])]),_:3}),l($)?C((v(),D(ee,{key:0,border:"",ref_key:"tableRef",ref:_,data:l(h),"row-key":"suiteId","default-expand-all":l(Q),onSelectionChange:M,onSelect:X,onSelectAll:j},{default:s(()=>[n(g,{type:"selection",width:"55",align:"center"}),n(g,{prop:"suiteId",label:"ID",width:"160"}),n(g,{prop:"suiteName",label:"套件名称",width:"200"}),n(g,{prop:"orderNum",label:"排序",width:"200"}),n(g,{prop:"status",label:"状态",width:"100"},{default:s(a=>[n(Z,{options:l(T),value:a.row.status+""},null,8,["options","value"])]),_:1}),n(g,{label:"创建时间",align:"center",prop:"createTime","class-name":"small-padding fixed-width"},{default:s(a=>[L("span",null,O(o.parseTime(a.row.createTime)),1)]),_:1}),n(g,{label:"更新时间",align:"center",prop:"updateTime","class-name":"small-padding fixed-width"},{default:s(a=>[L("span",null,O(o.parseTime(a.row.updateTime)),1)]),_:1}),o.$slots.tableOperate?(v(),D(g,{key:0,label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:s(a=>[B(o.$slots,"tableOperate",{scope:a})]),_:3})):U("",!0)]),_:3},8,["data","default-expand-all"])),[[ae,l(q)]]):U("",!0),C(n(te,{total:l(k),page:l(p).pageNum,"onUpdate:page":e[3]||(e[3]=a=>l(p).pageNum=a),limit:l(p).pageSize,"onUpdate:limit":e[4]||(e[4]=a=>l(p).pageSize=a),onPagination:w},null,8,["total","page","limit"]),[[E,l(k)>0&&t.showPagination]])])}}};export{Ce as _,Ie as a,ve as b,Ne as c,Se as d,be as e,we as f,ke as g,ye as l,qe as u};
//# sourceMappingURL=suite-table-query.rRUnmKkE.js.map

import{af as y,r as u,D as re,a0 as ue,d as r,J as U,o as i,c as I,I as v,U as de,h as a,e,f as l,P as q,a7 as F,l as b,p as h,m as L,z as O,n as se,$ as ie,C as ce,v as me}from"./index.CHnR_MAu.js";import{A as pe}from"./ace-editor.UAWmui2X.js";import{l as $}from"./project.BpVuymad.js";import{a as fe}from"./data-template.CF-ivY4r.js";import"./tools.B8u06WSF.js";import"./ResizeObserver.es.B1PUzC5B.js";function ge(d){return y({url:"/hrm/debugtalk/list",method:"get",params:d})}function _e(d){return y({url:"/hrm/debugtalk/"+d,method:"get"})}function be(d){return y({url:"/hrm/debugtalk",method:"post",data:d})}function he(d){return y({url:"/hrm/debugtalk",method:"put",data:d})}const ke={class:"app-container"},ve=ce({name:"debugtalk"}),De=Object.assign(ve,{setup(d){const{proxy:c}=me(),{sys_normal_disable:j}=c.useDict("sys_normal_disable"),T=u([]),x=u([]),B=u([]),m=u(!1),g=u(!0),A=u(!0),C=u(""),E=u(!0),J=u(!0);u(),u();const Q=re({queryParams:{debugtalkId:void 0,projectId:void 0,status:void 0},rules:{orderNum:[{required:!0,message:"显示排序不能为空",trigger:"blur"}]}}),s=u({debugtalk:JSON.parse(JSON.stringify(fe))}),{queryParams:p,rules:z}=ue(Q);W();function k(){g.value=!0,ge(p.value).then(o=>{T.value=c.handleTree(o.data,"debugtalkId"),g.value=!1})}function M(){m.value=!1,D()}function D(){s.value={debugtalkId:void 0,orderNum:0,debugtalk:void 0,status:"0"},c.resetForm("debugtalkRef")}function V(){k()}function G(){c.resetForm("queryRef"),V()}function H(o){D(),_e(o.debugtalkId).then(n=>{if(!n.data||Object.keys(n.data).length===0){alert("未查到对应数据！");return}s.value=n.data,m.value=!0,C.value="编辑DebugTalk"})}function K(){c.$refs.debugtalkRef.validate(o=>{o&&(s.value.debugtalkId!=null?he(s.value).then(n=>{c.$modal.msgSuccess("修改成功"),m.value=!1,k()}):be(s.value).then(n=>{c.$modal.msgSuccess("新增成功"),m.value=!1,k()}))})}function W(){g.value=!0,$(p.value).then(o=>{B.value=o.data,g.value=!1})}function X(){$(null).then(o=>{x.value=o.data})}return X(),k(),(o,n)=>{const N=r("el-option"),S=r("el-select"),w=r("el-form-item"),_=r("el-button"),P=r("el-form"),f=r("el-table-column"),Y=r("dict-tag"),Z=r("el-table"),ee=r("el-button-group"),te=r("el-header"),le=r("el-main"),ae=r("el-container"),ne=r("el-dialog"),R=U("hasPermi"),oe=U("loading");return i(),I("div",ke,[v(e(P,{model:a(p),ref:"queryRef",inline:!0},{default:l(()=>[e(w,{label:"所属项目",prop:"projectId"},{default:l(()=>[e(S,{modelValue:a(p).projectId,"onUpdate:modelValue":n[0]||(n[0]=t=>a(p).projectId=t),placeholder:"请选择",onChange:o.resetModule,clearable:"",style:{width:"150px"}},{default:l(()=>[(i(!0),I(q,null,F(a(x),t=>(i(),b(N,{key:t.projectId,label:t.projectName,value:t.projectId},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),_:1}),e(w,{label:"状态",prop:"status"},{default:l(()=>[e(S,{modelValue:a(p).status,"onUpdate:modelValue":n[1]||(n[1]=t=>a(p).status=t),placeholder:"状态",clearable:"",style:{width:"100px"}},{default:l(()=>[(i(!0),I(q,null,F(a(j),t=>(i(),b(N,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(w,null,{default:l(()=>[e(_,{type:"primary",icon:"Search",onClick:V},{default:l(()=>[h("搜索")]),_:1}),e(_,{type:"default",icon:"Refresh",onClick:G},{default:l(()=>[h("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[de,a(A)]]),a(J)?v((i(),b(Z,{key:0,border:"",data:a(T),"row-key":"debugtalkId","default-expand-all":a(E)},{default:l(()=>[e(f,{prop:"debugtalkId",label:"ID",width:"150"}),e(f,{label:"项目ID",width:"150",prop:"projectId",align:"center"}),e(f,{label:"所属项目",width:"260",prop:"projectName",align:"center"}),e(f,{align:"center",label:"DebugTalk",width:"260"},{default:l(t=>[v((i(),b(_,{link:"",type:"primary",onClick:ye=>H(t.row)},{default:l(()=>[h("debugtalk.py")]),_:2},1032,["onClick"])),[[R,["hrm:debugtalk:edit","hrm:debugtalk:detail"]]])]),_:1}),e(f,{prop:"status",label:"状态",align:"center",width:"120"},{default:l(t=>[e(Y,{options:a(j),value:t.row.status},null,8,["options","value"])]),_:1}),e(f,{label:"创建时间",align:"center",prop:"createTime","class-name":"small-padding fixed-width"},{default:l(t=>[L("span",null,O(o.parseTime(t.row.createTime)),1)]),_:1}),e(f,{label:"更新时间",align:"center",prop:"updateTime","class-name":"small-padding fixed-width"},{default:l(t=>[L("span",null,O(o.parseTime(t.row.updateTime)),1)]),_:1})]),_:1},8,["data","default-expand-all"])),[[oe,a(g)]]):se("",!0),e(ne,{fullscreen:"",title:a(C),modelValue:a(m),"onUpdate:modelValue":n[3]||(n[3]=t=>ie(m)?m.value=t:null),"append-to-body":""},{default:l(()=>[e(P,{ref:"debugtalkRef",model:a(s),rules:a(z),"label-width":"100px",style:{height:"100%"}},{default:l(()=>[e(ae,{style:{height:"100%"}},{default:l(()=>[e(te,{height:"20px",border:"2px",style:{"border-bottom-color":"#97a8be","text-align":"right"}},{default:l(()=>[e(ee,null,{default:l(()=>[v((i(),b(_,{type:"primary",icon:"Save",onClick:K},{default:l(()=>[h("保存")]),_:1})),[[R,["hrm:debugtalk:edit"]]]),e(_,{type:"primary",icon:"Cancel",onClick:M},{default:l(()=>[h("取消")]),_:1})]),_:1})]),_:1}),e(le,{style:{"max-height":"calc(100vh - 95px)"}},{default:l(()=>[e(pe,{content:a(s).debugtalk,"onUpdate:content":n[2]||(n[2]=t=>a(s).debugtalk=t),"can-set":"true",lang:"python",themes:"monokai"},null,8,["content"])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{De as default};
